var cp=Object.defineProperty;var dp=(e,t,r)=>t in e?cp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Vr=(e,t,r)=>(dp(e,typeof t!="symbol"?t+"":t,r),r);function up(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function eu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tu={exports:{}},Bo={},ru={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba=Symbol.for("react.element"),mp=Symbol.for("react.portal"),fp=Symbol.for("react.fragment"),pp=Symbol.for("react.strict_mode"),hp=Symbol.for("react.profiler"),gp=Symbol.for("react.provider"),yp=Symbol.for("react.context"),vp=Symbol.for("react.forward_ref"),xp=Symbol.for("react.suspense"),wp=Symbol.for("react.memo"),bp=Symbol.for("react.lazy"),gc=Symbol.iterator;function Np(e){return e===null||typeof e!="object"?null:(e=gc&&e[gc]||e["@@iterator"],typeof e=="function"?e:null)}var nu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},au=Object.assign,ou={};function bn(e,t,r){this.props=e,this.context=t,this.refs=ou,this.updater=r||nu}bn.prototype.isReactComponent={};bn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function su(){}su.prototype=bn.prototype;function oi(e,t,r){this.props=e,this.context=t,this.refs=ou,this.updater=r||nu}var si=oi.prototype=new su;si.constructor=oi;au(si,bn.prototype);si.isPureReactComponent=!0;var yc=Array.isArray,lu=Object.prototype.hasOwnProperty,li={current:null},iu={key:!0,ref:!0,__self:!0,__source:!0};function cu(e,t,r){var n,a={},o=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)lu.call(t,n)&&!iu.hasOwnProperty(n)&&(a[n]=t[n]);var i=arguments.length-2;if(i===1)a.children=r;else if(1<i){for(var c=Array(i),m=0;m<i;m++)c[m]=arguments[m+2];a.children=c}if(e&&e.defaultProps)for(n in i=e.defaultProps,i)a[n]===void 0&&(a[n]=i[n]);return{$$typeof:ba,type:e,key:o,ref:l,props:a,_owner:li.current}}function Ep(e,t){return{$$typeof:ba,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ii(e){return typeof e=="object"&&e!==null&&e.$$typeof===ba}function Sp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var vc=/\/+/g;function xs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sp(""+e.key):t.toString(36)}function Qa(e,t,r,n,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ba:case mp:l=!0}}if(l)return l=e,a=a(l),e=n===""?"."+xs(l,0):n,yc(a)?(r="",e!=null&&(r=e.replace(vc,"$&/")+"/"),Qa(a,t,r,"",function(m){return m})):a!=null&&(ii(a)&&(a=Ep(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(vc,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=n===""?".":n+":",yc(e))for(var i=0;i<e.length;i++){o=e[i];var c=n+xs(o,i);l+=Qa(o,t,r,c,a)}else if(c=Np(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=n+xs(o,i++),l+=Qa(o,t,r,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function La(e,t,r){if(e==null)return e;var n=[],a=0;return Qa(e,n,"","",function(o){return t.call(r,o,a++)}),n}function Cp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var We={current:null},Ga={transition:null},kp={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:Ga,ReactCurrentOwner:li};function du(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:La,forEach:function(e,t,r){La(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return La(e,function(){t++}),t},toArray:function(e){return La(e,function(t){return t})||[]},only:function(e){if(!ii(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=bn;oe.Fragment=fp;oe.Profiler=hp;oe.PureComponent=oi;oe.StrictMode=pp;oe.Suspense=xp;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kp;oe.act=du;oe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=au({},e.props),a=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=li.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)lu.call(t,c)&&!iu.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){i=Array(c);for(var m=0;m<c;m++)i[m]=arguments[m+2];n.children=i}return{$$typeof:ba,type:e.type,key:a,ref:o,props:n,_owner:l}};oe.createContext=function(e){return e={$$typeof:yp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gp,_context:e},e.Consumer=e};oe.createElement=cu;oe.createFactory=function(e){var t=cu.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:vp,render:e}};oe.isValidElement=ii;oe.lazy=function(e){return{$$typeof:bp,_payload:{_status:-1,_result:e},_init:Cp}};oe.memo=function(e,t){return{$$typeof:wp,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=Ga.transition;Ga.transition={};try{e()}finally{Ga.transition=t}};oe.unstable_act=du;oe.useCallback=function(e,t){return We.current.useCallback(e,t)};oe.useContext=function(e){return We.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return We.current.useDeferredValue(e)};oe.useEffect=function(e,t){return We.current.useEffect(e,t)};oe.useId=function(){return We.current.useId()};oe.useImperativeHandle=function(e,t,r){return We.current.useImperativeHandle(e,t,r)};oe.useInsertionEffect=function(e,t){return We.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return We.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return We.current.useMemo(e,t)};oe.useReducer=function(e,t,r){return We.current.useReducer(e,t,r)};oe.useRef=function(e){return We.current.useRef(e)};oe.useState=function(e){return We.current.useState(e)};oe.useSyncExternalStore=function(e,t,r){return We.current.useSyncExternalStore(e,t,r)};oe.useTransition=function(){return We.current.useTransition()};oe.version="18.3.1";ru.exports=oe;var p=ru.exports;const zo=eu(p),Pp=up({__proto__:null,default:zo},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp=p,Lp=Symbol.for("react.element"),Tp=Symbol.for("react.fragment"),Ip=Object.prototype.hasOwnProperty,Dp=Rp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_p={key:!0,ref:!0,__self:!0,__source:!0};function uu(e,t,r){var n,a={},o=null,l=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Ip.call(t,n)&&!_p.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Lp,type:e,key:o,ref:l,props:a,_owner:Dp.current}}Bo.Fragment=Tp;Bo.jsx=uu;Bo.jsxs=uu;tu.exports=Bo;var ci=tu.exports;const Et=ci.Fragment,s=ci.jsx,d=ci.jsxs;var tl={},mu={exports:{}},st={},fu={exports:{}},pu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,$){var I=R.length;R.push($);e:for(;0<I;){var K=I-1>>>1,J=R[K];if(0<a(J,$))R[K]=$,R[I]=J,I=K;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var $=R[0],I=R.pop();if(I!==$){R[0]=I;e:for(var K=0,J=R.length,fe=J>>>1;K<fe;){var C=2*(K+1)-1,S=R[C],B=C+1,G=R[B];if(0>a(S,I))B<J&&0>a(G,S)?(R[K]=G,R[B]=I,K=B):(R[K]=S,R[C]=I,K=C);else if(B<J&&0>a(G,I))R[K]=G,R[B]=I,K=B;else break e}}return $}function a(R,$){var I=R.sortIndex-$.sortIndex;return I!==0?I:R.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,i=l.now();e.unstable_now=function(){return l.now()-i}}var c=[],m=[],f=1,u=null,h=3,b=!1,y=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var $=r(m);$!==null;){if($.callback===null)n(m);else if($.startTime<=R)n(m),$.sortIndex=$.expirationTime,t(c,$);else break;$=r(m)}}function E(R){if(w=!1,v(R),!y)if(r(c)!==null)y=!0,te(P);else{var $=r(m);$!==null&&H(E,$.startTime-R)}}function P(R,$){y=!1,w&&(w=!1,x(j),j=-1),b=!0;var I=h;try{for(v($),u=r(c);u!==null&&(!(u.expirationTime>$)||R&&!re());){var K=u.callback;if(typeof K=="function"){u.callback=null,h=u.priorityLevel;var J=K(u.expirationTime<=$);$=e.unstable_now(),typeof J=="function"?u.callback=J:u===r(c)&&n(c),v($)}else n(c);u=r(c)}if(u!==null)var fe=!0;else{var C=r(m);C!==null&&H(E,C.startTime-$),fe=!1}return fe}finally{u=null,h=I,b=!1}}var T=!1,_=null,j=-1,X=5,q=-1;function re(){return!(e.unstable_now()-q<X)}function ee(){if(_!==null){var R=e.unstable_now();q=R;var $=!0;try{$=_(!0,R)}finally{$?F():(T=!1,_=null)}}else T=!1}var F;if(typeof g=="function")F=function(){g(ee)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Q=M.port2;M.port1.onmessage=ee,F=function(){Q.postMessage(null)}}else F=function(){N(ee,0)};function te(R){_=R,T||(T=!0,F())}function H(R,$){j=N(function(){R(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){y||b||(y=!0,te(P))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var I=h;h=$;try{return R()}finally{h=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,$){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var I=h;h=R;try{return $()}finally{h=I}},e.unstable_scheduleCallback=function(R,$,I){var K=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?K+I:K):I=K,R){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=I+J,R={id:f++,callback:$,priorityLevel:R,startTime:I,expirationTime:J,sortIndex:-1},I>K?(R.sortIndex=I,t(m,R),r(c)===null&&R===r(m)&&(w?(x(j),j=-1):w=!0,H(E,I-K))):(R.sortIndex=J,t(c,R),y||b||(y=!0,te(P))),R},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(R){var $=h;return function(){var I=h;h=$;try{return R.apply(this,arguments)}finally{h=I}}}})(pu);fu.exports=pu;var Ap=fu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op=p,ot=Ap;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hu=new Set,Xn={};function $r(e,t){fn(e,t),fn(e+"Capture",t)}function fn(e,t){for(Xn[e]=t,e=0;e<t.length;e++)hu.add(t[e])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rl=Object.prototype.hasOwnProperty,jp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xc={},wc={};function Up(e){return rl.call(wc,e)?!0:rl.call(xc,e)?!1:jp.test(e)?wc[e]=!0:(xc[e]=!0,!1)}function Fp(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Mp(e,t,r,n){if(t===null||typeof t>"u"||Fp(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qe(e,t,r,n,a,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ue[e]=new qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ue[t]=new qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ue[e]=new qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ue[e]=new qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ue[e]=new qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ue[e]=new qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ue[e]=new qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ue[e]=new qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ue[e]=new qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var di=/[\-:]([a-z])/g;function ui(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(di,ui);Ue[t]=new qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(di,ui);Ue[t]=new qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(di,ui);Ue[t]=new qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ue[e]=new qe(e,1,!1,e.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ue[e]=new qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function mi(e,t,r,n){var a=Ue.hasOwnProperty(t)?Ue[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Mp(t,r,a,n)&&(r=null),n||a===null?Up(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Kt=Op.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ta=Symbol.for("react.element"),Qr=Symbol.for("react.portal"),Gr=Symbol.for("react.fragment"),fi=Symbol.for("react.strict_mode"),nl=Symbol.for("react.profiler"),gu=Symbol.for("react.provider"),yu=Symbol.for("react.context"),pi=Symbol.for("react.forward_ref"),al=Symbol.for("react.suspense"),ol=Symbol.for("react.suspense_list"),hi=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),vu=Symbol.for("react.offscreen"),bc=Symbol.iterator;function Ln(e){return e===null||typeof e!="object"?null:(e=bc&&e[bc]||e["@@iterator"],typeof e=="function"?e:null)}var Ne=Object.assign,ws;function Mn(e){if(ws===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ws=t&&t[1]||""}return`
`+ws+e}var bs=!1;function Ns(e,t){if(!e||bs)return"";bs=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var n=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){n=m}e.call(t.prototype)}else{try{throw Error()}catch(m){n=m}e()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),o=n.stack.split(`
`),l=a.length-1,i=o.length-1;1<=l&&0<=i&&a[l]!==o[i];)i--;for(;1<=l&&0<=i;l--,i--)if(a[l]!==o[i]){if(l!==1||i!==1)do if(l--,i--,0>i||a[l]!==o[i]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=i);break}}}finally{bs=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Mn(e):""}function $p(e){switch(e.tag){case 5:return Mn(e.type);case 16:return Mn("Lazy");case 13:return Mn("Suspense");case 19:return Mn("SuspenseList");case 0:case 2:case 15:return e=Ns(e.type,!1),e;case 11:return e=Ns(e.type.render,!1),e;case 1:return e=Ns(e.type,!0),e;default:return""}}function sl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gr:return"Fragment";case Qr:return"Portal";case nl:return"Profiler";case fi:return"StrictMode";case al:return"Suspense";case ol:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yu:return(e.displayName||"Context")+".Consumer";case gu:return(e._context.displayName||"Context")+".Provider";case pi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hi:return t=e.displayName||null,t!==null?t:sl(e.type)||"Memo";case Xt:t=e._payload,e=e._init;try{return sl(e(t))}catch{}}return null}function Bp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sl(t);case 8:return t===fi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zp(e){var t=xu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ia(e){e._valueTracker||(e._valueTracker=zp(e))}function wu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=xu(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function co(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ll(e,t){var r=t.checked;return Ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Nc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=gr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bu(e,t){t=t.checked,t!=null&&mi(e,"checked",t,!1)}function il(e,t){bu(e,t);var r=gr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?cl(e,t.type,r):t.hasOwnProperty("defaultValue")&&cl(e,t.type,gr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ec(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function cl(e,t,r){(t!=="number"||co(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var $n=Array.isArray;function sn(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+gr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function dl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return Ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(O(92));if($n(r)){if(1<r.length)throw Error(O(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:gr(r)}}function Nu(e,t){var r=gr(t.value),n=gr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Cc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Eu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ul(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Eu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Da,Su=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Da.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ea(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hp=["Webkit","ms","Moz","O"];Object.keys(Hn).forEach(function(e){Hp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hn[t]=Hn[e]})});function Cu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hn.hasOwnProperty(e)&&Hn[e]?(""+t).trim():t+"px"}function ku(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Cu(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Vp=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ml(e,t){if(t){if(Vp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function fl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pl=null;function gi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hl=null,ln=null,cn=null;function kc(e){if(e=Sa(e)){if(typeof hl!="function")throw Error(O(280));var t=e.stateNode;t&&(t=Qo(t),hl(e.stateNode,e.type,t))}}function Pu(e){ln?cn?cn.push(e):cn=[e]:ln=e}function Ru(){if(ln){var e=ln,t=cn;if(cn=ln=null,kc(e),t)for(e=0;e<t.length;e++)kc(t[e])}}function Lu(e,t){return e(t)}function Tu(){}var Es=!1;function Iu(e,t,r){if(Es)return e(t,r);Es=!0;try{return Lu(e,t,r)}finally{Es=!1,(ln!==null||cn!==null)&&(Tu(),Ru())}}function ta(e,t){var r=e.stateNode;if(r===null)return null;var n=Qo(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(O(231,t,typeof r));return r}var gl=!1;if(Vt)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){gl=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{gl=!1}function Wp(e,t,r,n,a,o,l,i,c){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(f){this.onError(f)}}var Vn=!1,uo=null,mo=!1,yl=null,qp={onError:function(e){Vn=!0,uo=e}};function Qp(e,t,r,n,a,o,l,i,c){Vn=!1,uo=null,Wp.apply(qp,arguments)}function Gp(e,t,r,n,a,o,l,i,c){if(Qp.apply(this,arguments),Vn){if(Vn){var m=uo;Vn=!1,uo=null}else throw Error(O(198));mo||(mo=!0,yl=m)}}function Br(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Du(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Pc(e){if(Br(e)!==e)throw Error(O(188))}function Kp(e){var t=e.alternate;if(!t){if(t=Br(e),t===null)throw Error(O(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return Pc(a),e;if(o===n)return Pc(a),t;o=o.sibling}throw Error(O(188))}if(r.return!==n.return)r=a,n=o;else{for(var l=!1,i=a.child;i;){if(i===r){l=!0,r=a,n=o;break}if(i===n){l=!0,n=a,r=o;break}i=i.sibling}if(!l){for(i=o.child;i;){if(i===r){l=!0,r=o,n=a;break}if(i===n){l=!0,n=o,r=a;break}i=i.sibling}if(!l)throw Error(O(189))}}if(r.alternate!==n)throw Error(O(190))}if(r.tag!==3)throw Error(O(188));return r.stateNode.current===r?e:t}function _u(e){return e=Kp(e),e!==null?Au(e):null}function Au(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Au(e);if(t!==null)return t;e=e.sibling}return null}var Ou=ot.unstable_scheduleCallback,Rc=ot.unstable_cancelCallback,Yp=ot.unstable_shouldYield,Jp=ot.unstable_requestPaint,ke=ot.unstable_now,Zp=ot.unstable_getCurrentPriorityLevel,yi=ot.unstable_ImmediatePriority,ju=ot.unstable_UserBlockingPriority,fo=ot.unstable_NormalPriority,Xp=ot.unstable_LowPriority,Uu=ot.unstable_IdlePriority,Ho=null,At=null;function eh(e){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Ho,e,void 0,(e.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:nh,th=Math.log,rh=Math.LN2;function nh(e){return e>>>=0,e===0?32:31-(th(e)/rh|0)|0}var _a=64,Aa=4194304;function Bn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function po(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,o=e.pingedLanes,l=r&268435455;if(l!==0){var i=l&~a;i!==0?n=Bn(i):(o&=l,o!==0&&(n=Bn(o)))}else l=r&~a,l!==0?n=Bn(l):o!==0&&(n=Bn(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-wt(t),a=1<<r,n|=e[r],t&=~a;return n}function ah(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oh(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-wt(o),i=1<<l,c=a[l];c===-1?(!(i&r)||i&n)&&(a[l]=ah(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function vl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fu(){var e=_a;return _a<<=1,!(_a&4194240)&&(_a=64),e}function Ss(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Na(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wt(t),e[t]=r}function sh(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-wt(r),o=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~o}}function vi(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-wt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var me=0;function Mu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $u,xi,Bu,zu,Hu,xl=!1,Oa=[],lr=null,ir=null,cr=null,ra=new Map,na=new Map,tr=[],lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lc(e,t){switch(e){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":ra.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":na.delete(t.pointerId)}}function In(e,t,r,n,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Sa(t),t!==null&&xi(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function ih(e,t,r,n,a){switch(t){case"focusin":return lr=In(lr,e,t,r,n,a),!0;case"dragenter":return ir=In(ir,e,t,r,n,a),!0;case"mouseover":return cr=In(cr,e,t,r,n,a),!0;case"pointerover":var o=a.pointerId;return ra.set(o,In(ra.get(o)||null,e,t,r,n,a)),!0;case"gotpointercapture":return o=a.pointerId,na.set(o,In(na.get(o)||null,e,t,r,n,a)),!0}return!1}function Vu(e){var t=Pr(e.target);if(t!==null){var r=Br(t);if(r!==null){if(t=r.tag,t===13){if(t=Du(r),t!==null){e.blockedOn=t,Hu(e.priority,function(){Bu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ka(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=wl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);pl=n,r.target.dispatchEvent(n),pl=null}else return t=Sa(r),t!==null&&xi(t),e.blockedOn=r,!1;t.shift()}return!0}function Tc(e,t,r){Ka(e)&&r.delete(t)}function ch(){xl=!1,lr!==null&&Ka(lr)&&(lr=null),ir!==null&&Ka(ir)&&(ir=null),cr!==null&&Ka(cr)&&(cr=null),ra.forEach(Tc),na.forEach(Tc)}function Dn(e,t){e.blockedOn===t&&(e.blockedOn=null,xl||(xl=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,ch)))}function aa(e){function t(a){return Dn(a,e)}if(0<Oa.length){Dn(Oa[0],e);for(var r=1;r<Oa.length;r++){var n=Oa[r];n.blockedOn===e&&(n.blockedOn=null)}}for(lr!==null&&Dn(lr,e),ir!==null&&Dn(ir,e),cr!==null&&Dn(cr,e),ra.forEach(t),na.forEach(t),r=0;r<tr.length;r++)n=tr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<tr.length&&(r=tr[0],r.blockedOn===null);)Vu(r),r.blockedOn===null&&tr.shift()}var dn=Kt.ReactCurrentBatchConfig,ho=!0;function dh(e,t,r,n){var a=me,o=dn.transition;dn.transition=null;try{me=1,wi(e,t,r,n)}finally{me=a,dn.transition=o}}function uh(e,t,r,n){var a=me,o=dn.transition;dn.transition=null;try{me=4,wi(e,t,r,n)}finally{me=a,dn.transition=o}}function wi(e,t,r,n){if(ho){var a=wl(e,t,r,n);if(a===null)As(e,t,n,go,r),Lc(e,n);else if(ih(a,e,t,r,n))n.stopPropagation();else if(Lc(e,n),t&4&&-1<lh.indexOf(e)){for(;a!==null;){var o=Sa(a);if(o!==null&&$u(o),o=wl(e,t,r,n),o===null&&As(e,t,n,go,r),o===a)break;a=o}a!==null&&n.stopPropagation()}else As(e,t,n,null,r)}}var go=null;function wl(e,t,r,n){if(go=null,e=gi(n),e=Pr(e),e!==null)if(t=Br(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Du(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return go=e,null}function Wu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zp()){case yi:return 1;case ju:return 4;case fo:case Xp:return 16;case Uu:return 536870912;default:return 16}default:return 16}}var nr=null,bi=null,Ya=null;function qu(){if(Ya)return Ya;var e,t=bi,r=t.length,n,a="value"in nr?nr.value:nr.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===a[o-n];n++);return Ya=a.slice(e,1<n?1-n:void 0)}function Ja(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ja(){return!0}function Ic(){return!1}function lt(e){function t(r,n,a,o,l){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ja:Ic,this.isPropagationStopped=Ic,this}return Ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ja)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ja)},persist:function(){},isPersistent:ja}),t}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ni=lt(Nn),Ea=Ne({},Nn,{view:0,detail:0}),mh=lt(Ea),Cs,ks,_n,Vo=Ne({},Ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ei,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_n&&(_n&&e.type==="mousemove"?(Cs=e.screenX-_n.screenX,ks=e.screenY-_n.screenY):ks=Cs=0,_n=e),Cs)},movementY:function(e){return"movementY"in e?e.movementY:ks}}),Dc=lt(Vo),fh=Ne({},Vo,{dataTransfer:0}),ph=lt(fh),hh=Ne({},Ea,{relatedTarget:0}),Ps=lt(hh),gh=Ne({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),yh=lt(gh),vh=Ne({},Nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xh=lt(vh),wh=Ne({},Nn,{data:0}),_c=lt(wh),bh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Eh[e])?!!t[e]:!1}function Ei(){return Sh}var Ch=Ne({},Ea,{key:function(e){if(e.key){var t=bh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ja(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ei,charCode:function(e){return e.type==="keypress"?Ja(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ja(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kh=lt(Ch),Ph=Ne({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ac=lt(Ph),Rh=Ne({},Ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ei}),Lh=lt(Rh),Th=Ne({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ih=lt(Th),Dh=Ne({},Vo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_h=lt(Dh),Ah=[9,13,27,32],Si=Vt&&"CompositionEvent"in window,Wn=null;Vt&&"documentMode"in document&&(Wn=document.documentMode);var Oh=Vt&&"TextEvent"in window&&!Wn,Qu=Vt&&(!Si||Wn&&8<Wn&&11>=Wn),Oc=String.fromCharCode(32),jc=!1;function Gu(e,t){switch(e){case"keyup":return Ah.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ku(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kr=!1;function jh(e,t){switch(e){case"compositionend":return Ku(t);case"keypress":return t.which!==32?null:(jc=!0,Oc);case"textInput":return e=t.data,e===Oc&&jc?null:e;default:return null}}function Uh(e,t){if(Kr)return e==="compositionend"||!Si&&Gu(e,t)?(e=qu(),Ya=bi=nr=null,Kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qu&&t.locale!=="ko"?null:t.data;default:return null}}var Fh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fh[e.type]:t==="textarea"}function Yu(e,t,r,n){Pu(n),t=yo(t,"onChange"),0<t.length&&(r=new Ni("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qn=null,oa=null;function Mh(e){lm(e,0)}function Wo(e){var t=Zr(e);if(wu(t))return e}function $h(e,t){if(e==="change")return t}var Ju=!1;if(Vt){var Rs;if(Vt){var Ls="oninput"in document;if(!Ls){var Fc=document.createElement("div");Fc.setAttribute("oninput","return;"),Ls=typeof Fc.oninput=="function"}Rs=Ls}else Rs=!1;Ju=Rs&&(!document.documentMode||9<document.documentMode)}function Mc(){qn&&(qn.detachEvent("onpropertychange",Zu),oa=qn=null)}function Zu(e){if(e.propertyName==="value"&&Wo(oa)){var t=[];Yu(t,oa,e,gi(e)),Iu(Mh,t)}}function Bh(e,t,r){e==="focusin"?(Mc(),qn=t,oa=r,qn.attachEvent("onpropertychange",Zu)):e==="focusout"&&Mc()}function zh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wo(oa)}function Hh(e,t){if(e==="click")return Wo(t)}function Vh(e,t){if(e==="input"||e==="change")return Wo(t)}function Wh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var St=typeof Object.is=="function"?Object.is:Wh;function sa(e,t){if(St(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!rl.call(t,a)||!St(e[a],t[a]))return!1}return!0}function $c(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bc(e,t){var r=$c(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$c(r)}}function Xu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function em(){for(var e=window,t=co();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=co(e.document)}return t}function Ci(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qh(e){var t=em(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Xu(r.ownerDocument.documentElement,r)){if(n!==null&&Ci(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(n.start,a);n=n.end===void 0?o:Math.min(n.end,a),!e.extend&&o>n&&(a=n,n=o,o=a),a=Bc(r,o);var l=Bc(r,n);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qh=Vt&&"documentMode"in document&&11>=document.documentMode,Yr=null,bl=null,Qn=null,Nl=!1;function zc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Nl||Yr==null||Yr!==co(n)||(n=Yr,"selectionStart"in n&&Ci(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Qn&&sa(Qn,n)||(Qn=n,n=yo(bl,"onSelect"),0<n.length&&(t=new Ni("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Yr)))}function Ua(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Jr={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionend:Ua("Transition","TransitionEnd")},Ts={},tm={};Vt&&(tm=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function qo(e){if(Ts[e])return Ts[e];if(!Jr[e])return e;var t=Jr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in tm)return Ts[e]=t[r];return e}var rm=qo("animationend"),nm=qo("animationiteration"),am=qo("animationstart"),om=qo("transitionend"),sm=new Map,Hc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vr(e,t){sm.set(e,t),$r(t,[e])}for(var Is=0;Is<Hc.length;Is++){var Ds=Hc[Is],Gh=Ds.toLowerCase(),Kh=Ds[0].toUpperCase()+Ds.slice(1);vr(Gh,"on"+Kh)}vr(rm,"onAnimationEnd");vr(nm,"onAnimationIteration");vr(am,"onAnimationStart");vr("dblclick","onDoubleClick");vr("focusin","onFocus");vr("focusout","onBlur");vr(om,"onTransitionEnd");fn("onMouseEnter",["mouseout","mouseover"]);fn("onMouseLeave",["mouseout","mouseover"]);fn("onPointerEnter",["pointerout","pointerover"]);fn("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yh=new Set("cancel close invalid load scroll toggle".split(" ").concat(zn));function Vc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Gp(n,t,void 0,e),e.currentTarget=null}function lm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var l=n.length-1;0<=l;l--){var i=n[l],c=i.instance,m=i.currentTarget;if(i=i.listener,c!==o&&a.isPropagationStopped())break e;Vc(a,i,m),o=c}else for(l=0;l<n.length;l++){if(i=n[l],c=i.instance,m=i.currentTarget,i=i.listener,c!==o&&a.isPropagationStopped())break e;Vc(a,i,m),o=c}}}if(mo)throw e=yl,mo=!1,yl=null,e}function ge(e,t){var r=t[Pl];r===void 0&&(r=t[Pl]=new Set);var n=e+"__bubble";r.has(n)||(im(t,e,2,!1),r.add(n))}function _s(e,t,r){var n=0;t&&(n|=4),im(r,e,n,t)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function la(e){if(!e[Fa]){e[Fa]=!0,hu.forEach(function(r){r!=="selectionchange"&&(Yh.has(r)||_s(r,!1,e),_s(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fa]||(t[Fa]=!0,_s("selectionchange",!1,t))}}function im(e,t,r,n){switch(Wu(t)){case 1:var a=dh;break;case 4:a=uh;break;default:a=wi}r=a.bind(null,t,r,e),a=void 0,!gl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function As(e,t,r,n,a){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var i=n.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;i!==null;){if(l=Pr(i),l===null)return;if(c=l.tag,c===5||c===6){n=o=l;continue e}i=i.parentNode}}n=n.return}Iu(function(){var m=o,f=gi(r),u=[];e:{var h=sm.get(e);if(h!==void 0){var b=Ni,y=e;switch(e){case"keypress":if(Ja(r)===0)break e;case"keydown":case"keyup":b=kh;break;case"focusin":y="focus",b=Ps;break;case"focusout":y="blur",b=Ps;break;case"beforeblur":case"afterblur":b=Ps;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=ph;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Lh;break;case rm:case nm:case am:b=yh;break;case om:b=Ih;break;case"scroll":b=mh;break;case"wheel":b=_h;break;case"copy":case"cut":case"paste":b=xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Ac}var w=(t&4)!==0,N=!w&&e==="scroll",x=w?h!==null?h+"Capture":null:h;w=[];for(var g=m,v;g!==null;){v=g;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,x!==null&&(E=ta(g,x),E!=null&&w.push(ia(g,E,v)))),N)break;g=g.return}0<w.length&&(h=new b(h,y,null,r,f),u.push({event:h,listeners:w}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",h&&r!==pl&&(y=r.relatedTarget||r.fromElement)&&(Pr(y)||y[Wt]))break e;if((b||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,b?(y=r.relatedTarget||r.toElement,b=m,y=y?Pr(y):null,y!==null&&(N=Br(y),y!==N||y.tag!==5&&y.tag!==6)&&(y=null)):(b=null,y=m),b!==y)){if(w=Dc,E="onMouseLeave",x="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(w=Ac,E="onPointerLeave",x="onPointerEnter",g="pointer"),N=b==null?h:Zr(b),v=y==null?h:Zr(y),h=new w(E,g+"leave",b,r,f),h.target=N,h.relatedTarget=v,E=null,Pr(f)===m&&(w=new w(x,g+"enter",y,r,f),w.target=v,w.relatedTarget=N,E=w),N=E,b&&y)t:{for(w=b,x=y,g=0,v=w;v;v=Wr(v))g++;for(v=0,E=x;E;E=Wr(E))v++;for(;0<g-v;)w=Wr(w),g--;for(;0<v-g;)x=Wr(x),v--;for(;g--;){if(w===x||x!==null&&w===x.alternate)break t;w=Wr(w),x=Wr(x)}w=null}else w=null;b!==null&&Wc(u,h,b,w,!1),y!==null&&N!==null&&Wc(u,N,y,w,!0)}}e:{if(h=m?Zr(m):window,b=h.nodeName&&h.nodeName.toLowerCase(),b==="select"||b==="input"&&h.type==="file")var P=$h;else if(Uc(h))if(Ju)P=Vh;else{P=zh;var T=Bh}else(b=h.nodeName)&&b.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(P=Hh);if(P&&(P=P(e,m))){Yu(u,P,r,f);break e}T&&T(e,h,m),e==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&cl(h,"number",h.value)}switch(T=m?Zr(m):window,e){case"focusin":(Uc(T)||T.contentEditable==="true")&&(Yr=T,bl=m,Qn=null);break;case"focusout":Qn=bl=Yr=null;break;case"mousedown":Nl=!0;break;case"contextmenu":case"mouseup":case"dragend":Nl=!1,zc(u,r,f);break;case"selectionchange":if(Qh)break;case"keydown":case"keyup":zc(u,r,f)}var _;if(Si)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Kr?Gu(e,r)&&(j="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(Qu&&r.locale!=="ko"&&(Kr||j!=="onCompositionStart"?j==="onCompositionEnd"&&Kr&&(_=qu()):(nr=f,bi="value"in nr?nr.value:nr.textContent,Kr=!0)),T=yo(m,j),0<T.length&&(j=new _c(j,e,null,r,f),u.push({event:j,listeners:T}),_?j.data=_:(_=Ku(r),_!==null&&(j.data=_)))),(_=Oh?jh(e,r):Uh(e,r))&&(m=yo(m,"onBeforeInput"),0<m.length&&(f=new _c("onBeforeInput","beforeinput",null,r,f),u.push({event:f,listeners:m}),f.data=_))}lm(u,t)})}function ia(e,t,r){return{instance:e,listener:t,currentTarget:r}}function yo(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=ta(e,r),o!=null&&n.unshift(ia(e,o,a)),o=ta(e,t),o!=null&&n.push(ia(e,o,a))),e=e.return}return n}function Wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wc(e,t,r,n,a){for(var o=t._reactName,l=[];r!==null&&r!==n;){var i=r,c=i.alternate,m=i.stateNode;if(c!==null&&c===n)break;i.tag===5&&m!==null&&(i=m,a?(c=ta(r,o),c!=null&&l.unshift(ia(r,c,i))):a||(c=ta(r,o),c!=null&&l.push(ia(r,c,i)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Jh=/\r\n?/g,Zh=/\u0000|\uFFFD/g;function qc(e){return(typeof e=="string"?e:""+e).replace(Jh,`
`).replace(Zh,"")}function Ma(e,t,r){if(t=qc(t),qc(e)!==t&&r)throw Error(O(425))}function vo(){}var El=null,Sl=null;function Cl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kl=typeof setTimeout=="function"?setTimeout:void 0,Xh=typeof clearTimeout=="function"?clearTimeout:void 0,Qc=typeof Promise=="function"?Promise:void 0,e0=typeof queueMicrotask=="function"?queueMicrotask:typeof Qc<"u"?function(e){return Qc.resolve(null).then(e).catch(t0)}:kl;function t0(e){setTimeout(function(){throw e})}function Os(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),aa(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);aa(t)}function dr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var En=Math.random().toString(36).slice(2),Dt="__reactFiber$"+En,ca="__reactProps$"+En,Wt="__reactContainer$"+En,Pl="__reactEvents$"+En,r0="__reactListeners$"+En,n0="__reactHandles$"+En;function Pr(e){var t=e[Dt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Wt]||r[Dt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Gc(e);e!==null;){if(r=e[Dt])return r;e=Gc(e)}return t}e=r,r=e.parentNode}return null}function Sa(e){return e=e[Dt]||e[Wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function Qo(e){return e[ca]||null}var Rl=[],Xr=-1;function xr(e){return{current:e}}function ye(e){0>Xr||(e.current=Rl[Xr],Rl[Xr]=null,Xr--)}function he(e,t){Xr++,Rl[Xr]=e.current,e.current=t}var yr={},ze=xr(yr),Je=xr(!1),Ar=yr;function pn(e,t){var r=e.type.contextTypes;if(!r)return yr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ze(e){return e=e.childContextTypes,e!=null}function xo(){ye(Je),ye(ze)}function Kc(e,t,r){if(ze.current!==yr)throw Error(O(168));he(ze,t),he(Je,r)}function cm(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(O(108,Bp(e)||"Unknown",a));return Ne({},r,n)}function wo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yr,Ar=ze.current,he(ze,e),he(Je,Je.current),!0}function Yc(e,t,r){var n=e.stateNode;if(!n)throw Error(O(169));r?(e=cm(e,t,Ar),n.__reactInternalMemoizedMergedChildContext=e,ye(Je),ye(ze),he(ze,e)):ye(Je),he(Je,r)}var $t=null,Go=!1,js=!1;function dm(e){$t===null?$t=[e]:$t.push(e)}function a0(e){Go=!0,dm(e)}function wr(){if(!js&&$t!==null){js=!0;var e=0,t=me;try{var r=$t;for(me=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}$t=null,Go=!1}catch(a){throw $t!==null&&($t=$t.slice(e+1)),Ou(yi,wr),a}finally{me=t,js=!1}}return null}var en=[],tn=0,bo=null,No=0,dt=[],ut=0,Or=null,Bt=1,zt="";function Cr(e,t){en[tn++]=No,en[tn++]=bo,bo=e,No=t}function um(e,t,r){dt[ut++]=Bt,dt[ut++]=zt,dt[ut++]=Or,Or=e;var n=Bt;e=zt;var a=32-wt(n)-1;n&=~(1<<a),r+=1;var o=32-wt(t)+a;if(30<o){var l=a-a%5;o=(n&(1<<l)-1).toString(32),n>>=l,a-=l,Bt=1<<32-wt(t)+a|r<<a|n,zt=o+e}else Bt=1<<o|r<<a|n,zt=e}function ki(e){e.return!==null&&(Cr(e,1),um(e,1,0))}function Pi(e){for(;e===bo;)bo=en[--tn],en[tn]=null,No=en[--tn],en[tn]=null;for(;e===Or;)Or=dt[--ut],dt[ut]=null,zt=dt[--ut],dt[ut]=null,Bt=dt[--ut],dt[ut]=null}var at=null,nt=null,ve=!1,xt=null;function mm(e,t){var r=mt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Jc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,nt=dr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Or!==null?{id:Bt,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=mt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,at=e,nt=null,!0):!1;default:return!1}}function Ll(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tl(e){if(ve){var t=nt;if(t){var r=t;if(!Jc(e,t)){if(Ll(e))throw Error(O(418));t=dr(r.nextSibling);var n=at;t&&Jc(e,t)?mm(n,r):(e.flags=e.flags&-4097|2,ve=!1,at=e)}}else{if(Ll(e))throw Error(O(418));e.flags=e.flags&-4097|2,ve=!1,at=e}}}function Zc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function $a(e){if(e!==at)return!1;if(!ve)return Zc(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cl(e.type,e.memoizedProps)),t&&(t=nt)){if(Ll(e))throw fm(),Error(O(418));for(;t;)mm(e,t),t=dr(t.nextSibling)}if(Zc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){nt=dr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=at?dr(e.stateNode.nextSibling):null;return!0}function fm(){for(var e=nt;e;)e=dr(e.nextSibling)}function hn(){nt=at=null,ve=!1}function Ri(e){xt===null?xt=[e]:xt.push(e)}var o0=Kt.ReactCurrentBatchConfig;function An(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(O(309));var n=r.stateNode}if(!n)throw Error(O(147,e));var a=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var i=a.refs;l===null?delete i[o]:i[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(O(284));if(!r._owner)throw Error(O(290,e))}return e}function Ba(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xc(e){var t=e._init;return t(e._payload)}function pm(e){function t(x,g){if(e){var v=x.deletions;v===null?(x.deletions=[g],x.flags|=16):v.push(g)}}function r(x,g){if(!e)return null;for(;g!==null;)t(x,g),g=g.sibling;return null}function n(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function a(x,g){return x=pr(x,g),x.index=0,x.sibling=null,x}function o(x,g,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<g?(x.flags|=2,g):v):(x.flags|=2,g)):(x.flags|=1048576,g)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function i(x,g,v,E){return g===null||g.tag!==6?(g=Hs(v,x.mode,E),g.return=x,g):(g=a(g,v),g.return=x,g)}function c(x,g,v,E){var P=v.type;return P===Gr?f(x,g,v.props.children,E,v.key):g!==null&&(g.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Xt&&Xc(P)===g.type)?(E=a(g,v.props),E.ref=An(x,g,v),E.return=x,E):(E=ao(v.type,v.key,v.props,null,x.mode,E),E.ref=An(x,g,v),E.return=x,E)}function m(x,g,v,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Vs(v,x.mode,E),g.return=x,g):(g=a(g,v.children||[]),g.return=x,g)}function f(x,g,v,E,P){return g===null||g.tag!==7?(g=Dr(v,x.mode,E,P),g.return=x,g):(g=a(g,v),g.return=x,g)}function u(x,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Hs(""+g,x.mode,v),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ta:return v=ao(g.type,g.key,g.props,null,x.mode,v),v.ref=An(x,null,g),v.return=x,v;case Qr:return g=Vs(g,x.mode,v),g.return=x,g;case Xt:var E=g._init;return u(x,E(g._payload),v)}if($n(g)||Ln(g))return g=Dr(g,x.mode,v,null),g.return=x,g;Ba(x,g)}return null}function h(x,g,v,E){var P=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return P!==null?null:i(x,g,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ta:return v.key===P?c(x,g,v,E):null;case Qr:return v.key===P?m(x,g,v,E):null;case Xt:return P=v._init,h(x,g,P(v._payload),E)}if($n(v)||Ln(v))return P!==null?null:f(x,g,v,E,null);Ba(x,v)}return null}function b(x,g,v,E,P){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(v)||null,i(g,x,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ta:return x=x.get(E.key===null?v:E.key)||null,c(g,x,E,P);case Qr:return x=x.get(E.key===null?v:E.key)||null,m(g,x,E,P);case Xt:var T=E._init;return b(x,g,v,T(E._payload),P)}if($n(E)||Ln(E))return x=x.get(v)||null,f(g,x,E,P,null);Ba(g,E)}return null}function y(x,g,v,E){for(var P=null,T=null,_=g,j=g=0,X=null;_!==null&&j<v.length;j++){_.index>j?(X=_,_=null):X=_.sibling;var q=h(x,_,v[j],E);if(q===null){_===null&&(_=X);break}e&&_&&q.alternate===null&&t(x,_),g=o(q,g,j),T===null?P=q:T.sibling=q,T=q,_=X}if(j===v.length)return r(x,_),ve&&Cr(x,j),P;if(_===null){for(;j<v.length;j++)_=u(x,v[j],E),_!==null&&(g=o(_,g,j),T===null?P=_:T.sibling=_,T=_);return ve&&Cr(x,j),P}for(_=n(x,_);j<v.length;j++)X=b(_,x,j,v[j],E),X!==null&&(e&&X.alternate!==null&&_.delete(X.key===null?j:X.key),g=o(X,g,j),T===null?P=X:T.sibling=X,T=X);return e&&_.forEach(function(re){return t(x,re)}),ve&&Cr(x,j),P}function w(x,g,v,E){var P=Ln(v);if(typeof P!="function")throw Error(O(150));if(v=P.call(v),v==null)throw Error(O(151));for(var T=P=null,_=g,j=g=0,X=null,q=v.next();_!==null&&!q.done;j++,q=v.next()){_.index>j?(X=_,_=null):X=_.sibling;var re=h(x,_,q.value,E);if(re===null){_===null&&(_=X);break}e&&_&&re.alternate===null&&t(x,_),g=o(re,g,j),T===null?P=re:T.sibling=re,T=re,_=X}if(q.done)return r(x,_),ve&&Cr(x,j),P;if(_===null){for(;!q.done;j++,q=v.next())q=u(x,q.value,E),q!==null&&(g=o(q,g,j),T===null?P=q:T.sibling=q,T=q);return ve&&Cr(x,j),P}for(_=n(x,_);!q.done;j++,q=v.next())q=b(_,x,j,q.value,E),q!==null&&(e&&q.alternate!==null&&_.delete(q.key===null?j:q.key),g=o(q,g,j),T===null?P=q:T.sibling=q,T=q);return e&&_.forEach(function(ee){return t(x,ee)}),ve&&Cr(x,j),P}function N(x,g,v,E){if(typeof v=="object"&&v!==null&&v.type===Gr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ta:e:{for(var P=v.key,T=g;T!==null;){if(T.key===P){if(P=v.type,P===Gr){if(T.tag===7){r(x,T.sibling),g=a(T,v.props.children),g.return=x,x=g;break e}}else if(T.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Xt&&Xc(P)===T.type){r(x,T.sibling),g=a(T,v.props),g.ref=An(x,T,v),g.return=x,x=g;break e}r(x,T);break}else t(x,T);T=T.sibling}v.type===Gr?(g=Dr(v.props.children,x.mode,E,v.key),g.return=x,x=g):(E=ao(v.type,v.key,v.props,null,x.mode,E),E.ref=An(x,g,v),E.return=x,x=E)}return l(x);case Qr:e:{for(T=v.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){r(x,g.sibling),g=a(g,v.children||[]),g.return=x,x=g;break e}else{r(x,g);break}else t(x,g);g=g.sibling}g=Vs(v,x.mode,E),g.return=x,x=g}return l(x);case Xt:return T=v._init,N(x,g,T(v._payload),E)}if($n(v))return y(x,g,v,E);if(Ln(v))return w(x,g,v,E);Ba(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(r(x,g.sibling),g=a(g,v),g.return=x,x=g):(r(x,g),g=Hs(v,x.mode,E),g.return=x,x=g),l(x)):r(x,g)}return N}var gn=pm(!0),hm=pm(!1),Eo=xr(null),So=null,rn=null,Li=null;function Ti(){Li=rn=So=null}function Ii(e){var t=Eo.current;ye(Eo),e._currentValue=t}function Il(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function un(e,t){So=e,Li=rn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ye=!0),e.firstContext=null)}function pt(e){var t=e._currentValue;if(Li!==e)if(e={context:e,memoizedValue:t,next:null},rn===null){if(So===null)throw Error(O(308));rn=e,So.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var Rr=null;function Di(e){Rr===null?Rr=[e]:Rr.push(e)}function gm(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Di(t)):(r.next=a.next,a.next=r),t.interleaved=r,qt(e,n)}function qt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var er=!1;function _i(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ht(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ur(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ie&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,qt(e,r)}return a=n.interleaved,a===null?(t.next=t,Di(n)):(t.next=a.next,a.next=t),n.interleaved=t,qt(e,r)}function Za(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vi(e,r)}}function ed(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Co(e,t,r,n){var a=e.updateQueue;er=!1;var o=a.firstBaseUpdate,l=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,m=c.next;c.next=null,l===null?o=m:l.next=m,l=c;var f=e.alternate;f!==null&&(f=f.updateQueue,i=f.lastBaseUpdate,i!==l&&(i===null?f.firstBaseUpdate=m:i.next=m,f.lastBaseUpdate=c))}if(o!==null){var u=a.baseState;l=0,f=m=c=null,i=o;do{var h=i.lane,b=i.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:b,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var y=e,w=i;switch(h=t,b=r,w.tag){case 1:if(y=w.payload,typeof y=="function"){u=y.call(b,u,h);break e}u=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,h=typeof y=="function"?y.call(b,u,h):y,h==null)break e;u=Ne({},u,h);break e;case 2:er=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[i]:h.push(i))}else b={eventTime:b,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},f===null?(m=f=b,c=u):f=f.next=b,l|=h;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;h=i,i=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(f===null&&(c=u),a.baseState=c,a.firstBaseUpdate=m,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Ur|=l,e.lanes=l,e.memoizedState=u}}function td(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(O(191,a));a.call(n)}}}var Ca={},Ot=xr(Ca),da=xr(Ca),ua=xr(Ca);function Lr(e){if(e===Ca)throw Error(O(174));return e}function Ai(e,t){switch(he(ua,t),he(da,e),he(Ot,Ca),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ul(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ul(t,e)}ye(Ot),he(Ot,t)}function yn(){ye(Ot),ye(da),ye(ua)}function vm(e){Lr(ua.current);var t=Lr(Ot.current),r=ul(t,e.type);t!==r&&(he(da,e),he(Ot,r))}function Oi(e){da.current===e&&(ye(Ot),ye(da))}var we=xr(0);function ko(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Us=[];function ji(){for(var e=0;e<Us.length;e++)Us[e]._workInProgressVersionPrimary=null;Us.length=0}var Xa=Kt.ReactCurrentDispatcher,Fs=Kt.ReactCurrentBatchConfig,jr=0,be=null,Ie=null,_e=null,Po=!1,Gn=!1,ma=0,s0=0;function Fe(){throw Error(O(321))}function Ui(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!St(e[r],t[r]))return!1;return!0}function Fi(e,t,r,n,a,o){if(jr=o,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xa.current=e===null||e.memoizedState===null?d0:u0,e=r(n,a),Gn){o=0;do{if(Gn=!1,ma=0,25<=o)throw Error(O(301));o+=1,_e=Ie=null,t.updateQueue=null,Xa.current=m0,e=r(n,a)}while(Gn)}if(Xa.current=Ro,t=Ie!==null&&Ie.next!==null,jr=0,_e=Ie=be=null,Po=!1,t)throw Error(O(300));return e}function Mi(){var e=ma!==0;return ma=0,e}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?be.memoizedState=_e=e:_e=_e.next=e,_e}function ht(){if(Ie===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=_e===null?be.memoizedState:_e.next;if(t!==null)_e=t,Ie=e;else{if(e===null)throw Error(O(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},_e===null?be.memoizedState=_e=e:_e=_e.next=e}return _e}function fa(e,t){return typeof t=="function"?t(e):t}function Ms(e){var t=ht(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var n=Ie,a=n.baseQueue,o=r.pending;if(o!==null){if(a!==null){var l=a.next;a.next=o.next,o.next=l}n.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,n=n.baseState;var i=l=null,c=null,m=o;do{var f=m.lane;if((jr&f)===f)c!==null&&(c=c.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),n=m.hasEagerState?m.eagerState:e(n,m.action);else{var u={lane:f,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};c===null?(i=c=u,l=n):c=c.next=u,be.lanes|=f,Ur|=f}m=m.next}while(m!==null&&m!==o);c===null?l=n:c.next=i,St(n,t.memoizedState)||(Ye=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do o=a.lane,be.lanes|=o,Ur|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function $s(e){var t=ht(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do o=e(o,l.action),l=l.next;while(l!==a);St(o,t.memoizedState)||(Ye=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function xm(){}function wm(e,t){var r=be,n=ht(),a=t(),o=!St(n.memoizedState,a);if(o&&(n.memoizedState=a,Ye=!0),n=n.queue,$i(Em.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||_e!==null&&_e.memoizedState.tag&1){if(r.flags|=2048,pa(9,Nm.bind(null,r,n,a,t),void 0,null),Ae===null)throw Error(O(349));jr&30||bm(r,t,a)}return a}function bm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Nm(e,t,r,n){t.value=r,t.getSnapshot=n,Sm(t)&&Cm(e)}function Em(e,t,r){return r(function(){Sm(t)&&Cm(e)})}function Sm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!St(e,r)}catch{return!0}}function Cm(e){var t=qt(e,1);t!==null&&bt(t,e,1,-1)}function rd(e){var t=Tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t.queue=e,e=e.dispatch=c0.bind(null,be,e),[t.memoizedState,e]}function pa(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function km(){return ht().memoizedState}function eo(e,t,r,n){var a=Tt();be.flags|=e,a.memoizedState=pa(1|t,r,void 0,n===void 0?null:n)}function Ko(e,t,r,n){var a=ht();n=n===void 0?null:n;var o=void 0;if(Ie!==null){var l=Ie.memoizedState;if(o=l.destroy,n!==null&&Ui(n,l.deps)){a.memoizedState=pa(t,r,o,n);return}}be.flags|=e,a.memoizedState=pa(1|t,r,o,n)}function nd(e,t){return eo(8390656,8,e,t)}function $i(e,t){return Ko(2048,8,e,t)}function Pm(e,t){return Ko(4,2,e,t)}function Rm(e,t){return Ko(4,4,e,t)}function Lm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Tm(e,t,r){return r=r!=null?r.concat([e]):null,Ko(4,4,Lm.bind(null,t,e),r)}function Bi(){}function Im(e,t){var r=ht();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ui(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Dm(e,t){var r=ht();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ui(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function _m(e,t,r){return jr&21?(St(r,t)||(r=Fu(),be.lanes|=r,Ur|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ye=!0),e.memoizedState=r)}function l0(e,t){var r=me;me=r!==0&&4>r?r:4,e(!0);var n=Fs.transition;Fs.transition={};try{e(!1),t()}finally{me=r,Fs.transition=n}}function Am(){return ht().memoizedState}function i0(e,t,r){var n=fr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Om(e))jm(t,r);else if(r=gm(e,t,r,n),r!==null){var a=Ve();bt(r,e,n,a),Um(r,t,n)}}function c0(e,t,r){var n=fr(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Om(e))jm(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,i=o(l,r);if(a.hasEagerState=!0,a.eagerState=i,St(i,l)){var c=t.interleaved;c===null?(a.next=a,Di(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=gm(e,t,a,n),r!==null&&(a=Ve(),bt(r,e,n,a),Um(r,t,n))}}function Om(e){var t=e.alternate;return e===be||t!==null&&t===be}function jm(e,t){Gn=Po=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Um(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vi(e,r)}}var Ro={readContext:pt,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},d0={readContext:pt,useCallback:function(e,t){return Tt().memoizedState=[e,t===void 0?null:t],e},useContext:pt,useEffect:nd,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,eo(4194308,4,Lm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return eo(4194308,4,e,t)},useInsertionEffect:function(e,t){return eo(4,2,e,t)},useMemo:function(e,t){var r=Tt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Tt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=i0.bind(null,be,e),[n.memoizedState,e]},useRef:function(e){var t=Tt();return e={current:e},t.memoizedState=e},useState:rd,useDebugValue:Bi,useDeferredValue:function(e){return Tt().memoizedState=e},useTransition:function(){var e=rd(!1),t=e[0];return e=l0.bind(null,e[1]),Tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=be,a=Tt();if(ve){if(r===void 0)throw Error(O(407));r=r()}else{if(r=t(),Ae===null)throw Error(O(349));jr&30||bm(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,nd(Em.bind(null,n,o,e),[e]),n.flags|=2048,pa(9,Nm.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Tt(),t=Ae.identifierPrefix;if(ve){var r=zt,n=Bt;r=(n&~(1<<32-wt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ma++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=s0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},u0={readContext:pt,useCallback:Im,useContext:pt,useEffect:$i,useImperativeHandle:Tm,useInsertionEffect:Pm,useLayoutEffect:Rm,useMemo:Dm,useReducer:Ms,useRef:km,useState:function(){return Ms(fa)},useDebugValue:Bi,useDeferredValue:function(e){var t=ht();return _m(t,Ie.memoizedState,e)},useTransition:function(){var e=Ms(fa)[0],t=ht().memoizedState;return[e,t]},useMutableSource:xm,useSyncExternalStore:wm,useId:Am,unstable_isNewReconciler:!1},m0={readContext:pt,useCallback:Im,useContext:pt,useEffect:$i,useImperativeHandle:Tm,useInsertionEffect:Pm,useLayoutEffect:Rm,useMemo:Dm,useReducer:$s,useRef:km,useState:function(){return $s(fa)},useDebugValue:Bi,useDeferredValue:function(e){var t=ht();return Ie===null?t.memoizedState=e:_m(t,Ie.memoizedState,e)},useTransition:function(){var e=$s(fa)[0],t=ht().memoizedState;return[e,t]},useMutableSource:xm,useSyncExternalStore:wm,useId:Am,unstable_isNewReconciler:!1};function yt(e,t){if(e&&e.defaultProps){t=Ne({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Dl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ne({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Yo={isMounted:function(e){return(e=e._reactInternals)?Br(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ve(),a=fr(e),o=Ht(n,a);o.payload=t,r!=null&&(o.callback=r),t=ur(e,o,a),t!==null&&(bt(t,e,a,n),Za(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ve(),a=fr(e),o=Ht(n,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=ur(e,o,a),t!==null&&(bt(t,e,a,n),Za(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ve(),n=fr(e),a=Ht(r,n);a.tag=2,t!=null&&(a.callback=t),t=ur(e,a,n),t!==null&&(bt(t,e,n,r),Za(t,e,n))}};function ad(e,t,r,n,a,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,l):t.prototype&&t.prototype.isPureReactComponent?!sa(r,n)||!sa(a,o):!0}function Fm(e,t,r){var n=!1,a=yr,o=t.contextType;return typeof o=="object"&&o!==null?o=pt(o):(a=Ze(t)?Ar:ze.current,n=t.contextTypes,o=(n=n!=null)?pn(e,a):yr),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function od(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Yo.enqueueReplaceState(t,t.state,null)}function _l(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},_i(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=pt(o):(o=Ze(t)?Ar:ze.current,a.context=pn(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Dl(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Yo.enqueueReplaceState(a,a.state,null),Co(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function vn(e,t){try{var r="",n=t;do r+=$p(n),n=n.return;while(n);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Bs(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Al(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var f0=typeof WeakMap=="function"?WeakMap:Map;function Mm(e,t,r){r=Ht(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){To||(To=!0,Vl=n),Al(e,t)},r}function $m(e,t,r){r=Ht(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Al(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Al(e,t),typeof n!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function sd(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new f0;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=P0.bind(null,e,t,r),t.then(e,e))}function ld(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function id(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ht(-1,1),t.tag=2,ur(r,t,1))),r.lanes|=1),e)}var p0=Kt.ReactCurrentOwner,Ye=!1;function He(e,t,r,n){t.child=e===null?hm(t,null,r,n):gn(t,e.child,r,n)}function cd(e,t,r,n,a){r=r.render;var o=t.ref;return un(t,a),n=Fi(e,t,r,n,o,a),r=Mi(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Qt(e,t,a)):(ve&&r&&ki(t),t.flags|=1,He(e,t,n,a),t.child)}function dd(e,t,r,n,a){if(e===null){var o=r.type;return typeof o=="function"&&!Ki(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Bm(e,t,o,n,a)):(e=ao(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var l=o.memoizedProps;if(r=r.compare,r=r!==null?r:sa,r(l,n)&&e.ref===t.ref)return Qt(e,t,a)}return t.flags|=1,e=pr(o,n),e.ref=t.ref,e.return=t,t.child=e}function Bm(e,t,r,n,a){if(e!==null){var o=e.memoizedProps;if(sa(o,n)&&e.ref===t.ref)if(Ye=!1,t.pendingProps=n=o,(e.lanes&a)!==0)e.flags&131072&&(Ye=!0);else return t.lanes=e.lanes,Qt(e,t,a)}return Ol(e,t,r,n,a)}function zm(e,t,r){var n=t.pendingProps,a=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(an,rt),rt|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,he(an,rt),rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,he(an,rt),rt|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,he(an,rt),rt|=n;return He(e,t,a,r),t.child}function Hm(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ol(e,t,r,n,a){var o=Ze(r)?Ar:ze.current;return o=pn(t,o),un(t,a),r=Fi(e,t,r,n,o,a),n=Mi(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Qt(e,t,a)):(ve&&n&&ki(t),t.flags|=1,He(e,t,r,a),t.child)}function ud(e,t,r,n,a){if(Ze(r)){var o=!0;wo(t)}else o=!1;if(un(t,a),t.stateNode===null)to(e,t),Fm(t,r,n),_l(t,r,n,a),n=!0;else if(e===null){var l=t.stateNode,i=t.memoizedProps;l.props=i;var c=l.context,m=r.contextType;typeof m=="object"&&m!==null?m=pt(m):(m=Ze(r)?Ar:ze.current,m=pn(t,m));var f=r.getDerivedStateFromProps,u=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";u||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(i!==n||c!==m)&&od(t,l,n,m),er=!1;var h=t.memoizedState;l.state=h,Co(t,n,l,a),c=t.memoizedState,i!==n||h!==c||Je.current||er?(typeof f=="function"&&(Dl(t,r,f,n),c=t.memoizedState),(i=er||ad(t,r,i,n,h,c,m))?(u||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=m,n=i):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,ym(e,t),i=t.memoizedProps,m=t.type===t.elementType?i:yt(t.type,i),l.props=m,u=t.pendingProps,h=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=pt(c):(c=Ze(r)?Ar:ze.current,c=pn(t,c));var b=r.getDerivedStateFromProps;(f=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(i!==u||h!==c)&&od(t,l,n,c),er=!1,h=t.memoizedState,l.state=h,Co(t,n,l,a);var y=t.memoizedState;i!==u||h!==y||Je.current||er?(typeof b=="function"&&(Dl(t,r,b,n),y=t.memoizedState),(m=er||ad(t,r,m,n,h,y,c)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,y,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),l.props=n,l.state=y,l.context=c,n=m):(typeof l.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return jl(e,t,r,n,o,a)}function jl(e,t,r,n,a,o){Hm(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return a&&Yc(t,r,!1),Qt(e,t,o);n=t.stateNode,p0.current=t;var i=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=gn(t,e.child,null,o),t.child=gn(t,null,i,o)):He(e,t,i,o),t.memoizedState=n.state,a&&Yc(t,r,!0),t.child}function Vm(e){var t=e.stateNode;t.pendingContext?Kc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kc(e,t.context,!1),Ai(e,t.containerInfo)}function md(e,t,r,n,a){return hn(),Ri(a),t.flags|=256,He(e,t,r,n),t.child}var Ul={dehydrated:null,treeContext:null,retryLane:0};function Fl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wm(e,t,r){var n=t.pendingProps,a=we.current,o=!1,l=(t.flags&128)!==0,i;if((i=l)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),he(we,a&1),e===null)return Tl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,o?(n=t.mode,o=t.child,l={mode:"hidden",children:l},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Xo(l,n,0,null),e=Dr(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fl(r),t.memoizedState=Ul,e):zi(t,l));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return h0(e,t,l,n,i,a,r);if(o){o=n.fallback,l=t.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=pr(a,c),n.subtreeFlags=a.subtreeFlags&14680064),i!==null?o=pr(i,o):(o=Dr(o,l,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,l=e.child.memoizedState,l=l===null?Fl(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Ul,n}return o=e.child,e=o.sibling,n=pr(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function zi(e,t){return t=Xo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function za(e,t,r,n){return n!==null&&Ri(n),gn(t,e.child,null,r),e=zi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function h0(e,t,r,n,a,o,l){if(r)return t.flags&256?(t.flags&=-257,n=Bs(Error(O(422))),za(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,a=t.mode,n=Xo({mode:"visible",children:n.children},a,0,null),o=Dr(o,a,l,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&gn(t,e.child,null,l),t.child.memoizedState=Fl(l),t.memoizedState=Ul,o);if(!(t.mode&1))return za(e,t,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var i=n.dgst;return n=i,o=Error(O(419)),n=Bs(o,n,void 0),za(e,t,l,n)}if(i=(l&e.childLanes)!==0,Ye||i){if(n=Ae,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,qt(e,a),bt(n,e,a,-1))}return Gi(),n=Bs(Error(O(421))),za(e,t,l,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=R0.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,nt=dr(a.nextSibling),at=t,ve=!0,xt=null,e!==null&&(dt[ut++]=Bt,dt[ut++]=zt,dt[ut++]=Or,Bt=e.id,zt=e.overflow,Or=t),t=zi(t,n.children),t.flags|=4096,t)}function fd(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Il(e.return,t,r)}function zs(e,t,r,n,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a)}function qm(e,t,r){var n=t.pendingProps,a=n.revealOrder,o=n.tail;if(He(e,t,n.children,r),n=we.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fd(e,r,t);else if(e.tag===19)fd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(he(we,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&ko(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),zs(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ko(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}zs(t,!0,r,null,o);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function to(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ur|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,r=pr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=pr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function g0(e,t,r){switch(t.tag){case 3:Vm(t),hn();break;case 5:vm(t);break;case 1:Ze(t.type)&&wo(t);break;case 4:Ai(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;he(Eo,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(he(we,we.current&1),t.flags|=128,null):r&t.child.childLanes?Wm(e,t,r):(he(we,we.current&1),e=Qt(e,t,r),e!==null?e.sibling:null);he(we,we.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return qm(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),he(we,we.current),n)break;return null;case 22:case 23:return t.lanes=0,zm(e,t,r)}return Qt(e,t,r)}var Qm,Ml,Gm,Km;Qm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ml=function(){};Gm=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Lr(Ot.current);var o=null;switch(r){case"input":a=ll(e,a),n=ll(e,n),o=[];break;case"select":a=Ne({},a,{value:void 0}),n=Ne({},n,{value:void 0}),o=[];break;case"textarea":a=dl(e,a),n=dl(e,n),o=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=vo)}ml(r,n);var l;r=null;for(m in a)if(!n.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var i=a[m];for(l in i)i.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Xn.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in n){var c=n[m];if(i=a!=null?a[m]:void 0,n.hasOwnProperty(m)&&c!==i&&(c!=null||i!=null))if(m==="style")if(i){for(l in i)!i.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&i[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(o||(o=[]),o.push(m,r)),r=c;else m==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(m,c)):m==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(m,""+c):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Xn.hasOwnProperty(m)?(c!=null&&m==="onScroll"&&ge("scroll",e),o||i===c||(o=[])):(o=o||[]).push(m,c))}r&&(o=o||[]).push("style",r);var m=o;(t.updateQueue=m)&&(t.flags|=4)}};Km=function(e,t,r,n){r!==n&&(t.flags|=4)};function On(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function y0(e,t,r){var n=t.pendingProps;switch(Pi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return Ze(t.type)&&xo(),Me(t),null;case 3:return n=t.stateNode,yn(),ye(Je),ye(ze),ji(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&($a(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xt!==null&&(Ql(xt),xt=null))),Ml(e,t),Me(t),null;case 5:Oi(t);var a=Lr(ua.current);if(r=t.type,e!==null&&t.stateNode!=null)Gm(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(O(166));return Me(t),null}if(e=Lr(Ot.current),$a(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Dt]=t,n[ca]=o,e=(t.mode&1)!==0,r){case"dialog":ge("cancel",n),ge("close",n);break;case"iframe":case"object":case"embed":ge("load",n);break;case"video":case"audio":for(a=0;a<zn.length;a++)ge(zn[a],n);break;case"source":ge("error",n);break;case"img":case"image":case"link":ge("error",n),ge("load",n);break;case"details":ge("toggle",n);break;case"input":Nc(n,o),ge("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ge("invalid",n);break;case"textarea":Sc(n,o),ge("invalid",n)}ml(r,o),a=null;for(var l in o)if(o.hasOwnProperty(l)){var i=o[l];l==="children"?typeof i=="string"?n.textContent!==i&&(o.suppressHydrationWarning!==!0&&Ma(n.textContent,i,e),a=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&Ma(n.textContent,i,e),a=["children",""+i]):Xn.hasOwnProperty(l)&&i!=null&&l==="onScroll"&&ge("scroll",n)}switch(r){case"input":Ia(n),Ec(n,o,!0);break;case"textarea":Ia(n),Cc(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=vo)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Eu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[Dt]=t,e[ca]=n,Qm(e,t,!1,!1),t.stateNode=e;e:{switch(l=fl(r,n),r){case"dialog":ge("cancel",e),ge("close",e),a=n;break;case"iframe":case"object":case"embed":ge("load",e),a=n;break;case"video":case"audio":for(a=0;a<zn.length;a++)ge(zn[a],e);a=n;break;case"source":ge("error",e),a=n;break;case"img":case"image":case"link":ge("error",e),ge("load",e),a=n;break;case"details":ge("toggle",e),a=n;break;case"input":Nc(e,n),a=ll(e,n),ge("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ne({},n,{value:void 0}),ge("invalid",e);break;case"textarea":Sc(e,n),a=dl(e,n),ge("invalid",e);break;default:a=n}ml(r,a),i=a;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?ku(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Su(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ea(e,c):typeof c=="number"&&ea(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Xn.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ge("scroll",e):c!=null&&mi(e,o,c,l))}switch(r){case"input":Ia(e),Ec(e,n,!1);break;case"textarea":Ia(e),Cc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+gr(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?sn(e,!!n.multiple,o,!1):n.defaultValue!=null&&sn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=vo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(e&&t.stateNode!=null)Km(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(O(166));if(r=Lr(ua.current),Lr(Ot.current),$a(t)){if(n=t.stateNode,r=t.memoizedProps,n[Dt]=t,(o=n.nodeValue!==r)&&(e=at,e!==null))switch(e.tag){case 3:Ma(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ma(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Dt]=t,t.stateNode=n}return Me(t),null;case 13:if(ye(we),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&nt!==null&&t.mode&1&&!(t.flags&128))fm(),hn(),t.flags|=98560,o=!1;else if(o=$a(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(O(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(O(317));o[Dt]=t}else hn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),o=!1}else xt!==null&&(Ql(xt),xt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||we.current&1?De===0&&(De=3):Gi())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return yn(),Ml(e,t),e===null&&la(t.stateNode.containerInfo),Me(t),null;case 10:return Ii(t.type._context),Me(t),null;case 17:return Ze(t.type)&&xo(),Me(t),null;case 19:if(ye(we),o=t.memoizedState,o===null)return Me(t),null;if(n=(t.flags&128)!==0,l=o.rendering,l===null)if(n)On(o,!1);else{if(De!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ko(e),l!==null){for(t.flags|=128,On(o,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return he(we,we.current&1|2),t.child}e=e.sibling}o.tail!==null&&ke()>xn&&(t.flags|=128,n=!0,On(o,!1),t.lanes=4194304)}else{if(!n)if(e=ko(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),On(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!ve)return Me(t),null}else 2*ke()-o.renderingStartTime>xn&&r!==1073741824&&(t.flags|=128,n=!0,On(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(r=o.last,r!==null?r.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ke(),t.sibling=null,r=we.current,he(we,n?r&1|2:r&1),t):(Me(t),null);case 22:case 23:return Qi(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?rt&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function v0(e,t){switch(Pi(t),t.tag){case 1:return Ze(t.type)&&xo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yn(),ye(Je),ye(ze),ji(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Oi(t),null;case 13:if(ye(we),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));hn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(we),null;case 4:return yn(),null;case 10:return Ii(t.type._context),null;case 22:case 23:return Qi(),null;case 24:return null;default:return null}}var Ha=!1,$e=!1,x0=typeof WeakSet=="function"?WeakSet:Set,W=null;function nn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ce(e,t,n)}else r.current=null}function $l(e,t,r){try{r()}catch(n){Ce(e,t,n)}}var pd=!1;function w0(e,t){if(El=ho,e=em(),Ci(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var l=0,i=-1,c=-1,m=0,f=0,u=e,h=null;t:for(;;){for(var b;u!==r||a!==0&&u.nodeType!==3||(i=l+a),u!==o||n!==0&&u.nodeType!==3||(c=l+n),u.nodeType===3&&(l+=u.nodeValue.length),(b=u.firstChild)!==null;)h=u,u=b;for(;;){if(u===e)break t;if(h===r&&++m===a&&(i=l),h===o&&++f===n&&(c=l),(b=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=b}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sl={focusedElem:e,selectionRange:r},ho=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,N=y.memoizedState,x=t.stateNode,g=x.getSnapshotBeforeUpdate(t.elementType===t.type?w:yt(t.type,w),N);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(E){Ce(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return y=pd,pd=!1,y}function Kn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&$l(t,r,o)}a=a.next}while(a!==n)}}function Jo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Bl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Ym(e){var t=e.alternate;t!==null&&(e.alternate=null,Ym(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dt],delete t[ca],delete t[Pl],delete t[r0],delete t[n0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jm(e){return e.tag===5||e.tag===3||e.tag===4}function hd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=vo));else if(n!==4&&(e=e.child,e!==null))for(zl(e,t,r),e=e.sibling;e!==null;)zl(e,t,r),e=e.sibling}function Hl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Hl(e,t,r),e=e.sibling;e!==null;)Hl(e,t,r),e=e.sibling}var Oe=null,vt=!1;function Zt(e,t,r){for(r=r.child;r!==null;)Zm(e,t,r),r=r.sibling}function Zm(e,t,r){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Ho,r)}catch{}switch(r.tag){case 5:$e||nn(r,t);case 6:var n=Oe,a=vt;Oe=null,Zt(e,t,r),Oe=n,vt=a,Oe!==null&&(vt?(e=Oe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Oe.removeChild(r.stateNode));break;case 18:Oe!==null&&(vt?(e=Oe,r=r.stateNode,e.nodeType===8?Os(e.parentNode,r):e.nodeType===1&&Os(e,r),aa(e)):Os(Oe,r.stateNode));break;case 4:n=Oe,a=vt,Oe=r.stateNode.containerInfo,vt=!0,Zt(e,t,r),Oe=n,vt=a;break;case 0:case 11:case 14:case 15:if(!$e&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var o=a,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&$l(r,t,l),a=a.next}while(a!==n)}Zt(e,t,r);break;case 1:if(!$e&&(nn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){Ce(r,t,i)}Zt(e,t,r);break;case 21:Zt(e,t,r);break;case 22:r.mode&1?($e=(n=$e)||r.memoizedState!==null,Zt(e,t,r),$e=n):Zt(e,t,r);break;default:Zt(e,t,r)}}function gd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new x0),t.forEach(function(n){var a=L0.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function gt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var o=e,l=t,i=l;e:for(;i!==null;){switch(i.tag){case 5:Oe=i.stateNode,vt=!1;break e;case 3:Oe=i.stateNode.containerInfo,vt=!0;break e;case 4:Oe=i.stateNode.containerInfo,vt=!0;break e}i=i.return}if(Oe===null)throw Error(O(160));Zm(o,l,a),Oe=null,vt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(m){Ce(a,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Xm(t,e),t=t.sibling}function Xm(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gt(t,e),Rt(e),n&4){try{Kn(3,e,e.return),Jo(3,e)}catch(w){Ce(e,e.return,w)}try{Kn(5,e,e.return)}catch(w){Ce(e,e.return,w)}}break;case 1:gt(t,e),Rt(e),n&512&&r!==null&&nn(r,r.return);break;case 5:if(gt(t,e),Rt(e),n&512&&r!==null&&nn(r,r.return),e.flags&32){var a=e.stateNode;try{ea(a,"")}catch(w){Ce(e,e.return,w)}}if(n&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,l=r!==null?r.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&bu(a,o),fl(i,l);var m=fl(i,o);for(l=0;l<c.length;l+=2){var f=c[l],u=c[l+1];f==="style"?ku(a,u):f==="dangerouslySetInnerHTML"?Su(a,u):f==="children"?ea(a,u):mi(a,f,u,m)}switch(i){case"input":il(a,o);break;case"textarea":Nu(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var b=o.value;b!=null?sn(a,!!o.multiple,b,!1):h!==!!o.multiple&&(o.defaultValue!=null?sn(a,!!o.multiple,o.defaultValue,!0):sn(a,!!o.multiple,o.multiple?[]:"",!1))}a[ca]=o}catch(w){Ce(e,e.return,w)}}break;case 6:if(gt(t,e),Rt(e),n&4){if(e.stateNode===null)throw Error(O(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(w){Ce(e,e.return,w)}}break;case 3:if(gt(t,e),Rt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{aa(t.containerInfo)}catch(w){Ce(e,e.return,w)}break;case 4:gt(t,e),Rt(e);break;case 13:gt(t,e),Rt(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(Wi=ke())),n&4&&gd(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?($e=(m=$e)||f,gt(t,e),$e=m):gt(t,e),Rt(e),n&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!f&&e.mode&1)for(W=e,f=e.child;f!==null;){for(u=W=f;W!==null;){switch(h=W,b=h.child,h.tag){case 0:case 11:case 14:case 15:Kn(4,h,h.return);break;case 1:nn(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){Ce(n,r,w)}}break;case 5:nn(h,h.return);break;case 22:if(h.memoizedState!==null){vd(u);continue}}b!==null?(b.return=h,W=b):vd(u)}f=f.sibling}e:for(f=null,u=e;;){if(u.tag===5){if(f===null){f=u;try{a=u.stateNode,m?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=u.stateNode,c=u.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=Cu("display",l))}catch(w){Ce(e,e.return,w)}}}else if(u.tag===6){if(f===null)try{u.stateNode.nodeValue=m?"":u.memoizedProps}catch(w){Ce(e,e.return,w)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:gt(t,e),Rt(e),n&4&&gd(e);break;case 21:break;default:gt(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Jm(r)){var n=r;break e}r=r.return}throw Error(O(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ea(a,""),n.flags&=-33);var o=hd(e);Hl(e,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,i=hd(e);zl(e,i,l);break;default:throw Error(O(161))}}catch(c){Ce(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function b0(e,t,r){W=e,ef(e)}function ef(e,t,r){for(var n=(e.mode&1)!==0;W!==null;){var a=W,o=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||Ha;if(!l){var i=a.alternate,c=i!==null&&i.memoizedState!==null||$e;i=Ha;var m=$e;if(Ha=l,($e=c)&&!m)for(W=a;W!==null;)l=W,c=l.child,l.tag===22&&l.memoizedState!==null?xd(a):c!==null?(c.return=l,W=c):xd(a);for(;o!==null;)W=o,ef(o),o=o.sibling;W=a,Ha=i,$e=m}yd(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,W=o):yd(e)}}function yd(e){for(;W!==null;){var t=W;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$e||Jo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!$e)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:yt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&td(t,o,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}td(t,l,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var f=m.memoizedState;if(f!==null){var u=f.dehydrated;u!==null&&aa(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}$e||t.flags&512&&Bl(t)}catch(h){Ce(t,t.return,h)}}if(t===e){W=null;break}if(r=t.sibling,r!==null){r.return=t.return,W=r;break}W=t.return}}function vd(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var r=t.sibling;if(r!==null){r.return=t.return,W=r;break}W=t.return}}function xd(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Jo(4,t)}catch(c){Ce(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ce(t,a,c)}}var o=t.return;try{Bl(t)}catch(c){Ce(t,o,c)}break;case 5:var l=t.return;try{Bl(t)}catch(c){Ce(t,l,c)}}}catch(c){Ce(t,t.return,c)}if(t===e){W=null;break}var i=t.sibling;if(i!==null){i.return=t.return,W=i;break}W=t.return}}var N0=Math.ceil,Lo=Kt.ReactCurrentDispatcher,Hi=Kt.ReactCurrentOwner,ft=Kt.ReactCurrentBatchConfig,ie=0,Ae=null,Le=null,je=0,rt=0,an=xr(0),De=0,ha=null,Ur=0,Zo=0,Vi=0,Yn=null,Ke=null,Wi=0,xn=1/0,Mt=null,To=!1,Vl=null,mr=null,Va=!1,ar=null,Io=0,Jn=0,Wl=null,ro=-1,no=0;function Ve(){return ie&6?ke():ro!==-1?ro:ro=ke()}function fr(e){return e.mode&1?ie&2&&je!==0?je&-je:o0.transition!==null?(no===0&&(no=Fu()),no):(e=me,e!==0||(e=window.event,e=e===void 0?16:Wu(e.type)),e):1}function bt(e,t,r,n){if(50<Jn)throw Jn=0,Wl=null,Error(O(185));Na(e,r,n),(!(ie&2)||e!==Ae)&&(e===Ae&&(!(ie&2)&&(Zo|=r),De===4&&rr(e,je)),Xe(e,n),r===1&&ie===0&&!(t.mode&1)&&(xn=ke()+500,Go&&wr()))}function Xe(e,t){var r=e.callbackNode;oh(e,t);var n=po(e,e===Ae?je:0);if(n===0)r!==null&&Rc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Rc(r),t===1)e.tag===0?a0(wd.bind(null,e)):dm(wd.bind(null,e)),e0(function(){!(ie&6)&&wr()}),r=null;else{switch(Mu(n)){case 1:r=yi;break;case 4:r=ju;break;case 16:r=fo;break;case 536870912:r=Uu;break;default:r=fo}r=cf(r,tf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function tf(e,t){if(ro=-1,no=0,ie&6)throw Error(O(327));var r=e.callbackNode;if(mn()&&e.callbackNode!==r)return null;var n=po(e,e===Ae?je:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Do(e,n);else{t=n;var a=ie;ie|=2;var o=nf();(Ae!==e||je!==t)&&(Mt=null,xn=ke()+500,Ir(e,t));do try{C0();break}catch(i){rf(e,i)}while(1);Ti(),Lo.current=o,ie=a,Le!==null?t=0:(Ae=null,je=0,t=De)}if(t!==0){if(t===2&&(a=vl(e),a!==0&&(n=a,t=ql(e,a))),t===1)throw r=ha,Ir(e,0),rr(e,n),Xe(e,ke()),r;if(t===6)rr(e,n);else{if(a=e.current.alternate,!(n&30)&&!E0(a)&&(t=Do(e,n),t===2&&(o=vl(e),o!==0&&(n=o,t=ql(e,o))),t===1))throw r=ha,Ir(e,0),rr(e,n),Xe(e,ke()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(O(345));case 2:kr(e,Ke,Mt);break;case 3:if(rr(e,n),(n&130023424)===n&&(t=Wi+500-ke(),10<t)){if(po(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ve(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=kl(kr.bind(null,e,Ke,Mt),t);break}kr(e,Ke,Mt);break;case 4:if(rr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-wt(n);o=1<<l,l=t[l],l>a&&(a=l),n&=~o}if(n=a,n=ke()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*N0(n/1960))-n,10<n){e.timeoutHandle=kl(kr.bind(null,e,Ke,Mt),n);break}kr(e,Ke,Mt);break;case 5:kr(e,Ke,Mt);break;default:throw Error(O(329))}}}return Xe(e,ke()),e.callbackNode===r?tf.bind(null,e):null}function ql(e,t){var r=Yn;return e.current.memoizedState.isDehydrated&&(Ir(e,t).flags|=256),e=Do(e,t),e!==2&&(t=Ke,Ke=r,t!==null&&Ql(t)),e}function Ql(e){Ke===null?Ke=e:Ke.push.apply(Ke,e)}function E0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],o=a.getSnapshot;a=a.value;try{if(!St(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rr(e,t){for(t&=~Vi,t&=~Zo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wt(t),n=1<<r;e[r]=-1,t&=~n}}function wd(e){if(ie&6)throw Error(O(327));mn();var t=po(e,0);if(!(t&1))return Xe(e,ke()),null;var r=Do(e,t);if(e.tag!==0&&r===2){var n=vl(e);n!==0&&(t=n,r=ql(e,n))}if(r===1)throw r=ha,Ir(e,0),rr(e,t),Xe(e,ke()),r;if(r===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kr(e,Ke,Mt),Xe(e,ke()),null}function qi(e,t){var r=ie;ie|=1;try{return e(t)}finally{ie=r,ie===0&&(xn=ke()+500,Go&&wr())}}function Fr(e){ar!==null&&ar.tag===0&&!(ie&6)&&mn();var t=ie;ie|=1;var r=ft.transition,n=me;try{if(ft.transition=null,me=1,e)return e()}finally{me=n,ft.transition=r,ie=t,!(ie&6)&&wr()}}function Qi(){rt=an.current,ye(an)}function Ir(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Xh(r)),Le!==null)for(r=Le.return;r!==null;){var n=r;switch(Pi(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&xo();break;case 3:yn(),ye(Je),ye(ze),ji();break;case 5:Oi(n);break;case 4:yn();break;case 13:ye(we);break;case 19:ye(we);break;case 10:Ii(n.type._context);break;case 22:case 23:Qi()}r=r.return}if(Ae=e,Le=e=pr(e.current,null),je=rt=t,De=0,ha=null,Vi=Zo=Ur=0,Ke=Yn=null,Rr!==null){for(t=0;t<Rr.length;t++)if(r=Rr[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,o=r.pending;if(o!==null){var l=o.next;o.next=a,n.next=l}r.pending=n}Rr=null}return e}function rf(e,t){do{var r=Le;try{if(Ti(),Xa.current=Ro,Po){for(var n=be.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Po=!1}if(jr=0,_e=Ie=be=null,Gn=!1,ma=0,Hi.current=null,r===null||r.return===null){De=1,ha=t,Le=null;break}e:{var o=e,l=r.return,i=r,c=t;if(t=je,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=c,f=i,u=f.tag;if(!(f.mode&1)&&(u===0||u===11||u===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var b=ld(l);if(b!==null){b.flags&=-257,id(b,l,i,o,t),b.mode&1&&sd(o,m,t),t=b,c=m;var y=t.updateQueue;if(y===null){var w=new Set;w.add(c),t.updateQueue=w}else y.add(c);break e}else{if(!(t&1)){sd(o,m,t),Gi();break e}c=Error(O(426))}}else if(ve&&i.mode&1){var N=ld(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),id(N,l,i,o,t),Ri(vn(c,i));break e}}o=c=vn(c,i),De!==4&&(De=2),Yn===null?Yn=[o]:Yn.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=Mm(o,c,t);ed(o,x);break e;case 1:i=c;var g=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(mr===null||!mr.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var E=$m(o,i,t);ed(o,E);break e}}o=o.return}while(o!==null)}of(r)}catch(P){t=P,Le===r&&r!==null&&(Le=r=r.return);continue}break}while(1)}function nf(){var e=Lo.current;return Lo.current=Ro,e===null?Ro:e}function Gi(){(De===0||De===3||De===2)&&(De=4),Ae===null||!(Ur&268435455)&&!(Zo&268435455)||rr(Ae,je)}function Do(e,t){var r=ie;ie|=2;var n=nf();(Ae!==e||je!==t)&&(Mt=null,Ir(e,t));do try{S0();break}catch(a){rf(e,a)}while(1);if(Ti(),ie=r,Lo.current=n,Le!==null)throw Error(O(261));return Ae=null,je=0,De}function S0(){for(;Le!==null;)af(Le)}function C0(){for(;Le!==null&&!Yp();)af(Le)}function af(e){var t=lf(e.alternate,e,rt);e.memoizedProps=e.pendingProps,t===null?of(e):Le=t,Hi.current=null}function of(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=v0(r,t),r!==null){r.flags&=32767,Le=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{De=6,Le=null;return}}else if(r=y0(r,t,rt),r!==null){Le=r;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);De===0&&(De=5)}function kr(e,t,r){var n=me,a=ft.transition;try{ft.transition=null,me=1,k0(e,t,r,n)}finally{ft.transition=a,me=n}return null}function k0(e,t,r,n){do mn();while(ar!==null);if(ie&6)throw Error(O(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(sh(e,o),e===Ae&&(Le=Ae=null,je=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Va||(Va=!0,cf(fo,function(){return mn(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=ft.transition,ft.transition=null;var l=me;me=1;var i=ie;ie|=4,Hi.current=null,w0(e,r),Xm(r,e),qh(Sl),ho=!!El,Sl=El=null,e.current=r,b0(r),Jp(),ie=i,me=l,ft.transition=o}else e.current=r;if(Va&&(Va=!1,ar=e,Io=a),o=e.pendingLanes,o===0&&(mr=null),eh(r.stateNode),Xe(e,ke()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(To)throw To=!1,e=Vl,Vl=null,e;return Io&1&&e.tag!==0&&mn(),o=e.pendingLanes,o&1?e===Wl?Jn++:(Jn=0,Wl=e):Jn=0,wr(),null}function mn(){if(ar!==null){var e=Mu(Io),t=ft.transition,r=me;try{if(ft.transition=null,me=16>e?16:e,ar===null)var n=!1;else{if(e=ar,ar=null,Io=0,ie&6)throw Error(O(331));var a=ie;for(ie|=4,W=e.current;W!==null;){var o=W,l=o.child;if(W.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var m=i[c];for(W=m;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:Kn(8,f,o)}var u=f.child;if(u!==null)u.return=f,W=u;else for(;W!==null;){f=W;var h=f.sibling,b=f.return;if(Ym(f),f===m){W=null;break}if(h!==null){h.return=b,W=h;break}W=b}}}var y=o.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var N=w.sibling;w.sibling=null,w=N}while(w!==null)}}W=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,W=l;else e:for(;W!==null;){if(o=W,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Kn(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,W=x;break e}W=o.return}}var g=e.current;for(W=g;W!==null;){l=W;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,W=v;else e:for(l=g;W!==null;){if(i=W,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Jo(9,i)}}catch(P){Ce(i,i.return,P)}if(i===l){W=null;break e}var E=i.sibling;if(E!==null){E.return=i.return,W=E;break e}W=i.return}}if(ie=a,wr(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Ho,e)}catch{}n=!0}return n}finally{me=r,ft.transition=t}}return!1}function bd(e,t,r){t=vn(r,t),t=Mm(e,t,1),e=ur(e,t,1),t=Ve(),e!==null&&(Na(e,1,t),Xe(e,t))}function Ce(e,t,r){if(e.tag===3)bd(e,e,r);else for(;t!==null;){if(t.tag===3){bd(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(mr===null||!mr.has(n))){e=vn(r,e),e=$m(t,e,1),t=ur(t,e,1),e=Ve(),t!==null&&(Na(t,1,e),Xe(t,e));break}}t=t.return}}function P0(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ve(),e.pingedLanes|=e.suspendedLanes&r,Ae===e&&(je&r)===r&&(De===4||De===3&&(je&130023424)===je&&500>ke()-Wi?Ir(e,0):Vi|=r),Xe(e,t)}function sf(e,t){t===0&&(e.mode&1?(t=Aa,Aa<<=1,!(Aa&130023424)&&(Aa=4194304)):t=1);var r=Ve();e=qt(e,t),e!==null&&(Na(e,t,r),Xe(e,r))}function R0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),sf(e,r)}function L0(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(O(314))}n!==null&&n.delete(t),sf(e,r)}var lf;lf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Je.current)Ye=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ye=!1,g0(e,t,r);Ye=!!(e.flags&131072)}else Ye=!1,ve&&t.flags&1048576&&um(t,No,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;to(e,t),e=t.pendingProps;var a=pn(t,ze.current);un(t,r),a=Fi(null,t,n,e,a,r);var o=Mi();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ze(n)?(o=!0,wo(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,_i(t),a.updater=Yo,t.stateNode=a,a._reactInternals=t,_l(t,n,e,r),t=jl(null,t,n,!0,o,r)):(t.tag=0,ve&&o&&ki(t),He(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(to(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=I0(n),e=yt(n,e),a){case 0:t=Ol(null,t,n,e,r);break e;case 1:t=ud(null,t,n,e,r);break e;case 11:t=cd(null,t,n,e,r);break e;case 14:t=dd(null,t,n,yt(n.type,e),r);break e}throw Error(O(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:yt(n,a),Ol(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:yt(n,a),ud(e,t,n,a,r);case 3:e:{if(Vm(t),e===null)throw Error(O(387));n=t.pendingProps,o=t.memoizedState,a=o.element,ym(e,t),Co(t,n,null,r);var l=t.memoizedState;if(n=l.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=vn(Error(O(423)),t),t=md(e,t,n,r,a);break e}else if(n!==a){a=vn(Error(O(424)),t),t=md(e,t,n,r,a);break e}else for(nt=dr(t.stateNode.containerInfo.firstChild),at=t,ve=!0,xt=null,r=hm(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hn(),n===a){t=Qt(e,t,r);break e}He(e,t,n,r)}t=t.child}return t;case 5:return vm(t),e===null&&Tl(t),n=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,l=a.children,Cl(n,a)?l=null:o!==null&&Cl(n,o)&&(t.flags|=32),Hm(e,t),He(e,t,l,r),t.child;case 6:return e===null&&Tl(t),null;case 13:return Wm(e,t,r);case 4:return Ai(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=gn(t,null,n,r):He(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:yt(n,a),cd(e,t,n,a,r);case 7:return He(e,t,t.pendingProps,r),t.child;case 8:return He(e,t,t.pendingProps.children,r),t.child;case 12:return He(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,o=t.memoizedProps,l=a.value,he(Eo,n._currentValue),n._currentValue=l,o!==null)if(St(o.value,l)){if(o.children===a.children&&!Je.current){t=Qt(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){l=o.child;for(var c=i.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=Ht(-1,r&-r),c.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var f=m.pending;f===null?c.next=c:(c.next=f.next,f.next=c),m.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Il(o.return,r,t),i.lanes|=r;break}c=c.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(O(341));l.lanes|=r,i=l.alternate,i!==null&&(i.lanes|=r),Il(l,r,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}He(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,un(t,r),a=pt(a),n=n(a),t.flags|=1,He(e,t,n,r),t.child;case 14:return n=t.type,a=yt(n,t.pendingProps),a=yt(n.type,a),dd(e,t,n,a,r);case 15:return Bm(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:yt(n,a),to(e,t),t.tag=1,Ze(n)?(e=!0,wo(t)):e=!1,un(t,r),Fm(t,n,a),_l(t,n,a,r),jl(null,t,n,!0,e,r);case 19:return qm(e,t,r);case 22:return zm(e,t,r)}throw Error(O(156,t.tag))};function cf(e,t){return Ou(e,t)}function T0(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mt(e,t,r,n){return new T0(e,t,r,n)}function Ki(e){return e=e.prototype,!(!e||!e.isReactComponent)}function I0(e){if(typeof e=="function")return Ki(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pi)return 11;if(e===hi)return 14}return 2}function pr(e,t){var r=e.alternate;return r===null?(r=mt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ao(e,t,r,n,a,o){var l=2;if(n=e,typeof e=="function")Ki(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Gr:return Dr(r.children,a,o,t);case fi:l=8,a|=8;break;case nl:return e=mt(12,r,t,a|2),e.elementType=nl,e.lanes=o,e;case al:return e=mt(13,r,t,a),e.elementType=al,e.lanes=o,e;case ol:return e=mt(19,r,t,a),e.elementType=ol,e.lanes=o,e;case vu:return Xo(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gu:l=10;break e;case yu:l=9;break e;case pi:l=11;break e;case hi:l=14;break e;case Xt:l=16,n=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=mt(l,r,t,a),t.elementType=e,t.type=n,t.lanes=o,t}function Dr(e,t,r,n){return e=mt(7,e,n,t),e.lanes=r,e}function Xo(e,t,r,n){return e=mt(22,e,n,t),e.elementType=vu,e.lanes=r,e.stateNode={isHidden:!1},e}function Hs(e,t,r){return e=mt(6,e,null,t),e.lanes=r,e}function Vs(e,t,r){return t=mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function D0(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ss(0),this.expirationTimes=Ss(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ss(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Yi(e,t,r,n,a,o,l,i,c){return e=new D0(e,t,r,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=mt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_i(o),e}function _0(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function df(e){if(!e)return yr;e=e._reactInternals;e:{if(Br(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ze(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var r=e.type;if(Ze(r))return cm(e,r,t)}return t}function uf(e,t,r,n,a,o,l,i,c){return e=Yi(r,n,!0,e,a,o,l,i,c),e.context=df(null),r=e.current,n=Ve(),a=fr(r),o=Ht(n,a),o.callback=t??null,ur(r,o,a),e.current.lanes=a,Na(e,a,n),Xe(e,n),e}function es(e,t,r,n){var a=t.current,o=Ve(),l=fr(a);return r=df(r),t.context===null?t.context=r:t.pendingContext=r,t=Ht(o,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ur(a,t,l),e!==null&&(bt(e,a,l,o),Za(e,a,l)),l}function _o(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ji(e,t){Nd(e,t),(e=e.alternate)&&Nd(e,t)}function A0(){return null}var mf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zi(e){this._internalRoot=e}ts.prototype.render=Zi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));es(e,t,null,null)};ts.prototype.unmount=Zi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fr(function(){es(null,e,null,null)}),t[Wt]=null}};function ts(e){this._internalRoot=e}ts.prototype.unstable_scheduleHydration=function(e){if(e){var t=zu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<tr.length&&t!==0&&t<tr[r].priority;r++);tr.splice(r,0,e),r===0&&Vu(e)}};function Xi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ed(){}function O0(e,t,r,n,a){if(a){if(typeof n=="function"){var o=n;n=function(){var m=_o(l);o.call(m)}}var l=uf(t,n,e,0,null,!1,!1,"",Ed);return e._reactRootContainer=l,e[Wt]=l.current,la(e.nodeType===8?e.parentNode:e),Fr(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var i=n;n=function(){var m=_o(c);i.call(m)}}var c=Yi(e,0,!1,null,null,!1,!1,"",Ed);return e._reactRootContainer=c,e[Wt]=c.current,la(e.nodeType===8?e.parentNode:e),Fr(function(){es(t,c,r,n)}),c}function ns(e,t,r,n,a){var o=r._reactRootContainer;if(o){var l=o;if(typeof a=="function"){var i=a;a=function(){var c=_o(l);i.call(c)}}es(t,l,e,a)}else l=O0(r,t,e,a,n);return _o(l)}$u=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Bn(t.pendingLanes);r!==0&&(vi(t,r|1),Xe(t,ke()),!(ie&6)&&(xn=ke()+500,wr()))}break;case 13:Fr(function(){var n=qt(e,1);if(n!==null){var a=Ve();bt(n,e,1,a)}}),Ji(e,1)}};xi=function(e){if(e.tag===13){var t=qt(e,134217728);if(t!==null){var r=Ve();bt(t,e,134217728,r)}Ji(e,134217728)}};Bu=function(e){if(e.tag===13){var t=fr(e),r=qt(e,t);if(r!==null){var n=Ve();bt(r,e,t,n)}Ji(e,t)}};zu=function(){return me};Hu=function(e,t){var r=me;try{return me=e,t()}finally{me=r}};hl=function(e,t,r){switch(t){case"input":if(il(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Qo(n);if(!a)throw Error(O(90));wu(n),il(n,a)}}}break;case"textarea":Nu(e,r);break;case"select":t=r.value,t!=null&&sn(e,!!r.multiple,t,!1)}};Lu=qi;Tu=Fr;var j0={usingClientEntryPoint:!1,Events:[Sa,Zr,Qo,Pu,Ru,qi]},jn={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},U0={bundleType:jn.bundleType,version:jn.version,rendererPackageName:jn.rendererPackageName,rendererConfig:jn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_u(e),e===null?null:e.stateNode},findFiberByHostInstance:jn.findFiberByHostInstance||A0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wa.isDisabled&&Wa.supportsFiber)try{Ho=Wa.inject(U0),At=Wa}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j0;st.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xi(t))throw Error(O(200));return _0(e,t,null,r)};st.createRoot=function(e,t){if(!Xi(e))throw Error(O(299));var r=!1,n="",a=mf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Yi(e,1,!1,null,null,r,!1,n,a),e[Wt]=t.current,la(e.nodeType===8?e.parentNode:e),new Zi(t)};st.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=_u(t),e=e===null?null:e.stateNode,e};st.flushSync=function(e){return Fr(e)};st.hydrate=function(e,t,r){if(!rs(t))throw Error(O(200));return ns(null,e,t,!0,r)};st.hydrateRoot=function(e,t,r){if(!Xi(e))throw Error(O(405));var n=r!=null&&r.hydratedSources||null,a=!1,o="",l=mf;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=uf(t,null,e,1,r??null,a,!1,o,l),e[Wt]=t.current,la(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new ts(t)};st.render=function(e,t,r){if(!rs(t))throw Error(O(200));return ns(null,e,t,!1,r)};st.unmountComponentAtNode=function(e){if(!rs(e))throw Error(O(40));return e._reactRootContainer?(Fr(function(){ns(null,null,e,!1,function(){e._reactRootContainer=null,e[Wt]=null})}),!0):!1};st.unstable_batchedUpdates=qi;st.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!rs(r))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return ns(e,t,r,!1,n)};st.version="18.3.1-next-f1338f8080-20240426";function ff(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ff)}catch(e){console.error(e)}}ff(),mu.exports=st;var F0=mu.exports,Sd=F0;tl.createRoot=Sd.createRoot,tl.hydrateRoot=Sd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ga(){return ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ga.apply(this,arguments)}var or;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(or||(or={}));const Cd="popstate";function M0(e){e===void 0&&(e={});function t(n,a){let{pathname:o,search:l,hash:i}=n.location;return Gl("",{pathname:o,search:l,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Ao(a)}return B0(t,r,null,e)}function Pe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pf(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $0(){return Math.random().toString(36).substr(2,8)}function kd(e,t){return{usr:e.state,key:e.key,idx:t}}function Gl(e,t,r,n){return r===void 0&&(r=null),ga({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Sn(t):t,{state:r,key:t&&t.key||n||$0()})}function Ao(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Sn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function B0(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:o=!1}=n,l=a.history,i=or.Pop,c=null,m=f();m==null&&(m=0,l.replaceState(ga({},l.state,{idx:m}),""));function f(){return(l.state||{idx:null}).idx}function u(){i=or.Pop;let N=f(),x=N==null?null:N-m;m=N,c&&c({action:i,location:w.location,delta:x})}function h(N,x){i=or.Push;let g=Gl(w.location,N,x);r&&r(g,N),m=f()+1;let v=kd(g,m),E=w.createHref(g);try{l.pushState(v,"",E)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(E)}o&&c&&c({action:i,location:w.location,delta:1})}function b(N,x){i=or.Replace;let g=Gl(w.location,N,x);r&&r(g,N),m=f();let v=kd(g,m),E=w.createHref(g);l.replaceState(v,"",E),o&&c&&c({action:i,location:w.location,delta:0})}function y(N){let x=a.location.origin!=="null"?a.location.origin:a.location.href,g=typeof N=="string"?N:Ao(N);return g=g.replace(/ $/,"%20"),Pe(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let w={get action(){return i},get location(){return e(a,l)},listen(N){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Cd,u),c=N,()=>{a.removeEventListener(Cd,u),c=null}},createHref(N){return t(a,N)},createURL:y,encodeLocation(N){let x=y(N);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:b,go(N){return l.go(N)}};return w}var Pd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Pd||(Pd={}));function z0(e,t,r){return r===void 0&&(r="/"),H0(e,t,r,!1)}function H0(e,t,r,n){let a=typeof t=="string"?Sn(t):t,o=ec(a.pathname||"/",r);if(o==null)return null;let l=hf(e);V0(l);let i=null;for(let c=0;i==null&&c<l.length;++c){let m=tg(o);i=X0(l[c],m,n)}return i}function hf(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(o,l,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(Pe(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let m=hr([n,c.relativePath]),f=r.concat(c);o.children&&o.children.length>0&&(Pe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),hf(o.children,t,f,m)),!(o.path==null&&!o.index)&&t.push({path:m,score:J0(m,o.index),routesMeta:f})};return e.forEach((o,l)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))a(o,l);else for(let c of gf(o.path))a(o,l,c)}),t}function gf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let l=gf(n.join("/")),i=[];return i.push(...l.map(c=>c===""?o:[o,c].join("/"))),a&&i.push(...l),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function V0(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Z0(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const W0=/^:[\w-]+$/,q0=3,Q0=2,G0=1,K0=10,Y0=-2,Rd=e=>e==="*";function J0(e,t){let r=e.split("/"),n=r.length;return r.some(Rd)&&(n+=Y0),t&&(n+=Q0),r.filter(a=>!Rd(a)).reduce((a,o)=>a+(W0.test(o)?q0:o===""?G0:K0),n)}function Z0(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function X0(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,a={},o="/",l=[];for(let i=0;i<n.length;++i){let c=n[i],m=i===n.length-1,f=o==="/"?t:t.slice(o.length)||"/",u=Ld({path:c.relativePath,caseSensitive:c.caseSensitive,end:m},f),h=c.route;if(!u&&m&&r&&!n[n.length-1].route.index&&(u=Ld({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!u)return null;Object.assign(a,u.params),l.push({params:a,pathname:hr([o,u.pathname]),pathnameBase:og(hr([o,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(o=hr([o,u.pathnameBase]))}return l}function Ld(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=eg(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:n.reduce((m,f,u)=>{let{paramName:h,isOptional:b}=f;if(h==="*"){let w=i[u]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const y=i[u];return b&&!y?m[h]=void 0:m[h]=(y||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:l,pattern:e}}function eg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),pf(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,i,c)=>(n.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function tg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return pf(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ec(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function rg(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Sn(e):e;return{pathname:r?r.startsWith("/")?r:ng(r,t):t,search:sg(n),hash:lg(a)}}function ng(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ws(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ag(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function tc(e,t){let r=ag(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function rc(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Sn(e):(a=ga({},e),Pe(!a.pathname||!a.pathname.includes("?"),Ws("?","pathname","search",a)),Pe(!a.pathname||!a.pathname.includes("#"),Ws("#","pathname","hash",a)),Pe(!a.search||!a.search.includes("#"),Ws("#","search","hash",a)));let o=e===""||a.pathname==="",l=o?"/":a.pathname,i;if(l==null)i=r;else{let u=t.length-1;if(!n&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),u-=1;a.pathname=h.join("/")}i=u>=0?t[u]:"/"}let c=rg(a,i),m=l&&l!=="/"&&l.endsWith("/"),f=(o||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(m||f)&&(c.pathname+="/"),c}const hr=e=>e.join("/").replace(/\/\/+/g,"/"),og=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),sg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,lg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ig(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const yf=["post","put","patch","delete"];new Set(yf);const cg=["get",...yf];new Set(cg);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ya(){return ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ya.apply(this,arguments)}const nc=p.createContext(null),dg=p.createContext(null),br=p.createContext(null),as=p.createContext(null),Yt=p.createContext({outlet:null,matches:[],isDataRoute:!1}),vf=p.createContext(null);function ug(e,t){let{relative:r}=t===void 0?{}:t;Cn()||Pe(!1);let{basename:n,navigator:a}=p.useContext(br),{hash:o,pathname:l,search:i}=wf(e,{relative:r}),c=l;return n!=="/"&&(c=l==="/"?n:hr([n,l])),a.createHref({pathname:c,search:i,hash:o})}function Cn(){return p.useContext(as)!=null}function zr(){return Cn()||Pe(!1),p.useContext(as).location}function xf(e){p.useContext(br).static||p.useLayoutEffect(e)}function os(){let{isDataRoute:e}=p.useContext(Yt);return e?kg():mg()}function mg(){Cn()||Pe(!1);let e=p.useContext(nc),{basename:t,future:r,navigator:n}=p.useContext(br),{matches:a}=p.useContext(Yt),{pathname:o}=zr(),l=JSON.stringify(tc(a,r.v7_relativeSplatPath)),i=p.useRef(!1);return xf(()=>{i.current=!0}),p.useCallback(function(m,f){if(f===void 0&&(f={}),!i.current)return;if(typeof m=="number"){n.go(m);return}let u=rc(m,JSON.parse(l),o,f.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:hr([t,u.pathname])),(f.replace?n.replace:n.push)(u,f.state,f)},[t,n,l,o,e])}const fg=p.createContext(null);function pg(e){let t=p.useContext(Yt).outlet;return t&&p.createElement(fg.Provider,{value:e},t)}function wf(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=p.useContext(br),{matches:a}=p.useContext(Yt),{pathname:o}=zr(),l=JSON.stringify(tc(a,n.v7_relativeSplatPath));return p.useMemo(()=>rc(e,JSON.parse(l),o,r==="path"),[e,l,o,r])}function hg(e,t){return gg(e,t)}function gg(e,t,r,n){Cn()||Pe(!1);let{navigator:a}=p.useContext(br),{matches:o}=p.useContext(Yt),l=o[o.length-1],i=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let m=zr(),f;if(t){var u;let N=typeof t=="string"?Sn(t):t;c==="/"||(u=N.pathname)!=null&&u.startsWith(c)||Pe(!1),f=N}else f=m;let h=f.pathname||"/",b=h;if(c!=="/"){let N=c.replace(/^\//,"").split("/");b="/"+h.replace(/^\//,"").split("/").slice(N.length).join("/")}let y=z0(e,{pathname:b}),w=bg(y&&y.map(N=>Object.assign({},N,{params:Object.assign({},i,N.params),pathname:hr([c,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:hr([c,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,r,n);return t&&w?p.createElement(as.Provider,{value:{location:ya({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:or.Pop}},w):w}function yg(){let e=Cg(),t=ig(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:a},r):null,o)}const vg=p.createElement(yg,null);class xg extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(Yt.Provider,{value:this.props.routeContext},p.createElement(vf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wg(e){let{routeContext:t,match:r,children:n}=e,a=p.useContext(nc);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Yt.Provider,{value:t},n)}function bg(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,i=(a=r)==null?void 0:a.errors;if(i!=null){let f=l.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);f>=0||Pe(!1),l=l.slice(0,Math.min(l.length,f+1))}let c=!1,m=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<l.length;f++){let u=l[f];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(m=f),u.route.id){let{loaderData:h,errors:b}=r,y=u.route.loader&&h[u.route.id]===void 0&&(!b||b[u.route.id]===void 0);if(u.route.lazy||y){c=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((f,u,h)=>{let b,y=!1,w=null,N=null;r&&(b=i&&u.route.id?i[u.route.id]:void 0,w=u.route.errorElement||vg,c&&(m<0&&h===0?(Pg("route-fallback",!1),y=!0,N=null):m===h&&(y=!0,N=u.route.hydrateFallbackElement||null)));let x=t.concat(l.slice(0,h+1)),g=()=>{let v;return b?v=w:y?v=N:u.route.Component?v=p.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=f,p.createElement(wg,{match:u,routeContext:{outlet:f,matches:x,isDataRoute:r!=null},children:v})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?p.createElement(xg,{location:r.location,revalidation:r.revalidation,component:w,error:b,children:g(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):g()},null)}var bf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(bf||{}),Oo=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Oo||{});function Ng(e){let t=p.useContext(nc);return t||Pe(!1),t}function Eg(e){let t=p.useContext(dg);return t||Pe(!1),t}function Sg(e){let t=p.useContext(Yt);return t||Pe(!1),t}function Nf(e){let t=Sg(),r=t.matches[t.matches.length-1];return r.route.id||Pe(!1),r.route.id}function Cg(){var e;let t=p.useContext(vf),r=Eg(Oo.UseRouteError),n=Nf(Oo.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function kg(){let{router:e}=Ng(bf.UseNavigateStable),t=Nf(Oo.UseNavigateStable),r=p.useRef(!1);return xf(()=>{r.current=!0}),p.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ya({fromRouteId:t},o)))},[e,t])}const Td={};function Pg(e,t,r){!t&&!Td[e]&&(Td[e]=!0)}function Rg(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Zn(e){let{to:t,replace:r,state:n,relative:a}=e;Cn()||Pe(!1);let{future:o,static:l}=p.useContext(br),{matches:i}=p.useContext(Yt),{pathname:c}=zr(),m=os(),f=rc(t,tc(i,o.v7_relativeSplatPath),c,a==="path"),u=JSON.stringify(f);return p.useEffect(()=>m(JSON.parse(u),{replace:r,state:n,relative:a}),[m,u,a,r,n]),null}function Lg(e){return pg(e.context)}function Ge(e){Pe(!1)}function Tg(e){let{basename:t="/",children:r=null,location:n,navigationType:a=or.Pop,navigator:o,static:l=!1,future:i}=e;Cn()&&Pe(!1);let c=t.replace(/^\/*/,"/"),m=p.useMemo(()=>({basename:c,navigator:o,static:l,future:ya({v7_relativeSplatPath:!1},i)}),[c,i,o,l]);typeof n=="string"&&(n=Sn(n));let{pathname:f="/",search:u="",hash:h="",state:b=null,key:y="default"}=n,w=p.useMemo(()=>{let N=ec(f,c);return N==null?null:{location:{pathname:N,search:u,hash:h,state:b,key:y},navigationType:a}},[c,f,u,h,b,y,a]);return w==null?null:p.createElement(br.Provider,{value:m},p.createElement(as.Provider,{children:r,value:w}))}function Ig(e){let{children:t,location:r}=e;return hg(Kl(t),r)}new Promise(()=>{});function Kl(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(n,a)=>{if(!p.isValidElement(n))return;let o=[...t,a];if(n.type===p.Fragment){r.push.apply(r,Kl(n.props.children,o));return}n.type!==Ge&&Pe(!1),!n.props.index||!n.props.children||Pe(!1);let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Kl(n.props.children,o)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yl(){return Yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yl.apply(this,arguments)}function Dg(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function _g(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ag(e,t){return e.button===0&&(!t||t==="_self")&&!_g(e)}const Og=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jg="6";try{window.__reactRouterVersion=jg}catch{}const Ug="startTransition",Id=Pp[Ug];function Fg(e){let{basename:t,children:r,future:n,window:a}=e,o=p.useRef();o.current==null&&(o.current=M0({window:a,v5Compat:!0}));let l=o.current,[i,c]=p.useState({action:l.action,location:l.location}),{v7_startTransition:m}=n||{},f=p.useCallback(u=>{m&&Id?Id(()=>c(u)):c(u)},[c,m]);return p.useLayoutEffect(()=>l.listen(f),[l,f]),p.useEffect(()=>Rg(n),[n]),p.createElement(Tg,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:l,future:n})}const Mg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$g=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qs=p.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:o,replace:l,state:i,target:c,to:m,preventScrollReset:f,viewTransition:u}=t,h=Dg(t,Og),{basename:b}=p.useContext(br),y,w=!1;if(typeof m=="string"&&$g.test(m)&&(y=m,Mg))try{let v=new URL(window.location.href),E=m.startsWith("//")?new URL(v.protocol+m):new URL(m),P=ec(E.pathname,b);E.origin===v.origin&&P!=null?m=P+E.search+E.hash:w=!0}catch{}let N=ug(m,{relative:a}),x=Bg(m,{replace:l,state:i,target:c,preventScrollReset:f,relative:a,viewTransition:u});function g(v){n&&n(v),v.defaultPrevented||x(v)}return p.createElement("a",Yl({},h,{href:y||N,onClick:w||o?n:g,ref:r,target:c}))});var Dd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Dd||(Dd={}));var _d;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_d||(_d={}));function Bg(e,t){let{target:r,replace:n,state:a,preventScrollReset:o,relative:l,viewTransition:i}=t===void 0?{}:t,c=os(),m=zr(),f=wf(e,{relative:l});return p.useCallback(u=>{if(Ag(u,r)){u.preventDefault();let h=n!==void 0?n:Ao(m)===Ao(f);c(e,{replace:h,state:a,preventScrollReset:o,relative:l,viewTransition:i})}},[m,c,f,n,a,r,e,o,l,i])}const Ad=e=>{let t;const r=new Set,n=(f,u)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const b=t;t=u??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(y=>y(t,b))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>m,subscribe:f=>(r.add(f),()=>r.delete(f)),destroy:()=>{r.clear()}},m=t=e(n,a,c);return c},zg=e=>e?Ad(e):Ad;var Ef={exports:{}},Sf={},Cf={exports:{}},kf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wn=p;function Hg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vg=typeof Object.is=="function"?Object.is:Hg,Wg=wn.useState,qg=wn.useEffect,Qg=wn.useLayoutEffect,Gg=wn.useDebugValue;function Kg(e,t){var r=t(),n=Wg({inst:{value:r,getSnapshot:t}}),a=n[0].inst,o=n[1];return Qg(function(){a.value=r,a.getSnapshot=t,Qs(a)&&o({inst:a})},[e,r,t]),qg(function(){return Qs(a)&&o({inst:a}),e(function(){Qs(a)&&o({inst:a})})},[e]),Gg(r),r}function Qs(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Vg(e,r)}catch{return!0}}function Yg(e,t){return t()}var Jg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Yg:Kg;kf.useSyncExternalStore=wn.useSyncExternalStore!==void 0?wn.useSyncExternalStore:Jg;Cf.exports=kf;var Zg=Cf.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ss=p,Xg=Zg;function ey(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ty=typeof Object.is=="function"?Object.is:ey,ry=Xg.useSyncExternalStore,ny=ss.useRef,ay=ss.useEffect,oy=ss.useMemo,sy=ss.useDebugValue;Sf.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var o=ny(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=oy(function(){function c(b){if(!m){if(m=!0,f=b,b=n(b),a!==void 0&&l.hasValue){var y=l.value;if(a(y,b))return u=y}return u=b}if(y=u,ty(f,b))return y;var w=n(b);return a!==void 0&&a(y,w)?(f=b,y):(f=b,u=w)}var m=!1,f,u,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var i=ry(e,o[0],o[1]);return ay(function(){l.hasValue=!0,l.value=i},[i]),sy(i),i};Ef.exports=Sf;var ly=Ef.exports;const iy=eu(ly),{useDebugValue:cy}=zo,{useSyncExternalStoreWithSelector:dy}=iy;const uy=e=>e;function my(e,t=uy,r){const n=dy(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return cy(n),n}const Od=e=>{const t=typeof e=="function"?zg(e):e,r=(n,a)=>my(t,n,a);return Object.assign(r,t),r},Pf=e=>e?Od(e):Od;function fy(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var o;const l=c=>c===null?null:JSON.parse(c,t==null?void 0:t.reviver),i=(o=r.getItem(a))!=null?o:null;return i instanceof Promise?i.then(l):l(i)},setItem:(a,o)=>r.setItem(a,JSON.stringify(o,t==null?void 0:t.replacer)),removeItem:a=>r.removeItem(a)}}const va=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return va(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return va(n)(r)}}}},py=(e,t)=>(r,n,a)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:N=>N,version:0,merge:(N,x)=>({...x,...N}),...t},l=!1;const i=new Set,c=new Set;let m;try{m=o.getStorage()}catch{}if(!m)return e((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...N)},n,a);const f=va(o.serialize),u=()=>{const N=o.partialize({...n()});let x;const g=f({state:N,version:o.version}).then(v=>m.setItem(o.name,v)).catch(v=>{x=v});if(x)throw x;return g},h=a.setState;a.setState=(N,x)=>{h(N,x),u()};const b=e((...N)=>{r(...N),u()},n,a);let y;const w=()=>{var N;if(!m)return;l=!1,i.forEach(g=>g(n()));const x=((N=o.onRehydrateStorage)==null?void 0:N.call(o,n()))||void 0;return va(m.getItem.bind(m))(o.name).then(g=>{if(g)return o.deserialize(g)}).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==o.version){if(o.migrate)return o.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var v;return y=o.merge(g,(v=n())!=null?v:b),r(y,!0),u()}).then(()=>{x==null||x(y,void 0),l=!0,c.forEach(g=>g(y))}).catch(g=>{x==null||x(void 0,g)})};return a.persist={setOptions:N=>{o={...o,...N},N.getStorage&&(m=N.getStorage())},clearStorage:()=>{m==null||m.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>w(),hasHydrated:()=>l,onHydrate:N=>(i.add(N),()=>{i.delete(N)}),onFinishHydration:N=>(c.add(N),()=>{c.delete(N)})},w(),y||b},hy=(e,t)=>(r,n,a)=>{let o={storage:fy(()=>localStorage),partialize:w=>w,version:0,merge:(w,N)=>({...N,...w}),...t},l=!1;const i=new Set,c=new Set;let m=o.storage;if(!m)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...w)},n,a);const f=()=>{const w=o.partialize({...n()});return m.setItem(o.name,{state:w,version:o.version})},u=a.setState;a.setState=(w,N)=>{u(w,N),f()};const h=e((...w)=>{r(...w),f()},n,a);a.getInitialState=()=>h;let b;const y=()=>{var w,N;if(!m)return;l=!1,i.forEach(g=>{var v;return g((v=n())!=null?v:h)});const x=((N=o.onRehydrateStorage)==null?void 0:N.call(o,(w=n())!=null?w:h))||void 0;return va(m.getItem.bind(m))(o.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==o.version){if(o.migrate)return[!0,o.migrate(g.state,g.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var v;const[E,P]=g;if(b=o.merge(P,(v=n())!=null?v:h),r(b,!0),E)return f()}).then(()=>{x==null||x(b,void 0),b=n(),l=!0,c.forEach(g=>g(b))}).catch(g=>{x==null||x(void 0,g)})};return a.persist={setOptions:w=>{o={...o,...w},w.storage&&(m=w.storage)},clearStorage:()=>{m==null||m.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>y(),hasHydrated:()=>l,onHydrate:w=>(i.add(w),()=>{i.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},o.skipHydration||y(),b||h},gy=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?py(e,t):hy(e,t),yy=gy,vy="modulepreload",xy=function(e){return"/"+e},jd={},wy=function(t,r,n){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=xy(o),o in jd)return;jd[o]=!0;const l=o.endsWith(".css"),i=l?'[rel="stylesheet"]':"";if(!!n)for(let f=a.length-1;f>=0;f--){const u=a[f];if(u.href===o&&(!l||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${i}`))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":vy,l||(m.as="script",m.crossOrigin=""),m.href=o,document.head.appendChild(m),l)return new Promise((f,u)=>{m.addEventListener("load",f),m.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})};function Rf(e,t){return function(){return e.apply(t,arguments)}}const{toString:by}=Object.prototype,{getPrototypeOf:ac}=Object,{iterator:ls,toStringTag:Lf}=Symbol,is=(e=>t=>{const r=by.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ct=e=>(e=e.toLowerCase(),t=>is(t)===e),cs=e=>t=>typeof t===e,{isArray:kn}=Array,xa=cs("undefined");function Ny(e){return e!==null&&!xa(e)&&e.constructor!==null&&!xa(e.constructor)&&et(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Tf=Ct("ArrayBuffer");function Ey(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Tf(e.buffer),t}const Sy=cs("string"),et=cs("function"),If=cs("number"),ds=e=>e!==null&&typeof e=="object",Cy=e=>e===!0||e===!1,oo=e=>{if(is(e)!=="object")return!1;const t=ac(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Lf in e)&&!(ls in e)},ky=Ct("Date"),Py=Ct("File"),Ry=Ct("Blob"),Ly=Ct("FileList"),Ty=e=>ds(e)&&et(e.pipe),Iy=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||et(e.append)&&((t=is(e))==="formdata"||t==="object"&&et(e.toString)&&e.toString()==="[object FormData]"))},Dy=Ct("URLSearchParams"),[_y,Ay,Oy,jy]=["ReadableStream","Request","Response","Headers"].map(Ct),Uy=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ka(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),kn(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let i;for(n=0;n<l;n++)i=o[n],t.call(null,e[i],i,e)}}function Df(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const Tr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),_f=e=>!xa(e)&&e!==Tr;function Jl(){const{caseless:e}=_f(this)&&this||{},t={},r=(n,a)=>{const o=e&&Df(t,a)||a;oo(t[o])&&oo(n)?t[o]=Jl(t[o],n):oo(n)?t[o]=Jl({},n):kn(n)?t[o]=n.slice():t[o]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&ka(arguments[n],r);return t}const Fy=(e,t,r,{allOwnKeys:n}={})=>(ka(t,(a,o)=>{r&&et(a)?e[o]=Rf(a,r):e[o]=a},{allOwnKeys:n}),e),My=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),$y=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},By=(e,t,r,n)=>{let a,o,l;const i={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)l=a[o],(!n||n(l,e,t))&&!i[l]&&(t[l]=e[l],i[l]=!0);e=r!==!1&&ac(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},zy=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Hy=e=>{if(!e)return null;if(kn(e))return e;let t=e.length;if(!If(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Vy=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ac(Uint8Array)),Wy=(e,t)=>{const n=(e&&e[ls]).call(e);let a;for(;(a=n.next())&&!a.done;){const o=a.value;t.call(e,o[0],o[1])}},qy=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Qy=Ct("HTMLFormElement"),Gy=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Ud=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Ky=Ct("RegExp"),Af=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};ka(r,(a,o)=>{let l;(l=t(a,o,e))!==!1&&(n[o]=l||a)}),Object.defineProperties(e,n)},Yy=e=>{Af(e,(t,r)=>{if(et(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(et(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Jy=(e,t)=>{const r={},n=a=>{a.forEach(o=>{r[o]=!0})};return kn(e)?n(e):n(String(e).split(t)),r},Zy=()=>{},Xy=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function ev(e){return!!(e&&et(e.append)&&e[Lf]==="FormData"&&e[ls])}const tv=e=>{const t=new Array(10),r=(n,a)=>{if(ds(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const o=kn(n)?[]:{};return ka(n,(l,i)=>{const c=r(l,a+1);!xa(c)&&(o[i]=c)}),t[a]=void 0,o}}return n};return r(e,0)},rv=Ct("AsyncFunction"),nv=e=>e&&(ds(e)||et(e))&&et(e.then)&&et(e.catch),Of=((e,t)=>e?setImmediate:t?((r,n)=>(Tr.addEventListener("message",({source:a,data:o})=>{a===Tr&&o===r&&n.length&&n.shift()()},!1),a=>{n.push(a),Tr.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",et(Tr.postMessage)),av=typeof queueMicrotask<"u"?queueMicrotask.bind(Tr):typeof process<"u"&&process.nextTick||Of,ov=e=>e!=null&&et(e[ls]),L={isArray:kn,isArrayBuffer:Tf,isBuffer:Ny,isFormData:Iy,isArrayBufferView:Ey,isString:Sy,isNumber:If,isBoolean:Cy,isObject:ds,isPlainObject:oo,isReadableStream:_y,isRequest:Ay,isResponse:Oy,isHeaders:jy,isUndefined:xa,isDate:ky,isFile:Py,isBlob:Ry,isRegExp:Ky,isFunction:et,isStream:Ty,isURLSearchParams:Dy,isTypedArray:Vy,isFileList:Ly,forEach:ka,merge:Jl,extend:Fy,trim:Uy,stripBOM:My,inherits:$y,toFlatObject:By,kindOf:is,kindOfTest:Ct,endsWith:zy,toArray:Hy,forEachEntry:Wy,matchAll:qy,isHTMLForm:Qy,hasOwnProperty:Ud,hasOwnProp:Ud,reduceDescriptors:Af,freezeMethods:Yy,toObjectSet:Jy,toCamelCase:Gy,noop:Zy,toFiniteNumber:Xy,findKey:Df,global:Tr,isContextDefined:_f,isSpecCompliantForm:ev,toJSONObject:tv,isAsyncFn:rv,isThenable:nv,setImmediate:Of,asap:av,isIterable:ov};function ae(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}L.inherits(ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.status}}});const jf=ae.prototype,Uf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Uf[e]={value:e}});Object.defineProperties(ae,Uf);Object.defineProperty(jf,"isAxiosError",{value:!0});ae.from=(e,t,r,n,a,o)=>{const l=Object.create(jf);return L.toFlatObject(e,l,function(c){return c!==Error.prototype},i=>i!=="isAxiosError"),ae.call(l,e.message,t,r,n,a),l.cause=e,l.name=e.name,o&&Object.assign(l,o),l};const sv=null;function Zl(e){return L.isPlainObject(e)||L.isArray(e)}function Ff(e){return L.endsWith(e,"[]")?e.slice(0,-2):e}function Fd(e,t,r){return e?e.concat(t).map(function(a,o){return a=Ff(a),!r&&o?"["+a+"]":a}).join(r?".":""):t}function lv(e){return L.isArray(e)&&!e.some(Zl)}const iv=L.toFlatObject(L,{},null,function(t){return/^is[A-Z]/.test(t)});function us(e,t,r){if(!L.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=L.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,N){return!L.isUndefined(N[w])});const n=r.metaTokens,a=r.visitor||f,o=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(t);if(!L.isFunction(a))throw new TypeError("visitor must be a function");function m(y){if(y===null)return"";if(L.isDate(y))return y.toISOString();if(L.isBoolean(y))return y.toString();if(!c&&L.isBlob(y))throw new ae("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(y)||L.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function f(y,w,N){let x=y;if(y&&!N&&typeof y=="object"){if(L.endsWith(w,"{}"))w=n?w:w.slice(0,-2),y=JSON.stringify(y);else if(L.isArray(y)&&lv(y)||(L.isFileList(y)||L.endsWith(w,"[]"))&&(x=L.toArray(y)))return w=Ff(w),x.forEach(function(v,E){!(L.isUndefined(v)||v===null)&&t.append(l===!0?Fd([w],E,o):l===null?w:w+"[]",m(v))}),!1}return Zl(y)?!0:(t.append(Fd(N,w,o),m(y)),!1)}const u=[],h=Object.assign(iv,{defaultVisitor:f,convertValue:m,isVisitable:Zl});function b(y,w){if(!L.isUndefined(y)){if(u.indexOf(y)!==-1)throw Error("Circular reference detected in "+w.join("."));u.push(y),L.forEach(y,function(x,g){(!(L.isUndefined(x)||x===null)&&a.call(t,x,L.isString(g)?g.trim():g,w,h))===!0&&b(x,w?w.concat(g):[g])}),u.pop()}}if(!L.isObject(e))throw new TypeError("data must be an object");return b(e),t}function Md(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function oc(e,t){this._pairs=[],e&&us(e,this,t)}const Mf=oc.prototype;Mf.append=function(t,r){this._pairs.push([t,r])};Mf.toString=function(t){const r=t?function(n){return t.call(this,n,Md)}:Md;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function cv(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $f(e,t,r){if(!t)return e;const n=r&&r.encode||cv;L.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let o;if(a?o=a(t,r):o=L.isURLSearchParams(t)?t.toString():new oc(t,r).toString(n),o){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class dv{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){L.forEach(this.handlers,function(n){n!==null&&t(n)})}}const $d=dv,Bf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uv=typeof URLSearchParams<"u"?URLSearchParams:oc,mv=typeof FormData<"u"?FormData:null,fv=typeof Blob<"u"?Blob:null,pv={isBrowser:!0,classes:{URLSearchParams:uv,FormData:mv,Blob:fv},protocols:["http","https","file","blob","url","data"]},sc=typeof window<"u"&&typeof document<"u",Xl=typeof navigator=="object"&&navigator||void 0,hv=sc&&(!Xl||["ReactNative","NativeScript","NS"].indexOf(Xl.product)<0),gv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),yv=sc&&window.location.href||"http://localhost",vv=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sc,hasStandardBrowserEnv:hv,hasStandardBrowserWebWorkerEnv:gv,navigator:Xl,origin:yv},Symbol.toStringTag,{value:"Module"})),Be={...vv,...pv};function xv(e,t){return us(e,new Be.classes.URLSearchParams,Object.assign({visitor:function(r,n,a,o){return Be.isNode&&L.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function wv(e){return L.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bv(e){const t={},r=Object.keys(e);let n;const a=r.length;let o;for(n=0;n<a;n++)o=r[n],t[o]=e[o];return t}function zf(e){function t(r,n,a,o){let l=r[o++];if(l==="__proto__")return!0;const i=Number.isFinite(+l),c=o>=r.length;return l=!l&&L.isArray(a)?a.length:l,c?(L.hasOwnProp(a,l)?a[l]=[a[l],n]:a[l]=n,!i):((!a[l]||!L.isObject(a[l]))&&(a[l]=[]),t(r,n,a[l],o)&&L.isArray(a[l])&&(a[l]=bv(a[l])),!i)}if(L.isFormData(e)&&L.isFunction(e.entries)){const r={};return L.forEachEntry(e,(n,a)=>{t(wv(n),a,r,0)}),r}return null}function Nv(e,t,r){if(L.isString(e))try{return(t||JSON.parse)(e),L.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const lc={transitional:Bf,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,o=L.isObject(t);if(o&&L.isHTMLForm(t)&&(t=new FormData(t)),L.isFormData(t))return a?JSON.stringify(zf(t)):t;if(L.isArrayBuffer(t)||L.isBuffer(t)||L.isStream(t)||L.isFile(t)||L.isBlob(t)||L.isReadableStream(t))return t;if(L.isArrayBufferView(t))return t.buffer;if(L.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return xv(t,this.formSerializer).toString();if((i=L.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return us(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||a?(r.setContentType("application/json",!1),Nv(t)):t}],transformResponse:[function(t){const r=this.transitional||lc.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(L.isResponse(t)||L.isReadableStream(t))return t;if(t&&L.isString(t)&&(n&&!this.responseType||a)){const l=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(i){if(l)throw i.name==="SyntaxError"?ae.from(i,ae.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Be.classes.FormData,Blob:Be.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],e=>{lc.headers[e]={}});const ic=lc,Ev=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sv=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),r=l.substring(0,a).trim().toLowerCase(),n=l.substring(a+1).trim(),!(!r||t[r]&&Ev[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Bd=Symbol("internals");function Un(e){return e&&String(e).trim().toLowerCase()}function so(e){return e===!1||e==null?e:L.isArray(e)?e.map(so):String(e)}function Cv(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const kv=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Gs(e,t,r,n,a){if(L.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!L.isString(t)){if(L.isString(n))return t.indexOf(n)!==-1;if(L.isRegExp(n))return n.test(t)}}function Pv(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Rv(e,t){const r=L.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,o,l){return this[n].call(this,t,a,o,l)},configurable:!0})})}class ms{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function o(i,c,m){const f=Un(c);if(!f)throw new Error("header name must be a non-empty string");const u=L.findKey(a,f);(!u||a[u]===void 0||m===!0||m===void 0&&a[u]!==!1)&&(a[u||c]=so(i))}const l=(i,c)=>L.forEach(i,(m,f)=>o(m,f,c));if(L.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(L.isString(t)&&(t=t.trim())&&!kv(t))l(Sv(t),r);else if(L.isObject(t)&&L.isIterable(t)){let i={},c,m;for(const f of t){if(!L.isArray(f))throw TypeError("Object iterator must return a key-value pair");i[m=f[0]]=(c=i[m])?L.isArray(c)?[...c,f[1]]:[c,f[1]]:f[1]}l(i,r)}else t!=null&&o(r,t,n);return this}get(t,r){if(t=Un(t),t){const n=L.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return Cv(a);if(L.isFunction(r))return r.call(this,a,n);if(L.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Un(t),t){const n=L.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Gs(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function o(l){if(l=Un(l),l){const i=L.findKey(n,l);i&&(!r||Gs(n,n[i],i,r))&&(delete n[i],a=!0)}}return L.isArray(t)?t.forEach(o):o(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const o=r[n];(!t||Gs(this,this[o],o,t,!0))&&(delete this[o],a=!0)}return a}normalize(t){const r=this,n={};return L.forEach(this,(a,o)=>{const l=L.findKey(n,o);if(l){r[l]=so(a),delete r[o];return}const i=t?Pv(o):String(o).trim();i!==o&&delete r[o],r[i]=so(a),n[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return L.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&L.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Bd]=this[Bd]={accessors:{}}).accessors,a=this.prototype;function o(l){const i=Un(l);n[i]||(Rv(a,l),n[i]=!0)}return L.isArray(t)?t.forEach(o):o(t),this}}ms.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);L.reduceDescriptors(ms.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});L.freezeMethods(ms);const Nt=ms;function Ks(e,t){const r=this||ic,n=t||r,a=Nt.from(n.headers);let o=n.data;return L.forEach(e,function(i){o=i.call(r,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function Hf(e){return!!(e&&e.__CANCEL__)}function Pn(e,t,r){ae.call(this,e??"canceled",ae.ERR_CANCELED,t,r),this.name="CanceledError"}L.inherits(Pn,ae,{__CANCEL__:!0});function Vf(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new ae("Request failed with status code "+r.status,[ae.ERR_BAD_REQUEST,ae.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Lv(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Tv(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,o=0,l;return t=t!==void 0?t:1e3,function(c){const m=Date.now(),f=n[o];l||(l=m),r[a]=c,n[a]=m;let u=o,h=0;for(;u!==a;)h+=r[u++],u=u%e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),m-l<t)return;const b=f&&m-f;return b?Math.round(h*1e3/b):void 0}}function Iv(e,t){let r=0,n=1e3/t,a,o;const l=(m,f=Date.now())=>{r=f,a=null,o&&(clearTimeout(o),o=null),e.apply(null,m)};return[(...m)=>{const f=Date.now(),u=f-r;u>=n?l(m,f):(a=m,o||(o=setTimeout(()=>{o=null,l(a)},n-u)))},()=>a&&l(a)]}const jo=(e,t,r=3)=>{let n=0;const a=Tv(50,250);return Iv(o=>{const l=o.loaded,i=o.lengthComputable?o.total:void 0,c=l-n,m=a(c),f=l<=i;n=l;const u={loaded:l,total:i,progress:i?l/i:void 0,bytes:c,rate:m||void 0,estimated:m&&i&&f?(i-l)/m:void 0,event:o,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(u)},r)},zd=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Hd=e=>(...t)=>L.asap(()=>e(...t)),Dv=Be.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Be.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Be.origin),Be.navigator&&/(msie|trident)/i.test(Be.navigator.userAgent)):()=>!0,_v=Be.hasStandardBrowserEnv?{write(e,t,r,n,a,o){const l=[e+"="+encodeURIComponent(t)];L.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),L.isString(n)&&l.push("path="+n),L.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Av(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ov(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Wf(e,t,r){let n=!Av(t);return e&&(n||r==!1)?Ov(e,t):t}const Vd=e=>e instanceof Nt?{...e}:e;function Mr(e,t){t=t||{};const r={};function n(m,f,u,h){return L.isPlainObject(m)&&L.isPlainObject(f)?L.merge.call({caseless:h},m,f):L.isPlainObject(f)?L.merge({},f):L.isArray(f)?f.slice():f}function a(m,f,u,h){if(L.isUndefined(f)){if(!L.isUndefined(m))return n(void 0,m,u,h)}else return n(m,f,u,h)}function o(m,f){if(!L.isUndefined(f))return n(void 0,f)}function l(m,f){if(L.isUndefined(f)){if(!L.isUndefined(m))return n(void 0,m)}else return n(void 0,f)}function i(m,f,u){if(u in t)return n(m,f);if(u in e)return n(void 0,m)}const c={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:i,headers:(m,f,u)=>a(Vd(m),Vd(f),u,!0)};return L.forEach(Object.keys(Object.assign({},e,t)),function(f){const u=c[f]||a,h=u(e[f],t[f],f);L.isUndefined(h)&&u!==i||(r[f]=h)}),r}const qf=e=>{const t=Mr({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:o,headers:l,auth:i}=t;t.headers=l=Nt.from(l),t.url=$f(Wf(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&l.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let c;if(L.isFormData(r)){if(Be.hasStandardBrowserEnv||Be.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((c=l.getContentType())!==!1){const[m,...f]=c?c.split(";").map(u=>u.trim()).filter(Boolean):[];l.setContentType([m||"multipart/form-data",...f].join("; "))}}if(Be.hasStandardBrowserEnv&&(n&&L.isFunction(n)&&(n=n(t)),n||n!==!1&&Dv(t.url))){const m=a&&o&&_v.read(o);m&&l.set(a,m)}return t},jv=typeof XMLHttpRequest<"u",Uv=jv&&function(e){return new Promise(function(r,n){const a=qf(e);let o=a.data;const l=Nt.from(a.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:m}=a,f,u,h,b,y;function w(){b&&b(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let N=new XMLHttpRequest;N.open(a.method.toUpperCase(),a.url,!0),N.timeout=a.timeout;function x(){if(!N)return;const v=Nt.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),P={data:!i||i==="text"||i==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:v,config:e,request:N};Vf(function(_){r(_),w()},function(_){n(_),w()},P),N=null}"onloadend"in N?N.onloadend=x:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(x)},N.onabort=function(){N&&(n(new ae("Request aborted",ae.ECONNABORTED,e,N)),N=null)},N.onerror=function(){n(new ae("Network Error",ae.ERR_NETWORK,e,N)),N=null},N.ontimeout=function(){let E=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||Bf;a.timeoutErrorMessage&&(E=a.timeoutErrorMessage),n(new ae(E,P.clarifyTimeoutError?ae.ETIMEDOUT:ae.ECONNABORTED,e,N)),N=null},o===void 0&&l.setContentType(null),"setRequestHeader"in N&&L.forEach(l.toJSON(),function(E,P){N.setRequestHeader(P,E)}),L.isUndefined(a.withCredentials)||(N.withCredentials=!!a.withCredentials),i&&i!=="json"&&(N.responseType=a.responseType),m&&([h,y]=jo(m,!0),N.addEventListener("progress",h)),c&&N.upload&&([u,b]=jo(c),N.upload.addEventListener("progress",u),N.upload.addEventListener("loadend",b)),(a.cancelToken||a.signal)&&(f=v=>{N&&(n(!v||v.type?new Pn(null,e,N):v),N.abort(),N=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const g=Lv(a.url);if(g&&Be.protocols.indexOf(g)===-1){n(new ae("Unsupported protocol "+g+":",ae.ERR_BAD_REQUEST,e));return}N.send(o||null)})},Fv=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const o=function(m){if(!a){a=!0,i();const f=m instanceof Error?m:this.reason;n.abort(f instanceof ae?f:new Pn(f instanceof Error?f.message:f))}};let l=t&&setTimeout(()=>{l=null,o(new ae(`timeout ${t} of ms exceeded`,ae.ETIMEDOUT))},t);const i=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(o):m.removeEventListener("abort",o)}),e=null)};e.forEach(m=>m.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>L.asap(i),c}},Mv=Fv,$v=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},Bv=async function*(e,t){for await(const r of zv(e))yield*$v(r,t)},zv=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Wd=(e,t,r,n)=>{const a=Bv(e,t);let o=0,l,i=c=>{l||(l=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:m,value:f}=await a.next();if(m){i(),c.close();return}let u=f.byteLength;if(r){let h=o+=u;r(h)}c.enqueue(new Uint8Array(f))}catch(m){throw i(m),m}},cancel(c){return i(c),a.return()}},{highWaterMark:2})},fs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Qf=fs&&typeof ReadableStream=="function",Hv=fs&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Gf=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Vv=Qf&&Gf(()=>{let e=!1;const t=new Request(Be.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),qd=64*1024,ei=Qf&&Gf(()=>L.isReadableStream(new Response("").body)),Uo={stream:ei&&(e=>e.body)};fs&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Uo[t]&&(Uo[t]=L.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new ae(`Response type '${t}' is not supported`,ae.ERR_NOT_SUPPORT,n)})})})(new Response);const Wv=async e=>{if(e==null)return 0;if(L.isBlob(e))return e.size;if(L.isSpecCompliantForm(e))return(await new Request(Be.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(L.isArrayBufferView(e)||L.isArrayBuffer(e))return e.byteLength;if(L.isURLSearchParams(e)&&(e=e+""),L.isString(e))return(await Hv(e)).byteLength},qv=async(e,t)=>{const r=L.toFiniteNumber(e.getContentLength());return r??Wv(t)},Qv=fs&&(async e=>{let{url:t,method:r,data:n,signal:a,cancelToken:o,timeout:l,onDownloadProgress:i,onUploadProgress:c,responseType:m,headers:f,withCredentials:u="same-origin",fetchOptions:h}=qf(e);m=m?(m+"").toLowerCase():"text";let b=Mv([a,o&&o.toAbortSignal()],l),y;const w=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let N;try{if(c&&Vv&&r!=="get"&&r!=="head"&&(N=await qv(f,n))!==0){let P=new Request(t,{method:"POST",body:n,duplex:"half"}),T;if(L.isFormData(n)&&(T=P.headers.get("content-type"))&&f.setContentType(T),P.body){const[_,j]=zd(N,jo(Hd(c)));n=Wd(P.body,qd,_,j)}}L.isString(u)||(u=u?"include":"omit");const x="credentials"in Request.prototype;y=new Request(t,{...h,signal:b,method:r.toUpperCase(),headers:f.normalize().toJSON(),body:n,duplex:"half",credentials:x?u:void 0});let g=await fetch(y,h);const v=ei&&(m==="stream"||m==="response");if(ei&&(i||v&&w)){const P={};["status","statusText","headers"].forEach(X=>{P[X]=g[X]});const T=L.toFiniteNumber(g.headers.get("content-length")),[_,j]=i&&zd(T,jo(Hd(i),!0))||[];g=new Response(Wd(g.body,qd,_,()=>{j&&j(),w&&w()}),P)}m=m||"text";let E=await Uo[L.findKey(Uo,m)||"text"](g,e);return!v&&w&&w(),await new Promise((P,T)=>{Vf(P,T,{data:E,headers:Nt.from(g.headers),status:g.status,statusText:g.statusText,config:e,request:y})})}catch(x){throw w&&w(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new ae("Network Error",ae.ERR_NETWORK,e,y),{cause:x.cause||x}):ae.from(x,x&&x.code,e,y)}}),ti={http:sv,xhr:Uv,fetch:Qv};L.forEach(ti,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Qd=e=>`- ${e}`,Gv=e=>L.isFunction(e)||e===null||e===!1,Kf={getAdapter:e=>{e=L.isArray(e)?e:[e];const{length:t}=e;let r,n;const a={};for(let o=0;o<t;o++){r=e[o];let l;if(n=r,!Gv(r)&&(n=ti[(l=String(r)).toLowerCase()],n===void 0))throw new ae(`Unknown adapter '${l}'`);if(n)break;a[l||"#"+o]=n}if(!n){const o=Object.entries(a).map(([i,c])=>`adapter ${i} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=t?o.length>1?`since :
`+o.map(Qd).join(`
`):" "+Qd(o[0]):"as no adapter specified";throw new ae("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:ti};function Ys(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pn(null,e)}function Gd(e){return Ys(e),e.headers=Nt.from(e.headers),e.data=Ks.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Kf.getAdapter(e.adapter||ic.adapter)(e).then(function(n){return Ys(e),n.data=Ks.call(e,e.transformResponse,n),n.headers=Nt.from(n.headers),n},function(n){return Hf(n)||(Ys(e),n&&n.response&&(n.response.data=Ks.call(e,e.transformResponse,n.response),n.response.headers=Nt.from(n.response.headers))),Promise.reject(n)})}const Yf="1.10.0",ps={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ps[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Kd={};ps.transitional=function(t,r,n){function a(o,l){return"[Axios v"+Yf+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,i)=>{if(t===!1)throw new ae(a(l," has been removed"+(r?" in "+r:"")),ae.ERR_DEPRECATED);return r&&!Kd[l]&&(Kd[l]=!0,console.warn(a(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,l,i):!0}};ps.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Kv(e,t,r){if(typeof e!="object")throw new ae("options must be an object",ae.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const o=n[a],l=t[o];if(l){const i=e[o],c=i===void 0||l(i,o,e);if(c!==!0)throw new ae("option "+o+" must be "+c,ae.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ae("Unknown option "+o,ae.ERR_BAD_OPTION)}}const lo={assertOptions:Kv,validators:ps},Lt=lo.validators;class Fo{constructor(t){this.defaults=t||{},this.interceptors={request:new $d,response:new $d}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Mr(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:o}=r;n!==void 0&&lo.assertOptions(n,{silentJSONParsing:Lt.transitional(Lt.boolean),forcedJSONParsing:Lt.transitional(Lt.boolean),clarifyTimeoutError:Lt.transitional(Lt.boolean)},!1),a!=null&&(L.isFunction(a)?r.paramsSerializer={serialize:a}:lo.assertOptions(a,{encode:Lt.function,serialize:Lt.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),lo.assertOptions(r,{baseUrl:Lt.spelling("baseURL"),withXsrfToken:Lt.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=o&&L.merge(o.common,o[r.method]);o&&L.forEach(["delete","get","head","post","put","patch","common"],y=>{delete o[y]}),r.headers=Nt.concat(l,o);const i=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(r)===!1||(c=c&&w.synchronous,i.unshift(w.fulfilled,w.rejected))});const m=[];this.interceptors.response.forEach(function(w){m.push(w.fulfilled,w.rejected)});let f,u=0,h;if(!c){const y=[Gd.bind(this),void 0];for(y.unshift.apply(y,i),y.push.apply(y,m),h=y.length,f=Promise.resolve(r);u<h;)f=f.then(y[u++],y[u++]);return f}h=i.length;let b=r;for(u=0;u<h;){const y=i[u++],w=i[u++];try{b=y(b)}catch(N){w.call(this,N);break}}try{f=Gd.call(this,b)}catch(y){return Promise.reject(y)}for(u=0,h=m.length;u<h;)f=f.then(m[u++],m[u++]);return f}getUri(t){t=Mr(this.defaults,t);const r=Wf(t.baseURL,t.url,t.allowAbsoluteUrls);return $f(r,t.params,t.paramsSerializer)}}L.forEach(["delete","get","head","options"],function(t){Fo.prototype[t]=function(r,n){return this.request(Mr(n||{},{method:t,url:r,data:(n||{}).data}))}});L.forEach(["post","put","patch"],function(t){function r(n){return function(o,l,i){return this.request(Mr(i||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Fo.prototype[t]=r(),Fo.prototype[t+"Form"]=r(!0)});const io=Fo;class cc{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(a=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](a);n._listeners=null}),this.promise.then=a=>{let o;const l=new Promise(i=>{n.subscribe(i),o=i}).then(a);return l.cancel=function(){n.unsubscribe(o)},l},t(function(o,l,i){n.reason||(n.reason=new Pn(o,l,i),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new cc(function(a){t=a}),cancel:t}}}const Yv=cc;function Jv(e){return function(r){return e.apply(null,r)}}function Zv(e){return L.isObject(e)&&e.isAxiosError===!0}const ri={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ri).forEach(([e,t])=>{ri[t]=e});const Xv=ri;function Jf(e){const t=new io(e),r=Rf(io.prototype.request,t);return L.extend(r,io.prototype,t,{allOwnKeys:!0}),L.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return Jf(Mr(e,a))},r}const Te=Jf(ic);Te.Axios=io;Te.CanceledError=Pn;Te.CancelToken=Yv;Te.isCancel=Hf;Te.VERSION=Yf;Te.toFormData=us;Te.AxiosError=ae;Te.Cancel=Te.CanceledError;Te.all=function(t){return Promise.all(t)};Te.spread=Jv;Te.isAxiosError=Zv;Te.mergeConfig=Mr;Te.AxiosHeaders=Nt;Te.formToJSON=e=>zf(L.isHTMLForm(e)?new FormData(e):e);Te.getAdapter=Kf.getAdapter;Te.HttpStatusCode=Xv;Te.default=Te;const qr=Te,z=qr.create({baseURL:"https://duoc.duckdns.org/api",timeout:1e4});z.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});z.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),wy(()=>Promise.resolve().then(()=>tx),void 0).then(({useAuthStore:r})=>{r.getState().clearAuth()}),window.location.pathname!=="/login"&&(window.location.href="/login")),Promise.reject(e)});class ex{async login(t){try{const r=await z.post("/auth/login",t);return r.data.access_token&&this.setToken(r.data.access_token),r.data}catch(r){throw console.error("Error en login:",r),r}}async logout(){try{await z.post("/auth/logout")}catch(t){console.error("Error en logout:",t)}finally{this.removeToken()}}async getProfile(){try{return(await z.get("/auth/profile")).data}catch(t){throw console.error("Error obteniendo perfil:",t),t}}async validateToken(){try{return(await z.get("/auth/validate")).data}catch(t){return console.error("Error validando token:",t),{valid:!1}}}async changePassword(t){try{return(await z.post("/auth/change-password",t)).data}catch(r){throw console.error("Error cambiando contraseña:",r),r}}setToken(t){localStorage.setItem("token",t)}getToken(){return localStorage.getItem("token")}removeToken(){localStorage.removeItem("token")}hasToken(){return!!this.getToken()}isAuthenticated(){return this.hasToken()}async getRoles(){return(await z.get("/auth/roles")).data}}const ct=new ex,Gt=Pf()(yy((e,t)=>({isAuthenticated:!1,isLoading:!1,user:null,permissions:[],token:null,login:async r=>{try{e({isLoading:!0});const n=await ct.login(r);e({isAuthenticated:!0,user:n.user,permissions:n.permissions,token:n.access_token,isLoading:!1})}catch(n){throw e({isAuthenticated:!1,user:null,permissions:[],token:null,isLoading:!1}),n}},logout:async()=>{try{await ct.logout()}catch(r){console.error("Error durante logout:",r)}finally{e({isAuthenticated:!1,user:null,permissions:[],token:null,isLoading:!1})}},loadSession:async()=>{try{e({isLoading:!0});const r=ct.getToken();if(!r){e({isLoading:!1});return}const n=await ct.validateToken();n.valid&&n.user&&n.permissions?e({isAuthenticated:!0,user:n.user,permissions:n.permissions,token:r,isLoading:!1}):(ct.removeToken(),e({isAuthenticated:!1,user:null,permissions:[],token:null,isLoading:!1}))}catch(r){console.error("Error cargando sesión:",r),ct.removeToken(),e({isAuthenticated:!1,user:null,permissions:[],token:null,isLoading:!1})}},clearAuth:()=>{ct.removeToken(),e({isAuthenticated:!1,user:null,permissions:[],token:null,isLoading:!1})},hasPermission:r=>{const{permissions:n}=t();return n.includes(r)},hasAnyPermission:r=>{const{permissions:n}=t();return r.some(a=>n.includes(a))}}),{name:"auth-storage",partialize:e=>({isAuthenticated:e.isAuthenticated,user:e.user,permissions:e.permissions,token:e.token}),onRehydrateStorage:()=>e=>{e&&!e.token&&(e.isAuthenticated=!1,e.user=null,e.permissions=[])}})),tx=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:Gt},Symbol.toStringTag,{value:"Module"}));class dc{constructor(){Vr(this,"baseUrl","/bimestres")}async findAll(t){const r=t?`${this.baseUrl}?anoAcademico=${t}`:this.baseUrl;return(await z.get(r)).data.data}async findActivos(){return(await z.get(`${this.baseUrl}/activos`)).data.data}async findBimestreActual(){return(await z.get(`${this.baseUrl}/actual`)).data.data}async findById(t){return(await z.get(`${this.baseUrl}/${t}`)).data.data}async create(t){return(await z.post(this.baseUrl,t)).data.data}async update(t,r){return(await z.put(`${this.baseUrl}/${t}`,r)).data.data}async checkDependencies(t){return(await z.get(`${this.baseUrl}/${t}/dependencies`)).data.data}async deleteWithEvents(t){await z.delete(`${this.baseUrl}/${t}/with-events`)}async delete(t){await z.delete(`${this.baseUrl}/${t}`)}async cargaMasiva(t){const r=new FormData;r.append("file",t);const n=await z.post(`${this.baseUrl}/carga-masiva`,r,{headers:{"Content-Type":"multipart/form-data"}});if(!n.data.success){const a=new Error(n.data.message||"Error en la carga masiva");throw a.response={data:n.data},a}return n.data.data}formatFecha(t){return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}getDuracionDias(t,r){const n=new Date(t),a=new Date(r),o=Math.abs(a.getTime()-n.getTime());return Math.ceil(o/(1e3*60*60*24))}contieneFecha(t,r){const n=new Date(t.fechaInicio),a=new Date(t.fechaFin);return r>=n&&r<=a}getFechasRango(t,r){const n=[],a=new Date(t),o=new Date(r),l=new Date(a);for(;l<=o;)n.push(new Date(l)),l.setDate(l.getDate()+1);return n}validarSolapamientoFechas(t,r,n,a,o){const l=new Date(t),i=new Date(r);for(const c of a){if(o&&c.id===o||c.anoAcademico!==n||!c.activo)continue;const m=new Date(c.fechaInicio),f=new Date(c.fechaFin);if(l<f&&i>m)return{hasOverlap:!0,conflictingBimestre:c}}return{hasOverlap:!1}}}const it=new dc,jt=Pf((e,t)=>({bimestres:[],bimestreSeleccionado:null,bimestreActual:null,isLoading:!1,error:null,fetchBimestres:async r=>{e({isLoading:!0,error:null});try{const n=await it.findAll(r);e({bimestres:n,isLoading:!1})}catch(n){e({error:n instanceof Error?n.message:"Error al cargar bimestres",isLoading:!1})}},fetchBimestresActivos:async()=>{e({isLoading:!0,error:null});try{const r=await it.findActivos();e({bimestres:r,isLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"Error al cargar bimestres activos",isLoading:!1})}},fetchBimestreActual:async()=>{try{const r=await it.findBimestreActual();e({bimestreActual:r}),!t().bimestreSeleccionado&&r&&e({bimestreSeleccionado:r})}catch(r){console.error("Error al obtener bimestre actual:",r)}},seleccionarBimestre:r=>{e({bimestreSeleccionado:r})},crearBimestre:async r=>{var n,a,o,l,i,c,m;e({isLoading:!0,error:null});try{const f=await it.create(r),{bimestres:u}=t();return e({bimestres:[...u,f],isLoading:!1}),f}catch(f){let u="Error al crear bimestre";throw(a=(n=f==null?void 0:f.response)==null?void 0:n.data)!=null&&a.message?u=f.response.data.message:(l=(o=f==null?void 0:f.response)==null?void 0:o.data)!=null&&l.error?u=f.response.data.error:((m=(c=(i=f==null?void 0:f.response)==null?void 0:i.data)==null?void 0:c.errors)==null?void 0:m.length)>0?u=f.response.data.errors[0]:f!=null&&f.message&&(u=f.message),e({error:u,isLoading:!1}),f}},actualizarBimestre:async(r,n)=>{var a,o,l,i,c,m,f;e({isLoading:!0,error:null});try{const u=await it.update(r,n),{bimestres:h,bimestreSeleccionado:b}=t(),y=h.map(w=>w.id===r?u:w);return e({bimestres:y,bimestreSeleccionado:(b==null?void 0:b.id)===r?u:b,isLoading:!1}),u}catch(u){let h="Error al actualizar bimestre";throw(o=(a=u==null?void 0:u.response)==null?void 0:a.data)!=null&&o.message?h=u.response.data.message:(i=(l=u==null?void 0:u.response)==null?void 0:l.data)!=null&&i.error?h=u.response.data.error:((f=(m=(c=u==null?void 0:u.response)==null?void 0:c.data)==null?void 0:m.errors)==null?void 0:f.length)>0?h=u.response.data.errors[0]:u!=null&&u.message&&(h=u.message),console.log("Store: Mensaje de error final:",h),e({error:h,isLoading:!1}),u}},verificarDependencias:async r=>{try{return await it.checkDependencies(r)}catch(n){throw n}},eliminarBimestreConEventos:async r=>{e({isLoading:!0,error:null});try{await it.deleteWithEvents(r);const{bimestres:n,bimestreSeleccionado:a}=t(),o=n.filter(l=>l.id!==r);e({bimestres:o,bimestreSeleccionado:(a==null?void 0:a.id)===r?null:a,isLoading:!1})}catch(n){throw e({error:n instanceof Error?n.message:"Error al eliminar bimestre con eventos",isLoading:!1}),n}},eliminarBimestre:async r=>{e({isLoading:!0,error:null});try{await it.delete(r);const{bimestres:n,bimestreSeleccionado:a}=t(),o=n.filter(l=>l.id!==r);e({bimestres:o,bimestreSeleccionado:(a==null?void 0:a.id)===r?null:a,isLoading:!1})}catch(n){throw e({error:n instanceof Error?n.message:"Error al eliminar bimestre",isLoading:!1}),n}},clearError:()=>e({error:null}),getFechasBimestre:r=>it.getFechasRango(r.fechaInicio,r.fechaFin),getBimestresAno:r=>{const{bimestres:n}=t();return n.filter(a=>a.anoAcademico===r).sort((a,o)=>a.numeroBimestre-o.numeroBimestre)}}));function rx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const nx=p.forwardRef(rx),ax=nx;function ox({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const sx=p.forwardRef(ox),lx=sx;function ix({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const cx=p.forwardRef(ix),dx=cx;function ux({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const mx=p.forwardRef(ux),fx=mx;function px({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const hx=p.forwardRef(px),wa=hx;function gx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const yx=p.forwardRef(gx),vx=yx;function xx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const wx=p.forwardRef(xx),Js=wx;function bx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Nx=p.forwardRef(bx),Ex=Nx;function Sx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Cx=p.forwardRef(Sx),kx=Cx;function Px({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const Rx=p.forwardRef(Px),Lx=Rx;function Tx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Ix=p.forwardRef(Tx),Dx=Ix;function _x({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Ax=p.forwardRef(_x),Mo=Ax;function Ox({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const jx=p.forwardRef(Ox),Yd=jx;function Ux({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Fx=p.forwardRef(Ux),_t=Fx;function Mx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const $x=p.forwardRef(Mx),Bx=$x;function zx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Hx=p.forwardRef(zx),Vx=Hx;function Wx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const qx=p.forwardRef(Wx),Zf=qx;function Qx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Gx=p.forwardRef(Qx),ni=Gx;function Kx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Yx=p.forwardRef(Kx),ai=Yx;function Jx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Zx=p.forwardRef(Jx),Xf=Zx;function Xx({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const e1=p.forwardRef(Xx),t1=e1;function r1({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const n1=p.forwardRef(r1),a1=n1;function o1({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const s1=p.forwardRef(o1),on=s1,l1=()=>{const e=zr(),t=os(),{user:r,logout:n}=Gt(),{bimestreSeleccionado:a}=jt(),[o,l]=p.useState(!1),i=async()=>{try{await n(),t("/login")}catch(h){console.error("Error en logout:",h),t("/login")}},c=()=>{l(!o)},m=(r==null?void 0:r.role)==="Maestro",f=[{path:"/dashboard",label:"Dashboard",icon:"🏠"},{path:"/usuarios",label:"Usuarios",icon:"👥"},{path:"/carga-datos",label:"Carga de Datos",icon:"📁"},{path:"/reportes",label:"Reportes",icon:"📊"}],u=zo.useMemo(()=>r?m?f:f.filter(h=>h.path!=="/usuarios"&&h.path!=="/carga-datos"):f.filter(h=>h.path==="/dashboard"||h.path==="/reportes"),[r,m]);return d(Et,{children:[s("div",{className:"bg-uc-yellow text-black py-2 px-4",children:d("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[d("div",{className:"flex items-center space-x-4",children:[s("img",{src:"/CAMPUS-VIRTUAL_blanco.png",alt:"UC Campus Virtual",className:"h-8"}),s("span",{className:"font-bold text-lg",children:"Sistema de Planificación Académica"})]}),d("div",{className:"flex items-center space-x-6",children:[a?d("div",{className:"flex items-center space-x-2 text-sm bg-black bg-opacity-10 px-3 py-1 rounded-md","data-bimestre-id":a.id,"data-bimestre-nombre":a.nombre,children:[s(wa,{className:"h-4 w-4"}),s("span",{className:"font-medium",children:a.nombre}),s("span",{className:"text-xs opacity-75",children:(()=>{const h=w=>{const[N,x,g]=w.split("-").map(v=>parseInt(v,10));return new Date(N,x-1,g)},b=h(a.fechaInicio).toLocaleDateString("es-ES",{month:"short",day:"numeric"}),y=h(a.fechaFin).toLocaleDateString("es-ES",{month:"short",day:"numeric"});return`${b} - ${y}`})()})]}):d("div",{className:"flex items-center space-x-2 text-sm bg-red-100 text-red-800 px-3 py-1 rounded-md border border-red-200",children:[s(wa,{className:"h-4 w-4"}),s("span",{className:"font-medium",children:"Sin bimestre seleccionado"}),s("span",{className:"text-xs",children:"(Requerido)"})]}),d(qs,{to:"/perfil",className:"flex items-center space-x-2 text-sm hover:underline transition-colors duration-200",children:[s(a1,{className:"h-5 w-5"}),s("span",{children:r!=null&&r.firstName?`${r.firstName} ${r.lastName}`:"Perfil"})]}),d("button",{onClick:i,className:"text-sm hover:underline flex items-center space-x-1",children:[s("span",{children:"Cerrar Sesión"}),s(lx,{className:"h-4 w-4"})]})]})]})}),d("nav",{className:"bg-uc-blue text-white shadow-lg relative z-50 w-full",children:[s("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d("div",{className:"flex justify-between items-center h-12",children:[s("div",{className:"flex items-center"}),s("div",{className:"hidden md:flex space-x-1 items-center flex-1 justify-center",children:u.map(h=>d(qs,{to:h.path,className:`px-4 py-2 text-sm font-medium transition-colors duration-200 ${e.pathname===h.path?"bg-white text-uc-blue rounded-md":"text-white hover:bg-blue-700 hover:text-white rounded-md"}`,children:[s("span",{className:"mr-1",children:h.icon}),h.label]},h.path))}),s("div",{className:"md:hidden",children:d("button",{onClick:c,className:"p-2 rounded-md text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[s("span",{className:"sr-only",children:"Abrir menú principal"}),o?s(on,{className:"h-6 w-6"}):s(fx,{className:"h-6 w-6"})]})})]})}),o&&s("div",{className:"md:hidden bg-blue-800 border-t border-blue-700",children:s("div",{className:"px-2 pt-2 pb-3 space-y-1",children:u.map(h=>d(qs,{to:h.path,className:`block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 ${e.pathname===h.path?"bg-white text-uc-blue":"text-white hover:bg-blue-700 hover:text-white"}`,onClick:()=>l(!1),children:[s("span",{className:"mr-2",children:h.icon}),h.label]},h.path))})})]})]})},i1=()=>d("div",{className:"min-h-screen bg-gray-50 flex flex-col pt-0",children:[s("header",{className:"flex-shrink-0 w-full",children:s(l1,{})}),s("main",{className:"flex-1 pt-6 sm:pt-8 lg:pt-10 px-0",children:s(Lg,{})})]}),c1=()=>{const{login:e,isAuthenticated:t,isLoading:r}=Gt(),[n,a]=p.useState({email_institucional:"",password:""}),[o,l]=p.useState(""),[i,c]=p.useState(!1);if(p.useEffect(()=>{const u=b=>{var y;console.log("LoginPage: Error no capturado detectado:",b.error),((y=b.error)==null?void 0:y.name)==="AxiosError"&&(console.log("LoginPage: AxiosError no capturado, previniendo comportamiento por defecto"),b.preventDefault())},h=b=>{var y;console.log("LoginPage: Promise rejection no capturada:",b.reason),((y=b.reason)==null?void 0:y.name)==="AxiosError"&&(console.log("LoginPage: AxiosError rejection no capturada, previniendo comportamiento por defecto"),b.preventDefault())};return window.addEventListener("error",u),window.addEventListener("unhandledrejection",h),()=>{window.removeEventListener("error",u),window.removeEventListener("unhandledrejection",h)}},[]),t)return s(Zn,{to:"/dashboard",replace:!0});const m=u=>{const{name:h,value:b}=u.target;a(y=>({...y,[h]:b})),o&&l("")};return s("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:d("div",{className:"max-w-md w-full space-y-8",children:[d("div",{children:[s("div",{className:"mx-auto h-16 w-16 bg-indigo-600 rounded-full flex items-center justify-center",children:s("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),s("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Planificación Académica"}),s("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicie sesión en su cuenta"})]}),d("form",{className:"mt-8 space-y-6",onSubmit:async u=>{var h,b;if(u.preventDefault(),console.log("LoginPage: Formulario enviado"),!n.email_institucional||!n.password){l("Por favor ingrese email y contraseña");return}try{console.log("LoginPage: Iniciando proceso de login"),c(!0),l(""),await e(n),console.log("LoginPage: Login completado exitosamente")}catch(y){console.log("LoginPage: Error capturado en catch block:",y),console.log("LoginPage: Error response status:",(h=y.response)==null?void 0:h.status),console.log("LoginPage: Error response data:",(b=y.response)==null?void 0:b.data),console.log("LoginPage: Error name:",y.name),console.log("LoginPage: Error message:",y.message),y.response?y.response.status===401?(console.log("LoginPage: Estableciendo mensaje de error 401"),l("Usuario o contraseña incorrectos")):y.response.status===403?(console.log("LoginPage: Estableciendo mensaje de error 403"),l("Usuario inactivo o sin permisos")):(console.log("LoginPage: Estableciendo mensaje de error HTTP genérico"),l(`Error del servidor: ${y.response.status}`)):y.request?(console.log("LoginPage: Error de red"),l("Error de conexión. Verifique su conexión a internet.")):(console.log("LoginPage: Error desconocido"),l("Error inesperado. Intente nuevamente.")),console.log("LoginPage: Mensaje de error establecido")}finally{console.log("LoginPage: Finalizando proceso de login, isSubmitting = false"),c(!1)}},children:[d("div",{className:"rounded-md shadow-sm -space-y-px",children:["            ",d("div",{children:[s("label",{htmlFor:"email",className:"sr-only",children:"Email"}),s("input",{id:"email",name:"email_institucional",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email",value:n.email_institucional,onChange:m,disabled:i||r})]}),d("div",{children:[s("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),s("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:n.password,onChange:m,disabled:i||r})]})]}),o&&s("div",{className:"rounded-md bg-red-50 p-4",children:d("div",{className:"flex",children:[s("div",{className:"flex-shrink-0",children:s("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),d("div",{className:"ml-3",children:[s("h3",{className:"text-sm font-medium text-red-800",children:"Error de autenticación"}),s("div",{className:"mt-2 text-sm text-red-700",children:s("p",{children:o})})]})]})}),s("div",{children:d("button",{type:"submit",disabled:i||r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[s("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:i||r?d("svg",{className:"animate-spin h-5 w-5 text-indigo-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s("svg",{className:"h-5 w-5 text-indigo-300 group-hover:text-indigo-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),i||r?"Iniciando sesión...":"Iniciar sesión"]})}),"          ",s("div",{className:"text-center",children:s("p",{className:"text-xs text-gray-500",children:"Sistema de Planificación Académica v1.0"})})]})]})})},d1=()=>{const{isAuthenticated:e}=Gt(),[t,r]=p.useState({email:"",password:""}),[n,a]=p.useState(""),[o,l]=p.useState(!1),i=f=>{Gt.setState({isAuthenticated:!0,user:f.user,permissions:f.permissions,token:f.access_token,isLoading:!1})};if(e)return s(Zn,{to:"/dashboard",replace:!0});const c=f=>{const{name:u,value:h}=f.target;r(b=>({...b,[u]:h})),n&&a("")};return s("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:d("div",{className:"max-w-md w-full space-y-6",children:[d("div",{className:"text-center",children:[s("div",{className:"mx-auto mb-6",children:s("img",{src:"/CAMPUS-VIRTUAL 2.png",alt:"DuocUC Campus Virtual",className:"mx-auto h-16 w-auto"})}),s("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Planificación Académica"}),s("p",{className:"text-sm text-gray-600",children:"Inicie sesión en su cuenta"})]}),d("form",{className:"mt-8 space-y-4 bg-white p-8 rounded-lg shadow-md",onSubmit:async f=>{if(f.preventDefault(),!t.email||!t.password){a("Por favor ingrese email y contraseña");return}l(!0),a("");try{const h=await fetch("https://duoc.duckdns.org/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email_institucional:t.email,password:t.password})});if(h.ok){const b=await h.json();localStorage.setItem("token",b.access_token),i(b),console.log("Login exitoso, estado actualizado")}else{const b=await h.json();h.status===401?a("Usuario o contraseña incorrectos"):h.status===403?a("Usuario inactivo o sin permisos"):a(`Error del servidor: ${b.message||"Intente nuevamente"}`)}}catch(u){console.error("Error de conexión:",u),a("Error de conexión. Verifique su conexión a internet.")}finally{l(!1)}},children:[d("div",{className:"space-y-4",children:[s("div",{children:s("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",placeholder:"Email",value:t.email,onChange:c,disabled:o})}),s("div",{children:s("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",placeholder:"Contraseña",value:t.password,onChange:c,disabled:o})})]}),n&&s("div",{className:"rounded-md bg-red-50 p-4",children:d("div",{className:"flex",children:[s("div",{className:"flex-shrink-0",children:s("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),d("div",{className:"ml-3",children:[s("h3",{className:"text-sm font-medium text-red-800",children:"Error de autenticación"}),s("div",{className:"mt-2 text-sm text-red-700",children:s("p",{children:n})})]})]})}),s("div",{children:d("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:["🔒 ",o?"Iniciando sesión...":"Iniciar sesión"]})})]}),s("div",{className:"mt-6 text-center",children:s("p",{className:"text-sm text-gray-600",children:"Sistema de Planificación Académica v1.0"})})]})})},u1=({onBimestreChange:e,className:t=""})=>{const{bimestres:r,bimestreSeleccionado:n,bimestreActual:a,isLoading:o,fetchBimestresActivos:l,fetchBimestreActual:i,seleccionarBimestre:c}=jt();p.useEffect(()=>{console.log("BimestreSelector - Cargando bimestres..."),l(),i()},[l,i]),p.useEffect(()=>{console.log("BimestreSelector - bimestreSeleccionado cambió:",n),console.log("BimestreSelector - bimestreActual:",a)},[n,a]);const m=h=>{const b=h.target.value?parseInt(h.target.value):null;if(!b||!r){c(null),e==null||e(null);return}const y=r.find(w=>w&&w.id===b)||null;c(y),e==null||e((y==null?void 0:y.id)||null)},f=h=>{const[b,y,w]=h.split("-").map(N=>parseInt(N,10));return new Date(b,y-1,w)},u=h=>{const b=f(h.fechaInicio).toLocaleDateString("es-ES",{month:"short",day:"numeric"}),y=f(h.fechaFin).toLocaleDateString("es-ES",{month:"short",day:"numeric"});return`${h.nombre} (${b} - ${y})`};return o?d("div",{className:`flex items-center space-x-2 ${t}`,children:[s(wa,{className:"h-5 w-5 text-gray-400"}),s("div",{className:"animate-pulse bg-gray-200 h-10 w-64 rounded-md"})]}):d("div",{className:`flex items-center space-x-2 ${t}`,children:[s(wa,{className:"h-5 w-5 text-blue-600"}),d("div",{className:"relative",children:[d("select",{value:(n==null?void 0:n.id)||"",onChange:m,className:"appearance-none bg-white border border-gray-300 rounded-md px-4 py-2 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-w-[280px]",children:["          ",s("option",{value:"",children:"Seleccionar bimestre"}),(r||[]).filter(h=>h&&h.id&&h.nombre).map(h=>d("option",{value:h.id,children:[u(h),(a==null?void 0:a.id)===h.id?" (Actual)":""]},h.id))]}),s(Ex,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),n&&s("div",{className:"text-sm text-gray-600",children:d("span",{className:"font-medium",children:[it.getDuracionDias(n.fechaInicio,n.fechaFin)," días"]})})]})},Sr={async getTeachers(e){try{const t=e?{bimestreId:e.toString()}:{};return(await z.get("/dropdown/teachers",{params:t})).data}catch(t){return console.error("Error fetching teachers:",t),[]}},async getSubjects(e){try{const t=e?{bimestreId:e.toString()}:{};return(await z.get("/dropdown/subjects",{params:t})).data}catch(t){return console.error("Error fetching subjects:",t),[]}},async getRooms(){try{return(await z.get("/dropdown/rooms")).data}catch(e){return console.error("Error fetching rooms:",e),[]}},async getPlans(e){try{const t=e?{bimestreId:e.toString()}:{};console.log("Llamando a /dropdown/plans con bimestreId:",e);const r=await z.get("/dropdown/plans",{params:t});return console.log("Respuesta de plans:",r.data),r.data}catch(t){return console.error("Error fetching plans:",t),[]}},async getLevels(e){try{const t=e?{bimestreId:e.toString()}:{};console.log("Llamando a /dropdown/levels con bimestreId:",e);const r=await z.get("/dropdown/levels",{params:t});return console.log("Respuesta de levels:",r.data),r.data}catch(t){return console.error("Error fetching levels:",t),[]}},async getPlansInicio(e){try{const t=e?{bimestreId:e.toString()}:{};console.log("Llamando a /dropdown/plans-inicio con bimestreId:",e);const r=await z.get("/dropdown/plans-inicio",{params:t});return console.log("Respuesta de plans-inicio:",r.data),r.data}catch(t){return console.error("Error fetching plans inicio:",t),[]}},async getLevelsInicio(e){try{const t=e?{bimestreId:e.toString()}:{};console.log("Llamando a /dropdown/levels-inicio con bimestreId:",e);const r=await z.get("/dropdown/levels-inicio",{params:t});return console.log("Respuesta de levels-inicio:",r.data),r.data}catch(t){return console.error("Error fetching levels inicio:",t),[]}},async getSubjectsInicio(e){try{const t=e?{bimestreId:e.toString()}:{};console.log("Llamando a /dropdown/subjects-inicio con bimestreId:",e);const r=await z.get("/dropdown/subjects-inicio",{params:t});return console.log("Respuesta de subjects-inicio:",r.data),r.data}catch(t){return console.error("Error fetching subjects inicio:",t),[]}},async getSubjectsWithPermissions(e){try{const t=e?{bimestreId:e.toString()}:{};console.log("Llamando a /dropdown/subjects-with-permissions con bimestreId:",e);const r=await z.get("/dropdown/subjects-with-permissions",{params:t});return console.log("Respuesta de subjects-with-permissions:",r.data),r.data}catch(t){return console.error("Error fetching subjects with permissions:",t),[]}},async getSubjectsInicioWithPermissions(e){try{const t=e?{bimestreId:e.toString()}:{};console.log("Llamando a /dropdown/subjects-inicio-with-permissions con bimestreId:",e);const r=await z.get("/dropdown/subjects-inicio-with-permissions",{params:t});return console.log("Respuesta de subjects-inicio-with-permissions:",r.data),r.data}catch(t){return console.error("Error fetching subjects inicio with permissions:",t),[]}}};class m1{constructor(){Vr(this,"baseUrl","/scheduling")}async getEvents(t,r){try{const n=new URLSearchParams;return t&&n.append("start_date",t),r&&n.append("end_date",r),(await z.get(`${this.baseUrl}?${n.toString()}`)).data.data||[]}catch(n){return console.error("Error fetching events:",n),[]}}async getEventsByBimestre(t){try{return(await z.get(`${this.baseUrl}/bimestre/${t}`)).data.data||[]}catch(r){return console.error("Error fetching events by bimestre:",r),[]}}async getADOLEventsByBimestre(t){try{return(await z.get(`${this.baseUrl}/adol/bimestre/${t}`)).data.data||[]}catch(r){return console.error("Error fetching ADOL events by bimestre:",r),[]}}async getOptativasEventsByBimestre(t){try{return(await z.get(`${this.baseUrl}/optativas/bimestre/${t}`)).data.data||[]}catch(r){return console.error("Error fetching optativas events by bimestre:",r),[]}}async getEventById(t){try{return(await z.get(`${this.baseUrl}/${t}`)).data.data}catch(r){console.error("Error fetching event by ID:",r);const n=this.extractErrorMessage(r);throw new Error(n)}}async createEvent(t,r){try{let n=r;if(!n){const l=document.querySelector("[data-bimestre-id]");if(l){const i=l.getAttribute("data-bimestre-id");i&&(n=parseInt(i,10))}}const a={title:t.title,start_date:`${t.startDate}T08:00:00`,end_date:`${t.endDate}T17:00:00`,teacher:t.teacher,teacher_ids:t.teacher_ids||[],subject:t.subject};return t.plan&&(a.plan=t.plan),n&&(a.bimestre_id=n),t.students&&t.students>0&&(a.students=t.students),t.horas&&t.horas>0&&(a.horas=t.horas),console.log("Frontend - Enviando evento al backend:",a),(await z.post(this.baseUrl,a)).data.data}catch(n){console.error("Error creating event:",n);const a=this.extractErrorMessage(n);throw new Error(a)}}async updateEvent(t,r,n){try{let a=n;if(!a){const i=document.querySelector("[data-bimestre-id]");if(i){const c=i.getAttribute("data-bimestre-id");c&&(a=parseInt(c,10))}}const o={title:r.title,start_date:`${r.startDate}T08:00:00`,end_date:`${r.endDate}T17:00:00`,teacher:r.teacher,teacher_ids:r.teacher_ids||[],subject:r.subject};return r.plan&&(o.plan=r.plan),a&&(o.bimestre_id=a),r.students&&r.students>0&&(o.students=r.students),r.horas&&r.horas>0&&(o.horas=r.horas),(await z.put(`${this.baseUrl}/${t}`,o)).data.data}catch(a){console.error("Error updating event:",a);const o=this.extractErrorMessage(a);throw new Error(o)}}async deleteEvent(t){try{await z.delete(`${this.baseUrl}/${t}`)}catch(r){console.error("Error deleting event:",r);const n=this.extractErrorMessage(r);throw new Error(n)}}extractErrorMessage(t){var r;if((r=t.response)!=null&&r.data){const n=t.response.data;if(n.message)return this.formatFriendlyErrorMessage(n.message);if(n.errors&&Array.isArray(n.errors)&&n.errors.length>0)return n.errors.map(a=>this.formatFriendlyErrorMessage(a)).join(", ")}return t.message?this.formatFriendlyErrorMessage(t.message):"Error desconocido al procesar la solicitud"}formatFriendlyErrorMessage(t){if(t.includes("Conflicto de horario")||t.includes("sala ya está ocupada")){const r=t.match(/sala "([^"]+)"/i)||t.match(/aula "([^"]+)"/i);return`🚫 ¡Ups! ${r?r[1]:"la sala seleccionada"} ya está reservada en ese horario.

💡 Por favor, elige otro horario o una sala diferente.`}return t.includes("fecha de fin debe ser posterior")?`📅 La fecha y hora de finalización debe ser posterior al inicio.

💡 Verifica que las fechas y horarios estén correctos.`:t.includes("requerido")||t.includes("required")?`📝 Faltan campos obligatorios por completar.

💡 Revisa que todos los campos marcados con (*) estén llenos.`:`⚠️ ${t}`}formatEventDate(t){return new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})}formatEventTime(t){return new Date(t).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}async getNextCorrelativeForSubject(t,r){try{const n=`${this.baseUrl}/next-correlative/${encodeURIComponent(t)}${r?`?bimestreId=${r}`:""}`;return(await z.get(n)).data.data.nextCorrelative}catch(n){return console.error("Error getting next correlative from backend:",n),1}}}const It=new m1;class f1{async getVacantesRequeridas(t,r,n){try{const a=new URLSearchParams;r&&a.append("bimestreId",r.toString()),n&&a.append("plan",n);const o=`/reporte-cursables/vacantes/${encodeURIComponent(t)}${a.toString()?`?${a.toString()}`:""}`;return(await z.get(o)).data}catch(a){return console.error("Error obteniendo vacantes requeridas:",a),null}}async getAllVacantesRequeridas(t){try{const r=new URLSearchParams;t&&r.append("bimestreId",t.toString());const n=`/reporte-cursables/vacantes${r.toString()?`?${r.toString()}`:""}`;return(await z.get(n)).data}catch(r){return console.error("Error obteniendo todas las vacantes requeridas:",r),[]}}async getEstadisticasVacantes(t){try{return(await z.get(`/reporte-cursables/estadisticas/${t}`)).data}catch(r){return console.error("Error obteniendo estadísticas de vacantes:",r),null}}}const p1=new f1;class h1{constructor(){Vr(this,"baseUrl","/teachers")}async getTeacherAssignedHours(t,r){try{return(await z.get(`${this.baseUrl}/assigned-hours`,{params:{teacherId:t,bimestreId:r}})).data}catch(n){throw console.error("Error fetching teacher assigned hours:",n),new Error(this.extractErrorMessage(n))}}async getMultipleTeachersAssignedHours(t,r){try{return t.length===0?{bimestreId:r,teachersHours:{}}:(await z.get(`${this.baseUrl}/multiple-assigned-hours`,{params:{teacherIds:t.join(","),bimestreId:r}})).data}catch(n){throw console.error("Error fetching multiple teachers assigned hours:",n),new Error(this.extractErrorMessage(n))}}extractErrorMessage(t){var r,n;return(n=(r=t.response)==null?void 0:r.data)!=null&&n.message?t.response.data.message:t.message?t.message:"Error al obtener las horas asignadas del docente"}}const g1=new h1;class y1{async getAsignaturas(){return(await z.get("/asignaturas")).data}async getCategorias(t){const r=t?{bimestreId:t.toString()}:{};return(await z.get("/asignaturas/categorias",{params:r})).data}async getAdolAprobados(t){const r=t?{bimestreId:t.toString()}:{};return(await z.get("/asignaturas/adol-aprobados",{params:r})).data}async getOptativosAprobados(t){const r=t?{bimestreId:t.toString()}:{};return(await z.get("/asignaturas/optativos-aprobados",{params:r})).data}}const $o=new y1,v1=({isOpen:e,onClose:t,selectedDate:r,onSave:n,isLoading:a=!1,onMultipleEventsCreated:o,currentEventType:l,editingEvent:i})=>{const{bimestreSeleccionado:c}=jt(),m=k=>{if(!k)return"";try{const ne=(Re=>new Date(Re+"T00:00:00"))(k),de=ne.getFullYear(),pe=String(ne.getMonth()+1).padStart(2,"0"),xe=String(ne.getDate()).padStart(2,"0");return`${de}-${pe}-${xe}`}catch(A){return console.error("Error al formatear fecha:",A),""}},f=()=>{if(console.log("getDefaultDates - bimestreSeleccionado:",c),c){const k=m(c.fechaInicio),A=m(c.fechaFin);return console.log("Fechas del bimestre originales:",{startDate:c.fechaInicio,endDate:c.fechaFin}),console.log("Fechas del bimestre formateadas:",{startDate:k,endDate:A}),{startDate:k,endDate:A}}return console.log("No hay bimestre seleccionado, usando fechas vacías"),{startDate:"",endDate:""}},[u,h]=p.useState(()=>{const k=f();return console.log("Inicializando formData con fechas:",k),{title:"",startDate:k.startDate,endDate:k.endDate,teacher:"",teacher_ids:[],subject:"",students:0,horas:0,tipoEvento:"continuidad"}}),[b,y]=p.useState(1),[w,N]=p.useState({}),[x,g]=p.useState([]),[v,E]=p.useState([]),[P,T]=p.useState([]),[_,j]=p.useState([]),[X,q]=p.useState([]),[re,ee]=p.useState(!1),[F,M]=p.useState(""),[Q,te]=p.useState(""),[H,R]=p.useState(""),[$,I]=p.useState(""),[K,J]=p.useState(""),[fe,C]=p.useState(""),[S,B]=p.useState(!1),[G,Z]=p.useState(!1),[se,D]=p.useState([]),[U,Y]=p.useState([]),[ce,Ee]=p.useState(!1),[le,kt]=p.useState(1),[Pt,Ut]=p.useState(null),[hs,Rn]=p.useState(!1),[V,ue]=p.useState({}),[Qe,Er]=p.useState(!1),Hr=p.useRef(null);p.useEffect(()=>{e&&Hr.current&&(setTimeout(()=>{Hr.current&&Hr.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},10),setTimeout(()=>{if(Hr.current){const k=Hr.current.getBoundingClientRect(),A=window.pageYOffset||document.documentElement.scrollTop,ne=k.top+A-window.innerHeight/2+k.height/2;window.scrollTo({top:Math.max(0,ne),behavior:"smooth"})}},100))},[e]),p.useEffect(()=>{e&&Pa()},[e]),p.useEffect(()=>{e&&(console.log("Bimestre cambió, recargando datos del dropdown...",c),Pa())},[c,e]),p.useEffect(()=>{e&&u.tipoEvento&&(u.tipoEvento==="optativo"||u.tipoEvento==="adol"||u.tipoEvento==="inicio")&&(console.log("Tipo de evento cambió a tipo específico, recargando datos del dropdown...",u.tipoEvento),setTimeout(()=>{Pa()},100))},[u.tipoEvento,e]),p.useEffect(()=>{console.log("useEffect bimestre - bimestreSeleccionado:",c),console.log("useEffect bimestre - editingEvent:",i),console.log("useEffect bimestre - selectedDate:",r),console.log("useEffect bimestre - isOpen:",e),e&&c&&!i&&!r&&(console.log("Actualizando fechas del formulario con bimestre:",{startDate:c.fechaInicio,endDate:c.fechaFin}),h(k=>{console.log("Estado anterior del formulario:",k);const A={...k,startDate:c.fechaInicio,endDate:c.fechaFin};return console.log("Nuevo estado del formulario:",A),A}))},[c,i,r,e]),p.useEffect(()=>{e&&!i&&(console.log("Modal abierto - reseteando filtros"),R(""),I(""),te(""),J(""),C(""),M(""),B(!1),Z(!1))},[e,i]);const Pa=async()=>{ee(!0),console.log("Iniciando carga de datos de dropdown...");const k=c==null?void 0:c.id;if(console.log("Cargando datos para bimestre_id:",k,"Tipo de evento:",u.tipoEvento),!k){console.log("No hay bimestre seleccionado - dejando listas vacías"),g([]),T([]),E([]),j([]),q([]),D([]),Y([]),ee(!1);return}try{console.log("Llamando a las APIs del dropdownService...");const A=await Sr.getTeachers(k);let ne,de,pe;if(u.tipoEvento==="inicio")console.log("Cargando datos de INICIO desde vacantes_inicio_permanente con permisos..."),[ne,de,pe]=await Promise.all([Sr.getSubjectsInicioWithPermissions(k),Sr.getPlansInicio(k),Sr.getLevelsInicio(k)]);else if(u.tipoEvento==="adol")console.log("Cargando datos de ADOL desde adol_aprobados..."),ne=(await $o.getAdolAprobados(k)).map((Re,tt)=>({id:tt+1,code:Re.sigla,name:Re.descripcion,category:"ADOL",acronym:Re.sigla,course:Re.descripcion,plan_code:"",level:""})),de=[],pe=[];else if(u.tipoEvento==="optativo"){console.log("Cargando datos de OPTATIVOS desde asignaturas_optativas_aprobadas...");const xe=await $o.getOptativosAprobados(k);ne=xe.map((Se,Jt)=>({id:Jt+1,code:Se.asignatura,name:Se.descripcion_asignatura,category:"OPTATIVO",acronym:Se.asignatura,course:Se.descripcion_asignatura,plan_code:Se.plan,level:Se.nivel}));const Re=[...new Set(xe.map(Se=>Se.plan))].map(Se=>({value:Se,label:Se})),tt=[...new Set(xe.map(Se=>Se.nivel))].map(Se=>({value:Se,label:Se}));de=Re,pe=tt}else console.log("Cargando datos de CONTINUIDAD desde academic_structures con permisos..."),[ne,de,pe]=await Promise.all([Sr.getSubjectsWithPermissions(k),Sr.getPlans(k),Sr.getLevels(k)]);console.log("Datos recibidos para bimestre",k,"tipo",u.tipoEvento,":",{teachers:A,subjects:ne,plans:de,levels:pe}),g(A),T(ne),E(ne),j(de),q(pe),D(de),Y(pe)}catch(A){console.error("Error loading dropdown data:",A)}finally{ee(!1)}},gs=(k,A)=>{if(!k)return"";const ne=v.find(xe=>xe.acronym===k),de=ne?`${ne.acronym} - ${ne.course}`:k,pe=A.toString().padStart(3,"0");return`${de} - ${pe}`};p.useEffect(()=>{(async()=>{if(u.subject&&!i&&(c!=null&&c.id))try{const A=await It.getNextCorrelativeForSubject(u.subject,c.id),ne=gs(u.subject,A);h(de=>({...de,title:ne})),y(A)}catch(A){console.error("Error getting next correlative:",A);const ne=gs(u.subject,1);h(de=>({...de,title:ne})),y(1)}})()},[u.subject,c==null?void 0:c.id,i]),p.useEffect(()=>{(async()=>{if(u.subject&&(c!=null&&c.id)){Rn(!0);try{const A=await p1.getVacantesRequeridas(u.subject,c.id,H);Ut(A)}catch(A){console.error("Error cargando vacantes requeridas:",A),Ut(null)}finally{Rn(!1)}}else Ut(null)})()},[u.subject,c==null?void 0:c.id,H]),p.useEffect(()=>{(async()=>{if(u.teacher_ids&&u.teacher_ids.length>0&&(c!=null&&c.id)){Er(!0);try{const A=await g1.getMultipleTeachersAssignedHours(u.teacher_ids,c.id);ue(A.teachersHours)}catch(A){console.error("Error cargando horas asignadas de docentes:",A),ue({})}finally{Er(!1)}}else ue({})})()},[u.teacher_ids,c==null?void 0:c.id]),p.useEffect(()=>{let k=P;H&&(k=k.filter(A=>A.plan_code===H)),$&&(k=k.filter(A=>{const ne=A.level;return typeof ne=="number"?ne===parseInt($):typeof ne=="string"?ne===$||ne===$.toString():!1})),console.log("DEBUG: Filtrado de asignaturas:",{selectedPlan:H,selectedLevel:$,totalSubjects:P.length,filteredCount:k.length,tipoEvento:u.tipoEvento}),E(k),u.subject&&!k.find(A=>A.acronym===u.subject)&&h(A=>({...A,subject:"",title:""}))},[H,$,P,u.subject,u.tipoEvento]),p.useEffect(()=>{if(!K||K.toString().trim()==="")D(_),R("");else{const k=_.filter(A=>A.label.toString().toLowerCase().includes(K.toString().toLowerCase()));D(k)}},[K,_]),p.useEffect(()=>{if(!fe||fe.toString().trim()==="")Y(X),I("");else{const k=X.filter(A=>A.label.toString().toLowerCase().includes(fe.toString().toLowerCase()));Y(k)}},[fe,X]),p.useEffect(()=>{e&&u.tipoEvento&&(console.log("Tipo de evento cambió a:",u.tipoEvento,"- Recargando datos..."),Pa(),i||(R(""),I(""),h(k=>({...k,subject:"",title:""}))))},[u.tipoEvento,i]),p.useEffect(()=>{var k,A,ne;console.log("🔄 useEffect restaurar término - Condiciones:",{isOpen:e,hasEditingEvent:!!i,isLoadingDropdowns:re,hasSubject:!!((k=i==null?void 0:i.extendedProps)!=null&&k.subject),subjectValue:(A=i==null?void 0:i.extendedProps)==null?void 0:A.subject}),e&&i&&!re&&((ne=i.extendedProps)!=null&&ne.subject)&&(console.log("🔤 Restaurando término de búsqueda después de cargar dropdowns:",i.extendedProps.subject),console.log("📊 Estado actual:",{formDataSubject:u.subject,subjectsLength:v.length,isLoadingDropdowns:re,currentSearchTerm:Q}),te(i.extendedProps.subject),console.log("✅ Término de búsqueda establecido a:",i.extendedProps.subject))},[e,i,re,u.subject,v.length]),p.useEffect(()=>{i&&console.log("🎯 FormData.subject cambió:",{subject:u.subject,subjectSearchTerm:Q,subjectsAvailable:v.length,matchingSubjects:v.filter(k=>k.acronym===u.subject)})},[u.subject,Q,v,i]);const np=k=>{var ne,de;if(console.log("DEBUG determineEventType - Entrada:",{currentEventType:l,eventTitle:k.title,backgroundColor:k.backgroundColor,extendedProps:k.extendedProps}),l)switch(console.log("DEBUG determineEventType - Usando currentEventType:",l),l){case"asignaturas":return"continuidad";case"adol":return"adol";case"optativas":return"optativo"}if(k.title&&k.title.toUpperCase().startsWith("ADOL"))return console.log("DEBUG determineEventType - Detectado como ADOL por título"),"adol";if(k.backgroundColor==="#10B981")return console.log("DEBUG determineEventType - Detectado como optativo por backgroundColor"),"optativo";if((ne=k.extendedProps)!=null&&ne.plan)return console.log("DEBUG determineEventType - Detectado como optativo por plan en extendedProps"),"optativo";if(((de=k.extendedProps)==null?void 0:de.type)==="optativo")return console.log("DEBUG determineEventType - Detectado como optativo por type explícito"),"optativo";const A=/^[A-Z]{3}\d{3}\s*-/.test(k.title);return console.log("DEBUG determineEventType - Patrón de título optativo:",{title:k.title,matches:A}),k.title&&A?(console.log("DEBUG determineEventType - Detectado como optativo por patrón de título"),"optativo"):(console.log("DEBUG determineEventType - Usando valor por defecto: continuidad"),"continuidad")};p.useEffect(()=>{var k,A,ne,de,pe,xe,Re,tt,Se,Jt,mc,fc;if(e)if(i){const Ft=ip=>new Date(ip+"T00:00:00"),vs=Ft(i.start.split("T")[0]),sp=Ft(i.end.split("T")[0]),pc=i.title.match(/ - (\d{3})$/),lp=pc?parseInt(pc[1]):1,Ra=np(i);console.log("🔍 Evento detectado:",{title:i.title,backgroundColor:i.backgroundColor,extendedProps:i.extendedProps,tipoEventoDeterminado:Ra}),console.log("📝 Configurando formData con:",{title:i.title,subject:(k=i.extendedProps)==null?void 0:k.subject,teacher:(A=i.extendedProps)==null?void 0:A.teacher,tipoEvento:Ra});const hc={title:i.title,startDate:vs.toISOString().split("T")[0],endDate:sp.toISOString().split("T")[0],teacher:((ne=i.extendedProps)==null?void 0:ne.teacher)||"",teacher_ids:((de=i.extendedProps)==null?void 0:de.teacher_ids)||[],subject:((pe=i.extendedProps)==null?void 0:pe.subject)||"",students:((xe=i.extendedProps)==null?void 0:xe.students)||0,horas:((Re=i.extendedProps)==null?void 0:Re.horas)||0,tipoEvento:Ra};console.log("✅ FormData establecido:",hc),h(hc),y(lp),Ra==="optativo"&&(console.log("📋 Configurando evento optativo:",{plan:(tt=i.extendedProps)==null?void 0:tt.plan,level:(Se=i.extendedProps)==null?void 0:Se.level,subject:(Jt=i.extendedProps)==null?void 0:Jt.subject}),(mc=i.extendedProps)!=null&&mc.plan&&(R(i.extendedProps.plan),J(i.extendedProps.plan)),(fc=i.extendedProps)!=null&&fc.level&&(I(i.extendedProps.level.toString()),C(i.extendedProps.level.toString())))}else if(r){const Ft=r.toISOString().split("T")[0];h(vs=>({...vs,startDate:Ft,endDate:Ft}))}else setTimeout(()=>{const Ft=f();console.log("Inicializando formulario con fechas por defecto (setTimeout):",Ft),h({title:"",startDate:Ft.startDate,endDate:Ft.endDate,teacher:"",teacher_ids:[],subject:"",students:0,horas:0,tipoEvento:"continuidad"})},100)},[e,r,i]);const ap=async k=>{k.preventDefault();const A={};!i&&(!u.title||!u.title.trim())&&(A.title="El título es requerido"),(!u.subject||!u.subject.trim())&&(A.subject="La asignatura es requerida"),u.startDate||(A.startDate="La fecha de inicio es requerida"),u.endDate||(A.endDate="La fecha de fin es requerida"),u.startDate&&u.endDate&&u.startDate>u.endDate&&(A.endDate="La fecha de fin debe ser posterior a la fecha de inicio"),ce&&(le<1||le>20)&&(A.eventQuantity="La cantidad debe estar entre 1 y 20 eventos"),N(A),Object.keys(A).length===0&&(ce&&le>1?await op():n({...u,plan:H}))},op=async()=>{try{console.log(`Iniciando creación de ${le} eventos múltiples...`);let k=0;for(let A=0;A<le;A++){const ne=await It.getNextCorrelativeForSubject(u.subject,c==null?void 0:c.id),de=gs(u.subject,ne),pe={...u,title:de,plan:H};console.log(`🚀 Creando evento ${A+1}/${le}:`,{title:de,correlativo:ne,startDate:pe.startDate,endDate:pe.endDate,subject:pe.subject});try{const xe=await It.createEvent(pe);k++,console.log(`✅ Evento ${A+1} creado exitosamente:`,{id:xe.id,title:xe.title,start:xe.start,end:xe.end}),A<le-1&&(console.log("Esperando 200ms antes del siguiente evento..."),await new Promise(Re=>setTimeout(Re,200)))}catch(xe){console.error(`Error creando evento ${A+1}:`,xe)}}console.log(`${k}/${le} eventos creados exitosamente. Cerrando modal...`),ys(),setTimeout(async()=>{console.log("Notificando al componente padre para recargar eventos..."),o&&await o()},1e3)}catch(k){throw console.error("Error creating multiple events:",k),k}},ys=()=>{const k=f();console.log("handleClose - reseteando formulario con fechas:",k),h({title:"",startDate:k.startDate,endDate:k.endDate,teacher:"",teacher_ids:[],subject:"",students:0,horas:0,tipoEvento:"continuidad"}),N({}),y(1),M(""),te(""),J(""),C(""),R(""),I(""),B(!1),Z(!1),Ee(!1),kt(1),Ut(null),Rn(!1),ue({}),Er(!1),t()};return e?s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d("div",{ref:Hr,className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s("div",{className:"p-6 border-b border-gray-200",children:d("div",{className:"flex items-center justify-between",children:["            ",s("h2",{className:"text-xl font-semibold text-gray-900",children:i?"Editar Evento":"Crear Nuevo Evento"}),s("button",{onClick:ys,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]})}),d("form",{onSubmit:ap,className:"p-6 space-y-6",children:[d("div",{children:[d("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i?"Título del Evento (Solo lectura)":"Título del Evento (Generado automáticamente)"," *"]}),i?s("div",{className:"w-full px-3 py-2 border rounded-md bg-gray-50 text-gray-700 border-gray-200",children:i.title}):s("div",{className:`w-full px-3 py-2 border rounded-md bg-gray-50 text-gray-700 ${w.title?"border-red-500":"border-gray-200"}`,children:u.title||"Selecciona una asignatura para generar el título"}),w.title&&s("p",{className:"text-red-500 text-sm mt-1",children:w.title}),s("p",{className:"text-gray-500 text-sm mt-1",children:i?"El título no se puede modificar al editar un evento existente":"El título se genera automáticamente basado en la asignatura seleccionada"})]}),d("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Inicio *"}),s("input",{type:"date",value:u.startDate,onChange:k=>h(A=>({...A,startDate:k.target.value})),disabled:!0,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${w.startDate?"border-red-500":"border-gray-300"} bg-gray-100 text-gray-500 cursor-not-allowed`}),w.startDate&&s("p",{className:"text-red-500 text-sm mt-1",children:w.startDate}),s("p",{className:"text-gray-500 text-xs mt-1",children:"Fecha establecida automáticamente según el bimestre"})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Fin *"}),s("input",{type:"date",value:u.endDate,onChange:k=>h(A=>({...A,endDate:k.target.value})),disabled:!0,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${w.endDate?"border-red-500":"border-gray-300"} bg-gray-100 text-gray-500 cursor-not-allowed`}),w.endDate&&s("p",{className:"text-red-500 text-sm mt-1",children:w.endDate}),s("p",{className:"text-gray-500 text-xs mt-1",children:"Fecha establecida automáticamente según el bimestre"})]})]}),!i&&d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Evento *"}),d("div",{className:"flex flex-wrap gap-4",children:[d("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s("input",{type:"radio",name:"tipoEvento",value:"inicio",checked:u.tipoEvento==="inicio",onChange:k=>{h(A=>({...A,tipoEvento:"inicio"}))},className:"border-gray-300 text-blue-600 focus:ring-blue-500"}),s("span",{className:"text-sm text-gray-700",children:"Inicio"})]}),d("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s("input",{type:"radio",name:"tipoEvento",value:"continuidad",checked:u.tipoEvento==="continuidad",onChange:k=>{h(A=>({...A,tipoEvento:"continuidad"}))},className:"border-gray-300 text-blue-600 focus:ring-blue-500"}),s("span",{className:"text-sm text-gray-700",children:"Continuidad"})]}),d("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s("input",{type:"radio",name:"tipoEvento",value:"adol",checked:u.tipoEvento==="adol",onChange:k=>{h(A=>({...A,tipoEvento:"adol"}))},className:"border-gray-300 text-blue-600 focus:ring-blue-500"}),s("span",{className:"text-sm text-gray-700",children:"ADOL"})]}),d("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s("input",{type:"radio",name:"tipoEvento",value:"optativo",checked:u.tipoEvento==="optativo",onChange:k=>{h(A=>({...A,tipoEvento:"optativo"}))},className:"border-gray-300 text-blue-600 focus:ring-blue-500"}),s("span",{className:"text-sm text-gray-700",children:"Optativos"})]})]})]}),!i&&d("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d("div",{className:"relative",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plan"}),s("input",{type:"text",value:K,onChange:k=>{J(k.target.value),B(!0)},onFocus:()=>B(!0),onBlur:()=>setTimeout(()=>B(!1),200),placeholder:"Buscar plan...",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${u.tipoEvento==="adol"||re?"bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200":"border-gray-300"}`,disabled:u.tipoEvento==="adol"||re}),S&&se.length>0&&u.tipoEvento!=="adol"&&s("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:se.map(k=>s("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{R(k.value),J(k.label),B(!1)},children:k.label},k.value))})]}),d("div",{className:"relative",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nivel"}),s("input",{type:"text",value:fe,onChange:k=>{C(k.target.value),Z(!0)},onFocus:()=>Z(!0),onBlur:()=>setTimeout(()=>Z(!1),200),placeholder:u.tipoEvento==="adol"||H?"Buscar nivel...":"Seleccione un plan primero",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${u.tipoEvento==="adol"||re||!H&&u.tipoEvento!=="adol"?"bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200":"border-gray-300"}`,disabled:u.tipoEvento==="adol"||re||!H&&u.tipoEvento!=="adol"}),G&&U.length>0&&u.tipoEvento!=="adol"&&H&&s("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:U.map(k=>s("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{I(k.value),C(k.label),Z(!1)},children:k.label},k.value))})]})]}),!i&&d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asignatura *"}),s("div",{className:"mb-3",children:s("input",{type:"text",placeholder:u.tipoEvento==="adol"||H?"Buscar asignatura por nombre o código...":"Seleccione un plan primero",value:Q,onChange:k=>te(k.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm ${re||!H&&u.tipoEvento!=="adol"?"bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200":"border-gray-300"}`,disabled:re||!H&&u.tipoEvento!=="adol"})}),s("div",{className:`border rounded-md p-3 max-h-40 overflow-y-auto ${!H&&u.tipoEvento!=="adol"?"border-gray-200 bg-gray-50":"border-gray-300"}`,children:re?s("p",{className:"text-gray-500 text-sm",children:"Cargando asignaturas..."}):!H&&u.tipoEvento!=="adol"?s("p",{className:"text-gray-400 text-sm italic",children:"Seleccione un plan para ver las asignaturas disponibles"}):v.length===0?s("p",{className:"text-gray-500 text-sm",children:"No hay asignaturas disponibles"}):d("div",{className:"space-y-2",children:[v.filter(k=>{const A=Q.toLowerCase();return k.name.toLowerCase().includes(A)||k.acronym.toLowerCase().includes(A)||k.course.toLowerCase().includes(A)}).map(k=>d("label",{className:`flex items-center space-x-2 p-1 rounded ${!H&&u.tipoEvento!=="adol"?"cursor-not-allowed opacity-50":"cursor-pointer hover:bg-gray-50"}`,children:[s("input",{type:"radio",name:"subject",checked:u.subject===k.acronym,onChange:()=>{(H||u.tipoEvento==="adol")&&h(A=>({...A,subject:k.acronym}))},className:"text-blue-600 focus:ring-blue-500",disabled:!H&&u.tipoEvento!=="adol"}),d("span",{className:`text-sm ${!H&&u.tipoEvento!=="adol"?"text-gray-400":"text-gray-700"}`,children:[k.acronym," - ",k.course]})]},k.id)),v.filter(k=>{const A=Q.toLowerCase();return k.name.toLowerCase().includes(A)||k.acronym.toLowerCase().includes(A)||k.course.toLowerCase().includes(A)}).length===0&&Q&&s("p",{className:"text-gray-500 text-sm italic",children:"No se encontraron asignaturas que coincidan con la búsqueda"})]})}),u.subject&&d("div",{className:"mt-2 space-y-2",children:[d("p",{className:"text-sm text-gray-600",children:["Asignatura seleccionada: ",s("span",{className:"font-medium",children:(()=>{const k=v.find(A=>A.acronym===u.subject);return k?`${k.acronym} - ${k.course}`:u.subject})()})]}),s("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:d("div",{className:"flex items-center space-x-2",children:[s("div",{className:"flex-shrink-0",children:s("svg",{className:"h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s("div",{className:"flex-1",children:hs?s("p",{className:"text-sm text-blue-700",children:"Cargando información de vacantes..."}):Pt?d("div",{children:[d("p",{className:"text-sm font-medium text-blue-800",children:["Total de vacantes requeridas: ",s("span",{className:"font-bold",children:Pt.total_vacantes})]}),Pt.plan&&d("p",{className:"text-xs text-blue-600",children:["Plan: ",Pt.plan," | Nivel: ",Pt.nivel]})]}):s("p",{className:"text-sm text-blue-700",children:"No se encontró información de vacantes para esta asignatura"})})]})})]})]}),s("div",{children:d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Docentes"}),s("div",{className:"mb-3",children:s("input",{type:"text",placeholder:"Buscar docente por nombre o ID...",value:F,onChange:k=>M(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:re})}),s("div",{className:"border border-gray-300 rounded-md p-3 max-h-40 overflow-y-auto",children:re?s("p",{className:"text-gray-500 text-sm",children:"Cargando docentes..."}):x.length===0?s("p",{className:"text-gray-500 text-sm",children:"No hay docentes disponibles"}):d("div",{className:"space-y-2",children:[x.filter(k=>{const A=F.toLowerCase();return k.name.toLowerCase().includes(A)||k.id.toString().toLowerCase().includes(A)||k.id_docente&&k.id_docente.toLowerCase().includes(A)}).map(k=>{var A;return d("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[s("input",{type:"checkbox",checked:((A=u.teacher_ids)==null?void 0:A.includes(k.id))||!1,onChange:ne=>{const de=ne.target.checked;h(pe=>{var Se;const xe=pe.teacher_ids||[],Re=de?[...xe,k.id]:xe.filter(Jt=>Jt!==k.id),tt=Re.length>0&&((Se=x.find(Jt=>Jt.id===Re[0]))==null?void 0:Se.name)||"";return{...pe,teacher_ids:Re,teacher:tt}})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),d("span",{className:"text-sm text-gray-700",children:["ID: ",k.id_docente||k.id," - ",k.name]})]},k.id)}),x.filter(k=>{const A=F.toLowerCase();return k.name.toLowerCase().includes(A)||k.id.toString().toLowerCase().includes(A)||k.id_docente&&k.id_docente.toLowerCase().includes(A)}).length===0&&F&&s("p",{className:"text-gray-500 text-sm italic",children:"No se encontraron docentes que coincidan con la búsqueda"})]})}),u.teacher_ids&&u.teacher_ids.length>0&&d("div",{className:"mt-2",children:[d("p",{className:"text-sm text-gray-600",children:[u.teacher_ids.length," docente(s) seleccionado(s)"]}),s("div",{className:"space-y-2 mt-2",children:u.teacher_ids.map(k=>{const A=x.find(de=>de.id===k),ne=V[k]||0;return A?d("div",{className:"flex items-center justify-between p-2 bg-blue-50 border border-blue-200 rounded-md",children:[d("div",{className:"flex-1",children:[d("div",{className:"flex items-center space-x-2",children:[d("span",{className:"text-xs text-blue-600",children:["ID: ",A.id_docente||A.id]}),s("span",{className:"text-sm font-medium text-blue-800",children:A.name})]}),s("div",{className:"flex items-center space-x-2 mt-1",children:d("div",{className:"flex items-center space-x-1",children:[s("svg",{className:"h-3 w-3 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Qe?s("span",{className:"text-xs text-blue-600",children:"Cargando horas..."}):d("span",{className:"text-xs text-blue-600",children:[ne," horas asignadas en este bimestre"]})]})})]}),s("button",{type:"button",onClick:()=>{h(de=>{var Re;const pe=(de.teacher_ids||[]).filter(tt=>tt!==k),xe=pe.length>0&&((Re=x.find(tt=>tt.id===pe[0]))==null?void 0:Re.name)||"";return{...de,teacher_ids:pe,teacher:xe}})},className:"ml-2 text-blue-600 hover:text-blue-800 p-1",title:"Remover docente",children:s("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},k):null})})]})]})}),d("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número de Estudiantes por Evento"}),s("input",{type:"number",value:u.students||"",onChange:k=>h(A=>({...A,students:parseInt(k.target.value)||0})),disabled:u.tipoEvento==="adol",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${u.tipoEvento==="adol"?"bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200":"border-gray-300"}`,placeholder:"0",min:"0"})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cantidad de Horas"}),s("input",{type:"number",value:u.horas||"",onChange:k=>h(A=>({...A,horas:parseInt(k.target.value)||0})),disabled:u.tipoEvento!=="adol",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${u.tipoEvento!=="adol"?"bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200":"border-gray-300"}`,placeholder:"0",min:"0"}),u.tipoEvento!=="adol"&&s("p",{className:"text-gray-500 text-xs mt-1",children:"Solo disponible para eventos tipo ADOL"})]})]}),!i&&d("div",{className:"border-t pt-4",children:[d("div",{className:"flex items-center mb-4",children:[s("input",{type:"checkbox",id:"enableMultipleEvents",checked:ce,onChange:k=>{Ee(k.target.checked),k.target.checked||kt(1)},className:"mr-2"}),s("label",{htmlFor:"enableMultipleEvents",className:"text-sm font-medium text-gray-700",children:"Crear múltiples eventos de la misma asignatura"})]}),ce&&s("p",{className:"text-sm text-red-500 mt-2",children:"Se crearán múltiples eventos idénticos."}),ce&&s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cantidad de eventos a crear"}),s("input",{type:"number",value:le,onChange:k=>kt(parseInt(k.target.value)||1),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1",min:"1",max:"20"}),w.eventQuantity&&s("p",{className:"text-red-500 text-sm mt-1",children:w.eventQuantity}),s("p",{className:"text-gray-500 text-xs mt-1",children:"Los eventos se crearán con correlativos incrementales automáticamente"})]})})]}),d("div",{className:"flex justify-end space-x-3 pt-4",children:[s("button",{type:"button",onClick:ys,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:a,children:"Cancelar"}),s("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:a?d(Et,{children:[s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),i?"Actualizando...":ce&&le>1?`Creando ${le} eventos...`:"Guardando..."]}):i?"Actualizar Evento":ce&&le>1?`Crear ${le} Eventos`:"Crear Evento"})]})]})]})}):null},x1=({isOpen:e,onClose:t})=>{const{bimestres:r,isLoading:n,error:a,fetchBimestres:o,crearBimestre:l,actualizarBimestre:i,eliminarBimestre:c,eliminarBimestreConEventos:m,verificarDependencias:f,clearError:u}=jt(),[h,b]=p.useState({nombre:`Bimestre ${new Date().getFullYear()} 1`,fechaInicio:"",fechaFin:"",fechaPago1Inicio:"",fechaPago1Fin:"",fechaPago2Inicio:"",fechaPago2Fin:"",anoAcademico:new Date().getFullYear(),numeroBimestre:1,descripcion:"",factor:void 0}),[y,w]=p.useState({activo:!1,bimestre:null}),[N,x]=p.useState(null),[g,v]=p.useState({bimestreId:null,eventCount:0,tables:[]}),[E,P]=p.useState(!1),[T,_]=p.useState({mostrar:!1,mensaje:""}),[j,X]=p.useState({rangoPago1:"",rangoPago2:""}),[q,re]=p.useState(!1),[ee,F]=p.useState(null),[M,Q]=p.useState({mostrar:!1,exito:!1,mensaje:""});p.useEffect(()=>{e&&(o(),u())},[e,o,u]);const te=D=>{const{name:U,value:Y}=D.target;let ce=Y;U==="anoAcademico"||U==="numeroBimestre"?ce=parseInt(Y):U==="factor"&&(ce=Y===""?void 0:parseFloat(Y));const Ee={...h,[U]:ce};if(U==="anoAcademico"||U==="numeroBimestre"){const le=U==="anoAcademico"?parseInt(Y):h.anoAcademico,kt=U==="numeroBimestre"?parseInt(Y):h.numeroBimestre;Ee.nombre=`Bimestre ${le} ${kt}`}b(Ee),(U==="fechaInicio"||U==="fechaFin"||U==="anoAcademico")&&H(Ee),U.includes("fechaPago")&&R(Ee)},H=D=>{var ce;if(!D.fechaInicio||!D.fechaFin||!D.anoAcademico){_({mostrar:!1,mensaje:""});return}if(new Date(D.fechaInicio)>=new Date(D.fechaFin)){_({mostrar:!0,mensaje:"La fecha de inicio debe ser anterior a la fecha de fin"});return}const U=y.activo?(ce=y.bimestre)==null?void 0:ce.id:void 0,Y=it.validarSolapamientoFechas(D.fechaInicio,D.fechaFin,D.anoAcademico,r,U);if(Y.hasOverlap&&Y.conflictingBimestre){const Ee=I(Y.conflictingBimestre.fechaInicio).toLocaleDateString("es-ES"),le=I(Y.conflictingBimestre.fechaFin).toLocaleDateString("es-ES");_({mostrar:!0,mensaje:`Las fechas se solapan con "${Y.conflictingBimestre.nombre}" (${Ee} - ${le})`,bimestreConflicto:Y.conflictingBimestre})}else _({mostrar:!1,mensaje:""})},R=D=>{const U={rangoPago1:"",rangoPago2:""};!D.fechaPago1Inicio||!D.fechaPago1Fin?U.rangoPago1="Las fechas de pago 1 (inicio y fin) son obligatorias":new Date(D.fechaPago1Inicio)>new Date(D.fechaPago1Fin)&&(U.rangoPago1="La fecha de inicio debe ser anterior o igual a la fecha de fin"),!D.fechaPago2Inicio||!D.fechaPago2Fin?U.rangoPago2="Las fechas de pago 2 (inicio y fin) son obligatorias":new Date(D.fechaPago2Inicio)>new Date(D.fechaPago2Fin)&&(U.rangoPago2="La fecha de inicio debe ser anterior o igual a la fecha de fin"),X(U)},$=async D=>{if(D.preventDefault(),R(h),!(T.mostrar||j.rangoPago1||j.rangoPago2))try{u(),y.activo&&y.bimestre?(await i(y.bimestre.id,h),w({activo:!1,bimestre:null})):await l(h);const U=new Date().getFullYear();b({nombre:`Bimestre ${U} 1`,fechaInicio:"",fechaFin:"",fechaPago1Inicio:"",fechaPago1Fin:"",fechaPago2Inicio:"",fechaPago2Fin:"",anoAcademico:U,numeroBimestre:1,descripcion:"",factor:void 0}),_({mostrar:!1,mensaje:""})}catch(U){console.error("Error al procesar bimestre:",U)}},I=D=>{const[U,Y,ce]=D.split("-").map(Ee=>parseInt(Ee,10));return new Date(U,Y-1,ce)},K=D=>{if(!D)return"";try{return I(D).toISOString().split("T")[0]}catch(U){return console.error("Error al formatear fecha para input:",U),""}},J=D=>{b({nombre:`Bimestre ${D.anoAcademico} ${D.numeroBimestre}`,fechaInicio:K(D.fechaInicio),fechaFin:K(D.fechaFin),fechaPago1Inicio:K(D.fechaPago1Inicio),fechaPago1Fin:K(D.fechaPago1Fin),fechaPago2Inicio:K(D.fechaPago2Inicio),fechaPago2Fin:K(D.fechaPago2Fin),anoAcademico:D.anoAcademico,numeroBimestre:D.numeroBimestre,descripcion:D.descripcion||"",factor:D.factor}),w({activo:!0,bimestre:D})},fe=()=>{w({activo:!1,bimestre:null});const D=new Date().getFullYear();b({nombre:`Bimestre ${D} 1`,fechaInicio:"",fechaFin:"",fechaPago1Inicio:"",fechaPago1Fin:"",fechaPago2Inicio:"",fechaPago2Fin:"",anoAcademico:D,numeroBimestre:1,descripcion:"",factor:void 0}),_({mostrar:!1,mensaje:""}),X({rangoPago1:"",rangoPago2:""})},C=async D=>{try{P(!0),u();const U=await f(D);U.hasEvents?(v({bimestreId:D,eventCount:U.eventCount,tables:U.tables}),x(null)):(await c(D),x(null))}catch(U){console.error("Error al verificar dependencias:",U)}finally{P(!1)}},S=async()=>{if(g.bimestreId)try{u(),await m(g.bimestreId),v({bimestreId:null,eventCount:0,tables:[]})}catch(D){console.error("Error al eliminar bimestre con eventos:",D)}},B=()=>{v({bimestreId:null,eventCount:0,tables:[]})},G=D=>{var Y;const U=(Y=D.target.files)==null?void 0:Y[0];if(U){if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(U.type)){Q({mostrar:!0,exito:!1,mensaje:"Formato de archivo no válido. Solo se permiten archivos Excel (.xlsx, .xls)"});return}F(U),Q({mostrar:!1,exito:!1,mensaje:""})}},Z=async()=>{var D,U;if(!ee){Q({mostrar:!0,exito:!1,mensaje:"Debe seleccionar un archivo Excel"});return}re(!0),Q({mostrar:!1,exito:!1,mensaje:""});try{const Y=await it.cargaMasiva(ee),ce=(Y==null?void 0:Y.bimestresCreados)||0,Ee=(Y==null?void 0:Y.años)||[];Q({mostrar:!0,exito:!0,mensaje:`Se cargaron exitosamente ${ce} bimestres${Ee.length>0?` para los años: ${Ee.join(", ")}`:""}`}),F(null);const le=document.getElementById("archivo-excel");le&&(le.value=""),await o()}catch(Y){console.error("Error en carga masiva:",Y);let ce="Error en la carga masiva",Ee=null;if((U=(D=Y.response)==null?void 0:D.data)!=null&&U.message){const le=Y.response.data.message;le.includes("Ya existen bimestres para el año académico")?ce=le:le.includes("El archivo debe contener exactamente 5 bimestres")?ce="📋 El archivo Excel debe contener exactamente 5 bimestres. Por favor, verifique que su archivo tenga la estructura correcta.":le.includes("Encabezado incorrecto")?ce="📊 El formato del archivo Excel no es correcto. Por favor, descargue la plantilla y asegúrese de usar los encabezados exactos.":le.includes("Formato de fecha inválido")?ce="📅 Hay fechas con formato incorrecto en el archivo. Use el formato DD-MM-YYYY (ejemplo: 15-03-2025).":ce=le,le.includes("Ya existen bimestres para el año académico")||(Ee=Y.response.data.errors)}else Y.message&&(ce=Y.message);Q({mostrar:!0,exito:!1,mensaje:ce,detalles:Ee})}finally{re(!1)}},se=()=>{const D=document.createElement("a");D.href="/templates/plantilla_bimestres.xlsx",D.download="plantilla_bimestres.xlsx",D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)};return e?d("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[d("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[d("div",{className:"flex items-center justify-between p-6 border-b",children:[s("h2",{className:"text-xl font-semibold text-gray-900",children:"Configuración de Bimestres"}),s("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s(on,{className:"h-6 w-6"})})]}),d("div",{className:"p-6 space-y-8",children:[a&&s("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s("p",{className:"text-red-800",children:a})}),d("div",{className:"border rounded-lg p-6 bg-blue-50",children:[d("div",{className:"flex items-center space-x-2 mb-4",children:[s(Mo,{className:"h-5 w-5 text-blue-600"}),s("h3",{className:"text-lg font-medium text-gray-900",children:"Carga Masiva desde Excel"})]}),d("div",{className:"space-y-4",children:[s("p",{className:"text-sm text-gray-600",children:"Sube un archivo Excel con múltiples bimestres para crear varios a la vez."}),d("div",{className:"space-y-4",children:[d("div",{className:"flex items-center space-x-4",children:[d("div",{className:"relative",children:[s("input",{id:"archivo-excel",type:"file",accept:".xlsx,.xls",onChange:G,className:"hidden"}),d("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-blue-300 rounded-md shadow-sm text-sm font-medium text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{var D;return(D=document.getElementById("archivo-excel"))==null?void 0:D.click()},disabled:q,children:[s(Mo,{className:"h-4 w-4 mr-2"}),ee?"Cambiar Archivo":"Seleccionar Archivo Excel"]})]}),s("button",{type:"button",className:"text-sm text-blue-600 hover:text-blue-800 underline",onClick:se,children:"Descargar Plantilla"})]}),ee&&d("div",{className:"bg-gray-50 p-3 rounded-md",children:[d("p",{className:"text-sm text-gray-700",children:[s("span",{className:"font-medium",children:"Archivo seleccionado:"})," ",ee.name]}),s("button",{type:"button",className:"mt-2 inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Z,disabled:q,children:q?d(Et,{children:[d("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Procesando..."]}):"Cargar Bimestres"})]}),M.mostrar&&s("div",{className:`p-4 rounded-md ${M.exito?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:d("div",{className:"flex",children:[s("div",{className:"flex-shrink-0",children:M.exito?s(Js,{className:"h-5 w-5 text-green-400"}):s(_t,{className:"h-5 w-5 text-red-400"})}),d("div",{className:"ml-3",children:[s("div",{className:`text-sm font-medium whitespace-pre-line ${M.exito?"text-green-800":"text-red-800"}`,children:M.mensaje}),M.detalles&&!M.mensaje.includes("Ya existen bimestres para el año académico")&&s("div",{className:"mt-2 text-sm text-gray-600",children:s("pre",{className:"whitespace-pre-wrap",children:typeof M.detalles=="string"?M.detalles:JSON.stringify(M.detalles,null,2)})})]})]})})]})]})]}),d("div",{className:"border rounded-lg p-6",children:["            ",d("div",{className:"flex items-center space-x-2 mb-4",children:[y.activo?s(ni,{className:"h-5 w-5 text-blue-600"}):s(ai,{className:"h-5 w-5 text-green-600"}),s("h3",{className:"text-lg font-medium text-gray-900",children:y.activo?"Editar Bimestre":"Crear Bimestre Manual"}),y.activo&&s("button",{type:"button",onClick:fe,className:"ml-auto text-gray-500 hover:text-gray-700",children:s(on,{className:"h-4 w-4"})})]}),d("form",{onSubmit:$,className:"space-y-4",children:[d("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Bimestre (Generado automáticamente)"}),s("input",{type:"text",name:"nombre",value:h.nombre,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 cursor-not-allowed"})]}),"                ",d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número de Bimestre"}),s("input",{type:"number",name:"numeroBimestre",value:h.numeroBimestre,onChange:te,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),d("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Año Académico"}),s("input",{type:"number",name:"anoAcademico",value:h.anoAcademico,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2020",max:"2030",required:!0})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Inicio"}),s("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Fin"}),s("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),d("div",{className:"space-y-4",children:[d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Pago 1 (Rango) *"}),d("div",{className:"grid grid-cols-2 gap-3",children:[d("div",{children:[s("label",{className:"block text-xs text-gray-500 mb-1",children:"Desde *"}),s("input",{type:"date",name:"fechaPago1Inicio",value:h.fechaPago1Inicio,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d("div",{children:[s("label",{className:"block text-xs text-gray-500 mb-1",children:"Hasta *"}),s("input",{type:"date",name:"fechaPago1Fin",value:h.fechaPago1Fin,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),j.rangoPago1&&s("p",{className:"text-red-500 text-sm mt-1",children:j.rangoPago1})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Pago 2 (Rango) *"}),d("div",{className:"grid grid-cols-2 gap-3",children:[d("div",{children:[s("label",{className:"block text-xs text-gray-500 mb-1",children:"Desde *"}),s("input",{type:"date",name:"fechaPago2Inicio",value:h.fechaPago2Inicio,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d("div",{children:[s("label",{className:"block text-xs text-gray-500 mb-1",children:"Hasta *"}),s("input",{type:"date",name:"fechaPago2Fin",value:h.fechaPago2Fin,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),j.rangoPago2&&s("p",{className:"text-red-500 text-sm mt-1",children:j.rangoPago2})]})]}),"              ",d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción (Opcional)"}),s("textarea",{name:"descripcion",value:h.descripcion,onChange:te,rows:3,placeholder:"Descripción del bimestre...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Factor (Opcional)"}),s("input",{type:"number",name:"factor",value:h.factor||"",onChange:te,step:"0.000001",min:"0",placeholder:"Ej: 1.055556",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s("p",{className:"text-xs text-gray-500 mt-1",children:"Factor multiplicador para cálculos del bimestre (hasta 6 decimales)"})]}),T.mostrar&&d("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 flex items-start space-x-3",children:[s(_t,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),d("div",{children:[s("h4",{className:"text-sm font-medium text-yellow-800",children:"Conflicto de fechas detectado"}),s("p",{className:"text-sm text-yellow-700 mt-1",children:T.mensaje}),s("p",{className:"text-xs text-yellow-600 mt-2",children:"Por favor, ajusta las fechas para evitar el solapamiento antes de continuar."})]})]}),d("div",{className:"flex justify-end space-x-3",children:[y.activo&&d("button",{type:"button",onClick:fe,className:"bg-gray-500 text-white px-6 py-2 rounded-md hover:bg-gray-600 flex items-center space-x-2",children:[s(on,{className:"h-4 w-4"}),s("span",{children:"Cancelar"})]}),"                ",d("button",{type:"submit",disabled:n||T.mostrar,className:`text-white px-6 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 ${y.activo?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"} ${T.mostrar?"opacity-50 cursor-not-allowed":""}`,children:[y.activo?s(Js,{className:"h-4 w-4"}):s(ai,{className:"h-4 w-4"}),s("span",{children:y.activo?"Actualizar Bimestre":"Crear Bimestre"})]})]})]})]}),d("div",{children:[s("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Bimestres Configurados"}),r.length===0?s("p",{className:"text-gray-500 text-center py-4",children:"No hay bimestres configurados aún."}):s("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:r.map(D=>{var U;return d("div",{className:`flex items-center justify-between p-3 rounded-md border ${y.activo&&((U=y.bimestre)==null?void 0:U.id)===D.id?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[d("div",{className:"flex-1",children:[s("div",{className:"font-medium text-gray-900",children:D.nombre}),d("div",{className:"text-sm text-gray-600",children:[I(D.fechaInicio).toLocaleDateString("es-ES")," - "," ",I(D.fechaFin).toLocaleDateString("es-ES")," • Año ",D.anoAcademico," • Bimestre ",D.numeroBimestre]}),D.descripcion&&s("div",{className:"text-sm text-gray-500 mt-1",children:D.descripcion})]}),d("div",{className:"flex items-center space-x-3",children:[s("span",{className:`px-2 py-1 text-xs rounded-full ${D.activo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:D.activo?"Activo":"Inactivo"}),d("div",{className:"flex space-x-1",children:[s("button",{onClick:()=>J(D),disabled:n,className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded disabled:opacity-50",title:"Editar bimestre",children:s(ni,{className:"h-4 w-4"})}),N===D.id?d("div",{className:"flex space-x-2",children:[s("button",{onClick:()=>C(D.id),disabled:n||E,className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded disabled:opacity-50",title:"Confirmar eliminación",children:E?s("div",{className:"animate-spin h-4 w-4 border-2 border-red-600 border-t-transparent rounded-full"}):s(Js,{className:"h-4 w-4"})}),s("button",{onClick:()=>x(null),disabled:n||E,className:"p-1 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded disabled:opacity-50",title:"Cancelar eliminación",children:s(on,{className:"h-4 w-4"})})]}):s("button",{onClick:()=>x(D.id),disabled:n||E,className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded disabled:opacity-50",title:"Eliminar bimestre",children:s(Xf,{className:"h-4 w-4"})})]})]})]},D.id)})})]})]})]}),g.bimestreId&&s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[d("div",{className:"flex items-center mb-4",children:[s(_t,{className:"h-6 w-6 text-amber-500 mr-3"}),s("h3",{className:"text-lg font-medium text-gray-900",children:"Eliminar Bimestre con Eventos"})]}),d("div",{className:"mb-6",children:[d("p",{className:"text-sm text-gray-600 mb-3",children:["Este bimestre tiene ",d("strong",{children:[g.eventCount," eventos asociados"]})," en las siguientes tablas:"]}),s("ul",{className:"list-disc list-inside text-sm text-gray-600 mb-4",children:g.tables.map((D,U)=>s("li",{className:"mb-1",children:s("span",{className:"font-mono text-xs bg-gray-100 px-2 py-1 rounded",children:D})},U))}),s("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:d("p",{className:"text-sm text-amber-800",children:[s("strong",{children:"⚠️ Advertencia:"})," Si continúa, se eliminarán primero todos los eventos asociados y luego el bimestre. Esta acción no se puede deshacer."]})})]}),d("div",{className:"flex justify-end space-x-3",children:[s("button",{onClick:B,disabled:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 disabled:opacity-50",children:"Cancelar"}),d("button",{onClick:S,disabled:n,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 disabled:opacity-50 flex items-center space-x-2",children:[n&&s("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),s("span",{children:"Eliminar Todo"})]})]})]})})]}):null},w1=({message:e,type:t="error",isVisible:r,onClose:n,duration:a=6e3})=>{const[o,l]=p.useState(!1);p.useEffect(()=>{if(r){l(!0);const u=setTimeout(()=>{i()},a);return()=>clearTimeout(u)}},[r,a]);const i=()=>{l(!1),setTimeout(()=>{n()},300)},c=()=>{const u="fixed top-4 right-4 max-w-md w-full bg-white rounded-lg shadow-lg border-l-4 p-4 z-50 transition-all duration-300 transform",h={error:"border-red-500",success:"border-green-500",warning:"border-yellow-500",info:"border-blue-500"},b=o&&r?"translate-x-0 opacity-100":"translate-x-full opacity-0";return`${u} ${h[t]} ${b}`},m=()=>{switch(t){case"error":return"❌";case"success":return"✅";case"warning":return"⚠️";case"info":return"ℹ️";default:return"❌"}},f=()=>{switch(t){case"error":return"Error";case"success":return"Éxito";case"warning":return"Advertencia";case"info":return"Información";default:return"Error"}};return!r&&!o?null:s("div",{className:c(),children:d("div",{className:"flex items-start",children:[s("div",{className:"flex-shrink-0 mr-3 text-xl",children:m()}),d("div",{className:"flex-1",children:[s("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:f()}),s("div",{className:"text-sm text-gray-700 whitespace-pre-line",children:e})]}),s("button",{onClick:i,className:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 transition-colors",children:s("span",{className:"text-lg",children:"×"})})]})})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),N1=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),Jd=e=>{const t=N1(e);return t.charAt(0).toUpperCase()+t.slice(1)},ep=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),E1=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:l,...i},c)=>p.createElement("svg",{ref:c,...S1,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:ep("lucide",a),...!o&&!E1(i)&&{"aria-hidden":"true"},...i},[...l.map(([m,f])=>p.createElement(m,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=(e,t)=>{const r=p.forwardRef(({className:n,...a},o)=>p.createElement(C1,{ref:o,iconNode:t,className:ep(`lucide-${b1(Jd(e))}`,`lucide-${e}`,n),...a}));return r.displayName=Jd(e),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],P1=Nr("book-open",k1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Zs=Nr("clock",R1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Xs=Nr("eye-off",L1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],el=Nr("eye",T1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],D1=Nr("hash",I1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],A1=Nr("lock",_1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zd=Nr("user",O1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],U1=Nr("x",j1),F1=({hoursResult:e,className:t=""})=>{const{hoursData:r,loading:n,error:a}=e;return n?s("div",{className:`bg-white rounded-lg shadow p-6 ${t}`,children:d("div",{className:"flex items-center space-x-3",children:[s("div",{className:"p-2 bg-blue-100 rounded-lg",children:s(Zs,{className:"h-6 w-6 text-blue-600 animate-pulse"})}),d("div",{children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Total de Horas"}),s("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-20"})]})]})}):a?s("div",{className:`bg-white rounded-lg shadow p-6 ${t}`,children:d("div",{className:"flex items-center space-x-3",children:[s("div",{className:"p-2 bg-red-100 rounded-lg",children:s(Zs,{className:"h-6 w-6 text-red-600"})}),d("div",{children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Total de Horas"}),s("p",{className:"text-2xl font-bold text-red-600",children:"Error"}),s("p",{className:"text-xs text-red-500",children:a})]})]})}):d("div",{className:`bg-white rounded-lg shadow p-6 ${t}`,children:[s("div",{className:"flex items-center justify-between",children:d("div",{className:"flex items-center space-x-3",children:[s("div",{className:"p-2 bg-blue-100 rounded-lg",children:s(Zs,{className:"h-6 w-6 text-blue-600"})}),d("div",{children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Total de Horas"}),s("p",{className:"text-2xl font-bold text-gray-900",children:r.totalHours.toLocaleString()}),d("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-1",children:[d("span",{className:"flex items-center space-x-1",children:[s(P1,{className:"h-3 w-3"}),d("span",{children:[r.eventCount," eventos"]})]}),d("span",{className:"flex items-center space-x-1",children:[s(D1,{className:"h-3 w-3"}),d("span",{children:[r.codes.length," códigos"]})]})]})]})]})}),r.totalHours===0&&r.eventCount>0&&s("div",{className:"mt-3 p-2 bg-yellow-50 rounded border border-yellow-200",children:s("p",{className:"text-xs text-yellow-700",children:"No se encontraron códigos de asignatura válidos en los títulos de eventos."})})]})},uc=()=>{const[e,t]=p.useState({message:"",type:"info",isVisible:!1}),r=p.useCallback((a,o="info")=>{t({message:a,type:o,isVisible:!0})},[]),n=p.useCallback(()=>{t(a=>({...a,isVisible:!1}))},[]);return{toast:e,showToast:r,hideToast:n}};function M1(e){const t=new Set;return e.forEach(r=>{if(!r)return;const n=/\b([A-Z]{3}\d{4}|[A-Z]{4}\d{3})\b/g,a=r.match(n);a&&a.forEach(o=>t.add(o))}),Array.from(t)}function $1(){const e=document.querySelector("[data-bimestre-id]");if(e){const t=e.getAttribute("data-bimestre-id");if(t)return parseInt(t,10)}return null}function B1(e){return console.log("🔍 getEventType - Analizando eventos:",e.length),e.length===0?(console.log("🔍 getEventType - Sin eventos, retornando asignaturas"),"asignaturas"):e.some(n=>{var l;const a=n.title||"",o=a.includes("CCG")||a.includes("OPTATIVA")||((l=n.extendedProps)==null?void 0:l.plan)&&n.extendedProps.plan.includes("CCG");return o&&console.log("🔍 getEventType - Evento optativa encontrado:",a),o})?(console.log("🔍 getEventType - Tipo detectado: optativas"),"optativas"):e.some(n=>{const a=n.title||"",o=a.startsWith("ADOL"),l=a.includes("ADOL"),i=o||l;return console.log("🔍 getEventType - Analizando evento:",{title:a,startsWithADOL:o,includesADOL:l,result:i}),i})?(console.log("🔍 getEventType - Tipo detectado: adol"),"adol"):(console.log("🔍 getEventType - Tipo detectado: asignaturas (por defecto)"),"asignaturas")}async function z1(e){if(console.log("🔍 getEventsTotalHours - INICIO - Eventos recibidos:",e.length),!e||e.length===0)return console.log("🔍 getEventsTotalHours - Sin eventos, retornando 0"),{totalHours:0,eventCount:0,details:[],codes:[]};try{console.log("🔍 getEventsTotalHours - Procesando eventos:",e.map(f=>({id:f.id,title:f.title})));const t=new Map;e.forEach(f=>{var y,w,N;const u=f.title||"";console.log("🔍 getEventsTotalHours - Procesando evento:",{title:u,extendedProps:f.extendedProps});const h=M1([u]);console.log("🔍 getEventsTotalHours - Códigos extraídos:",h);const b=((y=f.extendedProps)==null?void 0:y.plan)||((w=f.extendedProps)==null?void 0:w.plan_code)||(!((N=f.extendedProps)!=null&&N.plan_code)&&u.startsWith("ADOL")?"ADOL":"");h.forEach(x=>{if(b&&b.trim()){const g=`${x}|${b.trim()}`;t.has(g)?t.get(g).count++:t.set(g,{pair:{acronym:x,plan:b.trim()},count:1})}})});const r=Array.from(t.values()).map(f=>f.pair),n=[...new Set(r.map(f=>f.acronym))];if(r.length===0)return{totalHours:0,eventCount:e.length,details:[],codes:[]};const a=B1(e);console.log("🔍 getEventsTotalHours - Tipo de evento detectado:",a),console.log("🔍 getEventsTotalHours - Eventos para análisis:",e.map(f=>({id:f.id,title:f.title})));const o=$1();console.log("🔍 getEventsTotalHours - Bimestre ID:",o);let l={},i="/scheduling/hours-by-codes";if(a==="adol"){const f=e.map(u=>u.title).filter(u=>u);l.eventTitles=JSON.stringify(f),i="/scheduling/hours-by-adol-events"}else l.eventPairs=JSON.stringify(r),a==="optativas"&&(i="/scheduling/hours-by-optativas-codes");o&&(l.bimestreId=o);let c=0;const m=[];return a==="adol"?(await z.get(i,{params:l})).data.details.forEach(u=>{c+=u.totalHours||u.hours||0,m.push({acronym:u.title,code:"ADOL",hours:u.totalHours||u.hours||0,subject:u.title,subjectCount:u.eventCount||1})}):a==="optativas"?(await z.get(i,{params:l})).data.details.forEach(u=>{const h=`${u.asignatura}|${u.plan}`,b=Array.from(t.values()).find(N=>`${N.pair.acronym}|${N.pair.plan}`===h),y=b?b.count:1,w=u.hours*y;c+=w,m.push({acronym:u.asignatura,code:u.plan,hours:w,subject:u.subject,subjectCount:y})}):(await z.get(i,{params:l})).data.details.forEach(u=>{const h=`${u.acronym}|${u.code}`,b=Array.from(t.values()).find(N=>`${N.pair.acronym}|${N.pair.plan}`===h),y=b?b.count:1,w=u.hours*y;c+=w,m.push({acronym:u.acronym,code:u.code,hours:w,subject:u.subject,subjectCount:y})}),{totalHours:c,eventCount:e.length,details:m,codes:n}}catch(t){return console.error("Error al obtener horas totales de eventos:",t),{totalHours:0,eventCount:e.length,details:[],codes:[]}}}function H1(e){const[t,r]=p.useState({totalHours:0,eventCount:0,details:[],codes:[]}),[n,a]=p.useState(!1),[o,l]=p.useState(null);console.log("🔍 useEventHours - Eventos recibidos:",{cantidad:e.length,eventos:e.map(m=>({title:m.title,type:typeof m.title}))});const i=p.useMemo(()=>e,[JSON.stringify(e)]),c=async()=>{if(console.log("🔍 fetchHours - Iniciando con eventos:",i.length),!i||i.length===0){console.log("🔍 fetchHours - Sin eventos, reseteando datos"),r({totalHours:0,eventCount:0,details:[],codes:[]});return}a(!0),l(null);try{console.log("🔍 fetchHours - Llamando a getEventsTotalHours");const m=await z1(i);console.log("🔍 fetchHours - Resultado obtenido:",m),r(m)}catch(m){console.error("🔍 fetchHours - Error:",m);const f=m instanceof Error?m.message:"Error al calcular horas";l(f)}finally{a(!1)}};return p.useEffect(()=>{c()},[i]),{hoursData:t,loading:n,error:o,refetch:c}}const V1=()=>{const[e,t]=p.useState(!1),[r,n]=p.useState([]),[a,o]=p.useState(!1),[l,i]=p.useState(!1),[c,m]=p.useState(),[f,u]=p.useState(null),[h,b]=p.useState(!1),[y,w]=p.useState("asignaturas"),[N,x]=p.useState({plan:"",evento:"",docente:"",nivel:"",capacidad:""}),[g,v]=p.useState({plan:!1,evento:!1,docente:!1,nivel:!1,capacidad:!1}),{bimestreSeleccionado:E}=jt(),{isAuthenticated:P,isLoading:T,user:_}=Gt(),j=(_==null?void 0:_.roleId)===1,{toast:X,showToast:q,hideToast:re}=uc(),ee=(C,S)=>{x(B=>({...B,[C]:S}))},F=C=>{v(S=>({...S,[C]:!S[C]}))},M=r.filter(C=>{var U,Y,ce,Ee,le,kt,Pt,Ut;const S=((U=C.extendedProps)==null?void 0:U.plan)||((Y=C.extendedProps)==null?void 0:Y.plan_code)||(!((ce=C.extendedProps)!=null&&ce.plan_code)&&C.title.startsWith("ADOL")?"ADOL":""),B=!N.plan||S.toLowerCase().includes(N.plan.toLowerCase()),G=!N.evento||C.title.toLowerCase().includes(N.evento.toLowerCase()),Z=!N.docente||(((Ee=C.extendedProps)==null?void 0:Ee.teacher_names)||((le=C.extendedProps)==null?void 0:le.teacher)||"").toLowerCase().includes(N.docente.toLowerCase()),se=!N.nivel||(((Pt=(kt=C.extendedProps)==null?void 0:kt.nivel)==null?void 0:Pt.toString())||"").toLowerCase().includes(N.nivel.toLowerCase()),D=!N.capacidad||(((Ut=C.extendedProps)==null?void 0:Ut.students)||"").toString().includes(N.capacidad);return B&&G&&Z&&se&&D}),Q=H1(M),te=async()=>{o(!0);try{if(!E){console.log("🔍 No hay bimestre seleccionado, lista de eventos vacía"),n([]);return}console.log("🔍 Cargando eventos para bimestre:",{bimestreId:E.id,nombre:E.nombre,tipo:y});let C;y==="adol"?(console.log("📡 Llamando a eventService.getADOLEventsByBimestre con bimestreId:",E.id),C=await It.getADOLEventsByBimestre(E.id)):y==="optativas"?(console.log("📡 Llamando a eventService.getOptativasEventsByBimestre con bimestreId:",E.id),C=await It.getOptativasEventsByBimestre(E.id)):(console.log("📡 Llamando a eventService.getEventsByBimestre con bimestreId:",E.id),C=await It.getEventsByBimestre(E.id)),console.log("✅ Eventos obtenidos del backend:",{cantidad:C.length,eventos:C.map(S=>({id:S.id,title:S.title,start:S.start,end:S.end}))}),n(C)}catch(C){console.error("❌ Error loading events from backend:",C),n([])}finally{o(!1)}},H=()=>{u(null),m(void 0),i(!0)},R=async C=>{try{const S=await It.getEventById(C.id);u(S),m(void 0),i(!0)}catch(S){console.error("Error loading event details:",S),u(C),m(void 0),i(!0)}},$=async C=>{b(!0);try{f?await J(f.id,C):await K(C),i(!1),u(null),m(void 0),await te()}catch(S){console.error("Error saving event:",S)}finally{b(!1)}},I=()=>{i(!1),u(null),m(void 0)},K=async C=>{var S,B;try{const G=await It.createEvent(C);n(Z=>[...Z,G])}catch(G){console.error("Error creating event:",G);let Z="Error al crear el evento";throw(B=(S=G.response)==null?void 0:S.data)!=null&&B.message?Z=G.response.data.message:G.message&&(Z=G.message),q(Z,"error"),G}},J=async(C,S)=>{var B,G;try{const Z=await It.updateEvent(C,S);n(se=>se.map(D=>D.id===C?Z:D))}catch(Z){console.error("Error updating event:",Z);let se="Error al actualizar el evento";throw(G=(B=Z.response)==null?void 0:B.data)!=null&&G.message?se=Z.response.data.message:Z.message&&(se=Z.message),q(se,"error"),Z}},fe=async C=>{var S,B;try{await It.deleteEvent(C),n(G=>G.filter(Z=>Z.id!==C))}catch(G){console.error("Error deleting event:",G);let Z="Error al eliminar el evento";throw(B=(S=G.response)==null?void 0:S.data)!=null&&B.message?Z=G.response.data.message:G.message&&(Z=G.message),q(Z,"error"),G}};return p.useEffect(()=>{te()},[E,y]),d("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto",children:[d("div",{className:"mb-6 sm:mb-8",children:[s("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2",children:"Dashboard de Programación Académica"}),s("p",{className:"text-sm sm:text-base text-gray-600",children:"Gestiona y visualiza la programación académica en tiempo real"})]}),s("div",{className:"mb-6",children:d("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4",children:d("div",{className:"flex items-center space-x-4",children:[d("div",{children:[s("p",{className:"text-sm text-gray-600 mb-1",children:"Total Eventos"}),s("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),s("div",{className:"bg-orange-100 p-3 rounded-lg",children:s("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})}),s(F1,{hoursResult:Q})]})}),d("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:d("div",{className:"flex flex-col space-y-4",children:[d("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d("div",{children:[s("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-1",children:"Calendario de Programación"}),s("p",{className:"text-xs sm:text-sm text-gray-600",children:"Visualiza y gestiona los eventos académicos"})]}),s("div",{className:"flex items-center space-x-3",children:!j&&d("button",{onClick:()=>t(!0),className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center space-x-2",children:[s(Lx,{className:"h-4 w-4"}),s("span",{children:"Configurar Bimestres"})]})})]}),s("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:s(u1,{onBimestreChange:C=>{console.log("Bimestre seleccionado:",C)},className:"flex-1 sm:flex-none"})})]})}),s("div",{className:"p-3 sm:p-6",children:d("div",{className:"space-y-4",children:[!j&&s("div",{className:"flex justify-end items-center mb-4",children:d("button",{onClick:H,className:"bg-uc-yellow hover:bg-yellow-500 text-black px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[s("span",{children:"+"}),s("span",{children:"Crear Evento"})]})}),d("div",{className:"bg-gray-50 rounded-lg p-4",children:[d("h3",{className:"font-semibold text-gray-900 mb-3",children:["Eventos Programados (",M.length,")"]}),s("div",{className:"mb-4",children:d("div",{className:"flex space-x-4",children:[d("label",{className:"flex items-center",children:[s("input",{type:"radio",name:"eventType",value:"asignaturas",checked:y==="asignaturas",onChange:C=>w(C.target.value),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s("span",{className:"text-sm font-medium text-gray-700",children:"Asignaturas"})]}),d("label",{className:"flex items-center",children:[s("input",{type:"radio",name:"eventType",value:"adol",checked:y==="adol",onChange:C=>w(C.target.value),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s("span",{className:"text-sm font-medium text-gray-700",children:"ADOL"})]}),d("label",{className:"flex items-center",children:[s("input",{type:"radio",name:"eventType",value:"optativas",checked:y==="optativas",onChange:C=>w(C.target.value),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s("span",{className:"text-sm font-medium text-gray-700",children:"Optativas"})]})]})}),r.length>0?s("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:d("table",{className:"min-w-full bg-white",children:[s("thead",{className:"bg-gray-100 sticky top-0 z-10",children:d("tr",{children:[s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:d("div",{className:"flex flex-col",children:[s("button",{onClick:()=>F("plan"),className:"text-left hover:text-gray-700 cursor-pointer",children:"Plan"}),g.plan&&s("input",{type:"text",placeholder:"Filtrar...",value:N.plan,onChange:C=>ee("plan",C.target.value),className:"mt-1 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",onClick:C=>C.stopPropagation()})]})}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:d("div",{className:"flex flex-col",children:[s("button",{onClick:()=>F("evento"),className:"text-left hover:text-gray-700 cursor-pointer",children:"Evento"}),g.evento&&s("input",{type:"text",placeholder:"Filtrar...",value:N.evento,onChange:C=>ee("evento",C.target.value),className:"mt-1 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",onClick:C=>C.stopPropagation()})]})}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:d("div",{className:"flex flex-col",children:[s("button",{onClick:()=>F("docente"),className:"text-left hover:text-gray-700 cursor-pointer",children:"Docente"}),g.docente&&s("input",{type:"text",placeholder:"Filtrar...",value:N.docente,onChange:C=>ee("docente",C.target.value),className:"mt-1 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",onClick:C=>C.stopPropagation()})]})}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:d("div",{className:"flex flex-col",children:[s("button",{onClick:()=>F("nivel"),className:"text-left hover:text-gray-700 cursor-pointer",children:"Nivel"}),g.nivel&&s("input",{type:"text",placeholder:"Filtrar...",value:N.nivel,onChange:C=>ee("nivel",C.target.value),className:"mt-1 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",onClick:C=>C.stopPropagation()})]})}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:d("div",{className:"flex flex-col",children:[s("button",{onClick:()=>F("capacidad"),className:"text-left hover:text-gray-700 cursor-pointer",children:"Capacidad"}),g.capacidad&&s("input",{type:"text",placeholder:"Filtrar...",value:N.capacidad,onChange:C=>ee("capacidad",C.target.value),className:"mt-1 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",onClick:C=>C.stopPropagation()})]})}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:"Acciones"})]})}),s("tbody",{className:"divide-y divide-gray-200",children:M.map(C=>{var S,B,G,Z,se,D,U;return d("tr",{className:"hover:bg-gray-50",children:[s("td",{className:"px-3 py-2 text-sm text-gray-600",children:((S=C.extendedProps)==null?void 0:S.plan)||((B=C.extendedProps)==null?void 0:B.plan_code)||(!((G=C.extendedProps)!=null&&G.plan_code)&&C.title.startsWith("ADOL")?"ADOL":"-")}),s("td",{className:"px-3 py-2 text-sm text-gray-900",children:C.title}),s("td",{className:"px-3 py-2 text-sm text-gray-600",children:((Z=C.extendedProps)==null?void 0:Z.teacher_names)||((se=C.extendedProps)==null?void 0:se.teacher)||"-"}),s("td",{className:"px-3 py-2 text-sm text-gray-600",children:((D=C.extendedProps)==null?void 0:D.nivel)||"-"}),s("td",{className:"px-3 py-2 text-sm text-gray-600",children:((U=C.extendedProps)==null?void 0:U.students)||"-"}),s("td",{className:"px-3 py-2 text-sm",children:s("div",{className:"flex space-x-2",children:j?s("span",{className:"text-gray-400 text-sm italic",children:"Solo lectura"}):d(Et,{children:[s("button",{onClick:()=>R(C),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Editar"}),s("button",{onClick:()=>fe(C.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Eliminar"})]})})})]},C.id)})})]})}):s("div",{className:"text-center py-8",children:E?s("p",{className:"text-gray-500",children:"No hay eventos programados para este bimestre"}):d("div",{className:"space-y-2",children:[s("p",{className:"text-gray-500",children:"Selecciona un bimestre para ver los eventos programados"}),s("p",{className:"text-sm text-gray-400",children:"Usa el selector de bimestre arriba para comenzar"})]})})]})]})})]}),s(x1,{isOpen:e,onClose:()=>t(!1)}),s(v1,{isOpen:l,onClose:I,selectedDate:c,onSave:$,isLoading:h,currentEventType:y,editingEvent:f,onMultipleEventsCreated:async()=>{await te()}}),s(w1,{message:X.message,type:X.type,isVisible:X.isVisible,onClose:re})]})},W1=({type:e="404",title:t,message:r})=>{const n=os(),a=zr(),l={404:{code:"404",title:t||"Página No Encontrada",message:r||"Lo sentimos, la página que buscas no existe o ha sido movida.",icon:s(_t,{className:"h-16 w-16 text-yellow-500"}),color:"yellow"},500:{code:"500",title:t||"Error del Servidor",message:r||"Ha ocurrido un error interno del servidor. Nuestro equipo técnico ha sido notificado.",icon:s(_t,{className:"h-16 w-16 text-red-500"}),color:"red"},403:{code:"403",title:t||"Acceso Denegado",message:r||"No tienes permisos suficientes para acceder a esta página.",icon:s(_t,{className:"h-16 w-16 text-orange-500"}),color:"orange"},network:{code:"RED",title:t||"Error de Conexión",message:r||"No se pudo establecer conexión con el servidor. Verifica tu conexión a internet.",icon:s(_t,{className:"h-16 w-16 text-blue-500"}),color:"blue"}}[e],i=()=>{n("/dashboard")},c=()=>{window.history.length>1?n(-1):n("/dashboard")},m=()=>{window.location.reload()},f=()=>{console.log("Reportando error:",{type:e,path:a.pathname,timestamp:new Date().toISOString(),userAgent:navigator.userAgent}),alert("Error reportado. Gracias por tu colaboración.")};return s("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center px-4 sm:px-6 lg:px-8",children:d("div",{className:"max-w-md w-full space-y-8 text-center",children:[s("div",{className:"flex justify-center",children:l.icon}),d("div",{children:[s("h1",{className:"text-6xl font-bold text-gray-900 mb-4",children:l.code}),s("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:l.title}),s("p",{className:"text-gray-600 mb-8",children:l.message})]}),d("div",{className:"space-y-4",children:[d("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[d("button",{onClick:i,className:"inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-lg text-base font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s(Vx,{className:"h-5 w-5 mr-2"}),"Ir al Inicio"]}),d("button",{onClick:c,className:"inline-flex items-center justify-center px-6 py-3 border border-gray-300 rounded-lg text-base font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s(ax,{className:"h-5 w-5 mr-2"}),"Volver Atrás"]})]}),d("div",{className:"flex flex-col sm:flex-row gap-2 justify-center text-sm",children:[(e==="500"||e==="network")&&d("button",{onClick:m,className:"inline-flex items-center justify-center px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[s(kx,{className:"h-4 w-4 mr-1"}),"Intentar de nuevo"]}),s("button",{onClick:f,className:"inline-flex items-center justify-center px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:"Reportar problema"})]})]}),s("div",{className:"mt-12 pt-8 border-t border-gray-200",children:d("div",{className:"text-sm text-gray-500 space-y-2",children:[s("p",{children:"Si el problema persiste, contacta al soporte técnico:"}),d("div",{className:"space-y-1",children:[s("p",{children:"📧 soporte@universidad.edu"}),s("p",{children:"📞 +57 (1) 234-5678"}),s("p",{children:"⏰ Lunes a Viernes, 8:00 AM - 6:00 PM"})]})]})}),!1]})})},sr={async uploadFile(e,t,r={}){var n,a,o,l,i,c,m,f,u,h;try{const b=new FormData;b.append("file",t),b.append("mode",r.mode||"UPSERT"),b.append("validateOnly",r.validateOnly?"true":"false"),r.bimestreId&&b.append("bimestreId",r.bimestreId.toString());const y=await z.post(`/uploads/${e}`,b,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5});return{success:y.data.success||!0,message:y.data.message||"Archivo procesado exitosamente",summary:{totalRecords:((a=(n=y.data.data)==null?void 0:n.summary)==null?void 0:a.totalRecords)||0,validRecords:((l=(o=y.data.data)==null?void 0:o.summary)==null?void 0:l.validRecords)||0,invalidRecords:((c=(i=y.data.data)==null?void 0:i.summary)==null?void 0:c.invalidRecords)||0,errors:((f=(m=y.data.data)==null?void 0:m.summary)==null?void 0:f.errors)||[]},data:y.data.data}}catch(b){throw console.error("Upload error:",b),new Error(((h=(u=b.response)==null?void 0:u.data)==null?void 0:h.message)||"Error al cargar el archivo")}},async validateFile(e,t,r={}){var n,a,o,l,i,c;try{const m=new FormData;m.append("file",t),r.bimestreId&&m.append("bimestreId",r.bimestreId.toString());const f=await z.post(`/uploads/validate/${e}`,m,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5});return{isValid:f.data.isValid||!1,summary:{totalRecords:((n=f.data.summary)==null?void 0:n.totalRecords)||0,validRecords:((a=f.data.summary)==null?void 0:a.validRecords)||0,invalidRecords:((o=f.data.summary)==null?void 0:o.invalidRecords)||0,errors:((l=f.data.summary)==null?void 0:l.errors)||[]}}}catch(m){throw console.error("Validation error:",m),new Error(((c=(i=m.response)==null?void 0:i.data)==null?void 0:c.message)||"Error al validar el archivo")}},async getSystemStats(){var e,t;try{return(await z.get("/uploads/admin/stats")).data}catch(r){throw console.error("Stats error:",r),new Error(((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||"Error al obtener estadísticas")}},async getSystemHealth(){var e,t;try{return(await z.get("/uploads/admin/health")).data}catch(r){throw console.error("Health error:",r),new Error(((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||"Error al verificar el estado del sistema")}},async getUploadDetails(e){var t,r;try{return(await z.get(`/uploads/details/${e}`)).data.data}catch(n){throw console.error("Upload details error:",n),new Error(((r=(t=n.response)==null?void 0:t.data)==null?void 0:r.message)||"Error al obtener detalles de la carga")}},async uploadAcademicStructure(e,t){return this.uploadFile("estructura-academica",e,t)},async uploadReporteCursables(e){return this.uploadFile("reporte-cursables",e)},async uploadTeachers(e,t){return this.uploadFile("nomina-docentes",e,t)},async uploadNominaDocentes(e,t){return this.uploadFile("nomina-docentes",e,t)},async uploadDol(e){return this.uploadFile("dol",e)},async uploadVacantesInicio(e){return this.uploadFile("vacantes-inicio",e)},async getRecentUploads(e){var t,r;try{const n=e?`/uploads/recent?bimestreId=${e}`:"/uploads/recent",a=await z.get(n);return a.data.data||a.data}catch(n){throw console.error("Recent uploads error:",n),new Error(((r=(t=n.response)==null?void 0:t.data)==null?void 0:r.message)||"Error al obtener cargas recientes")}},async getUploadHistory(e=1,t=20,r){var n,a;try{const o=new URLSearchParams({page:e.toString(),limit:t.toString(),...r}),l=await z.get(`/uploads/history?${o}`);return l.data.data||l.data}catch(o){throw console.error("Upload history error:",o),new Error(((a=(n=o.response)==null?void 0:n.data)==null?void 0:a.message)||"Error al obtener historial de cargas")}},async approveUpload(e,t){var r,n;try{const a=await z.post(`/uploads/approve/${e}`,{comments:t});return{success:a.data.success,message:a.data.message}}catch(a){throw console.error("Approve upload error:",a),new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Error al aprobar la carga")}},async rejectUpload(e,t){var r,n;try{const a=await z.post(`/uploads/reject/${e}`,{comments:t});return{success:a.data.success,message:a.data.message}}catch(a){throw console.error("Reject upload error:",a),new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Error al rechazar la carga")}}};class q1{constructor(){Vr(this,"baseUrl","/templates")}async downloadTemplate(t){try{const r=`${this.baseUrl}/${t}`,n=document.createElement("a");n.href=r,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),console.log(`Plantilla ${t} descargada exitosamente`)}catch(r){throw console.error("Error al descargar la plantilla:",r),new Error(`No se pudo descargar la plantilla ${t}`)}}async templateExists(t){try{const r=`${this.baseUrl}/${t}`;return(await fetch(r,{method:"HEAD"})).ok}catch(r){return console.error("Error al verificar la existencia de la plantilla:",r),!1}}async getAvailableTemplates(){try{return["estructura_academica_template.xlsx","reporte_cursables_template.xlsx","nomina_docentes_template.xlsx","adol_template.xlsx","dol_template.xlsx","vacantes_inicio_template.xlsx","ramos_optativos_template.xlsx"]}catch(t){return console.error("Error al obtener las plantillas disponibles:",t),[]}}async downloadMultipleTemplates(t){try{for(const r of t)await this.downloadTemplate(r),await new Promise(n=>setTimeout(n,500))}catch(r){throw console.error("Error al descargar múltiples plantillas:",r),new Error("No se pudieron descargar todas las plantillas")}}}const Q1=new q1,G1=({isOpen:e,onClose:t,uploadId:r})=>{var w,N,x,g;console.log("=== DEBUG: DataViewModal renderizado ==="),console.log("Props recibidas - isOpen:",e,"uploadId:",r);const[n,a]=p.useState(null),[o,l]=p.useState(!1),[i,c]=p.useState(null),[m,f]=p.useState("all");p.useEffect(()=>{console.log("=== DEBUG: useEffect ejecutado ==="),console.log("isOpen:",e),console.log("uploadId:",r),e&&r&&(console.log("=== DEBUG: Llamando fetchUploadDetails ==="),u())},[e,r]);const u=async()=>{var v,E;l(!0),c(null);try{const P=await sr.getUploadDetails(r);console.log("=== DEBUG: Detalles recibidos del backend ==="),console.log("Details completos:",P),console.log("validRecords:",P.validRecords),console.log("invalidRecords:",P.invalidRecords),console.log("validRecords length:",(v=P.validRecords)==null?void 0:v.length),console.log("invalidRecords length:",(E=P.invalidRecords)==null?void 0:E.length),a(P)}catch(P){c(P.message)}finally{l(!1)}},h=()=>{if(!n)return console.log("=== DEBUG: No hay uploadDetails ==="),[];console.log("=== DEBUG: getFilteredRecords ==="),console.log("Filter actual:",m),console.log("uploadDetails.validRecords:",n.validRecords),console.log("uploadDetails.invalidRecords:",n.invalidRecords);let v;switch(m){case"valid":v=n.validRecords||[];break;case"invalid":v=n.invalidRecords||[];break;default:v=[...n.validRecords||[],...n.invalidRecords||[]];break}return console.log("Resultado filtrado:",v),console.log("Resultado filtrado length:",v.length),v},b=()=>{const v=h();if(v.length===0)return[];const E=new Set;return v.slice(0,5).forEach(P=>{P.data&&Object.keys(P.data).forEach(T=>E.add(T))}),Array.from(E)},y=v=>{v.key==="Escape"&&t()};return e?s("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50 p-4 overflow-y-auto",onClick:t,onKeyDown:y,tabIndex:-1,children:d("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[75vh] flex flex-col mb-4",onClick:v=>v.stopPropagation(),children:[d("div",{className:"flex items-center justify-between p-6 border-b",children:[d("div",{children:[s("h2",{className:"text-xl font-semibold text-gray-900",children:"Visualización de Datos"}),n&&d("p",{className:"text-sm text-gray-600 mt-1",children:[n.filename," - ",n.type," - ",n.date]})]}),s("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s(U1,{size:24})})]}),d("div",{className:"flex-1 overflow-hidden",children:[o&&d("div",{className:"flex items-center justify-center h-64",children:[s("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s("span",{className:"ml-2 text-gray-600",children:"Cargando datos..."})]}),i&&s("div",{className:"p-6",children:d("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[s("p",{className:"text-red-800",children:i}),s("button",{onClick:u,className:"mt-2 text-red-600 hover:text-red-800 underline",children:"Reintentar"})]})}),n&&!o&&!i&&d("div",{className:"p-6",children:[d("div",{className:"mb-6 grid grid-cols-3 gap-4",children:[d("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s("p",{className:"text-sm text-blue-600 font-medium",children:"Total de Registros"}),s("p",{className:"text-2xl font-bold text-blue-900",children:(((w=n.validRecords)==null?void 0:w.length)||0)+(((N=n.invalidRecords)==null?void 0:N.length)||0)})]}),d("div",{className:"bg-green-50 p-4 rounded-lg",children:[s("p",{className:"text-sm text-green-600 font-medium",children:"Registros Válidos"}),s("p",{className:"text-2xl font-bold text-green-900",children:((x=n.validRecords)==null?void 0:x.length)||0})]}),d("div",{className:"bg-red-50 p-4 rounded-lg",children:[s("p",{className:"text-sm text-red-600 font-medium",children:"Registros con Errores"}),s("p",{className:"text-2xl font-bold text-red-900",children:((g=n.invalidRecords)==null?void 0:g.length)||0})]})]}),s("div",{className:"mb-4",children:d("div",{className:"flex space-x-4",children:[d("label",{className:"flex items-center",children:[s("input",{type:"radio",name:"filter",value:"all",checked:m==="all",onChange:v=>f(v.target.value),className:"mr-2"}),"Todos los registros"]}),d("label",{className:"flex items-center",children:[s("input",{type:"radio",name:"filter",value:"valid",checked:m==="valid",onChange:v=>f(v.target.value),className:"mr-2"}),"Solo válidos"]}),d("label",{className:"flex items-center",children:[s("input",{type:"radio",name:"filter",value:"invalid",checked:m==="invalid",onChange:v=>f(v.target.value),className:"mr-2"}),"Solo con errores"]})]})}),s("div",{className:"border rounded-lg overflow-hidden",children:d("div",{className:"overflow-x-auto max-h-96",children:[d("table",{className:"min-w-full divide-y divide-gray-200",children:[s("thead",{className:"bg-gray-50 sticky top-0",children:d("tr",{children:[s("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fila"}),b().map(v=>s("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:v},v)),s("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:h().map((v,E)=>d("tr",{className:v.errors&&v.errors.length>0?"bg-red-50":"",children:[s("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:v.rowNumber}),b().map(P=>{var T;return s("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:((T=v.data)==null?void 0:T[P])||"-"},P)}),s("td",{className:"px-4 py-3 whitespace-nowrap",children:v.errors&&v.errors.length>0?d("div",{className:"group relative",children:[s("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 cursor-help",children:"Error"}),s("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-10",children:s("div",{className:"bg-gray-900 text-white text-xs rounded py-2 px-3 max-w-xs",children:(v.errors||[]).map((P,T)=>s("div",{className:"mb-1 last:mb-0",children:P},T))})})]}):s("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Válido"})})]},`record-${v.rowNumber||E}`))})]}),h().length===0&&s("div",{className:"text-center py-8 text-gray-500",children:"No hay registros para mostrar con el filtro seleccionado."})]})})]})]}),s("div",{className:"flex justify-end p-6 border-t bg-gray-50",children:s("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cerrar"})})]})}):null},K1=({onRefresh:e})=>{const[t,r]=p.useState([]),[n,a]=p.useState(!0),[o,l]=p.useState(null),[i,c]=p.useState(!1),[m,f]=p.useState(!1),[u,h]=p.useState(null),[b,y]=p.useState(null),[w,N]=p.useState("all"),[x,g]=p.useState("approve"),[v,E]=p.useState(""),[P,T]=p.useState(1),[_]=p.useState(20),[j,X]=p.useState([]),[q,re]=p.useState(void 0),{showToast:ee}=uc(),F=new dc;p.useEffect(()=>{te(),H()},[]),p.useEffect(()=>{H()},[q]);const M=S=>{N(S),T(1)},Q=S=>{T(S)},te=async()=>{try{const S=await F.findActivos();X(S)}catch(S){console.error("Error al cargar bimestres:",S)}},H=async()=>{try{a(!0);const S=await sr.getRecentUploads(q);r(S)}catch(S){ee(S.message||"Error al cargar las cargas recientes","error")}finally{a(!1)}},R=async(S,B)=>{h(S),g(B),E(""),c(!0)},$=async S=>{try{h(S);const B=await sr.getUploadDetails(S.id.toString());y(B),T(1),N("all"),f(!0)}catch(B){ee(B.message||"Error al cargar los detalles de la carga","error")}},I=async()=>{if(u)try{l(u.id),x==="approve"?(await sr.approveUpload(u.id,v),ee("Carga aprobada exitosamente","success")):(await sr.rejectUpload(u.id,v),ee("Carga rechazada exitosamente","success")),await H(),e&&e()}catch(S){ee(S.message||"Error al procesar la acción","error")}finally{l(null),c(!1),h(null)}},K=S=>({Exitoso:"bg-green-100 text-green-800","Con errores":"bg-yellow-100 text-yellow-800",Error:"bg-red-100 text-red-800"})[S]||"bg-gray-100 text-gray-800",J=S=>({Pendiente:"bg-blue-100 text-blue-800",Aprobado:"bg-green-100 text-green-800",Rechazado:"bg-red-100 text-red-800"})[S]||"bg-gray-100 text-gray-800",fe=S=>new Date(S).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),C=S=>({ESTRUCTURA_ACADEMICA:"Estructura Académica",NOMINA_DOCENTES:"Nómina de Docentes",REPORTE_CURSABLES:"Reporte de Cursables",ADOL:"ADOL",DOL:"DOL",VACANTES_INICIO:"Vacantes de Inicio",PAYMENT_CODES:"Códigos de Pago"})[S]||S;return n?d("div",{className:"bg-white rounded-lg shadow p-6",children:[s("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cargas Recientes"}),s("div",{className:"animate-pulse space-y-4",children:[...Array(3)].map((S,B)=>s("div",{className:"h-16 bg-gray-200 rounded"},B))})]}):d(Et,{children:[d("div",{className:"bg-white rounded-lg shadow max-w-none w-full",children:[d("div",{className:"px-6 py-4 border-b border-gray-200",children:[d("div",{className:"flex justify-between items-center mb-4",children:[s("h3",{className:"text-lg font-medium text-gray-900",children:"Cargas Recientes"}),s("button",{onClick:H,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Actualizar"})]}),s("div",{className:"flex items-center space-x-4",children:d("div",{className:"flex items-center space-x-2",children:[s("label",{htmlFor:"bimestre-filter",className:"text-sm font-medium text-gray-700",children:"Filtrar por bimestre:"}),d("select",{id:"bimestre-filter",value:q||"",onChange:S=>re(S.target.value?parseInt(S.target.value,10):void 0),className:"block w-48 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[s("option",{value:"",children:"Todos los bimestres"}),j.map(S=>s("option",{value:S.id,children:S.nombre},S.id))]})]})})]}),s("div",{className:"overflow-x-auto",children:d("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[s("thead",{className:"bg-gray-50",children:d("tr",{children:[s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Archivo"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bimestre"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aprobación"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registros"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?s("tr",{children:s("td",{colSpan:8,className:"px-3 py-3 text-center text-gray-500 text-sm",children:"No hay cargas recientes"})}):t.map(S=>d("tr",{className:"hover:bg-gray-50",children:[s("td",{className:"px-3 py-3 text-xs text-gray-900 max-w-xs truncate",title:S.file_name,children:S.file_name}),s("td",{className:"px-3 py-3 whitespace-nowrap text-xs text-gray-900",children:C(S.upload_type)}),s("td",{className:"px-3 py-3 whitespace-nowrap text-xs text-gray-900",children:fe(S.upload_date)}),s("td",{className:"px-3 py-3 whitespace-nowrap text-xs text-gray-900",children:S.bimestre||"N/A"}),s("td",{className:"px-3 py-3 whitespace-nowrap",children:s("span",{className:`inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full ${K(S.status)}`,children:S.status})}),s("td",{className:"px-3 py-3 whitespace-nowrap",children:s("span",{className:`inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full ${J(S.approval_status)}`,children:S.approval_status})}),s("td",{className:"px-3 py-3 whitespace-nowrap text-xs text-gray-900",children:S.error_count>0?`${S.total_records} (${S.error_count} errores)`:S.total_records}),d("td",{className:"px-3 py-3 whitespace-nowrap text-xs font-medium space-x-1",children:[s("button",{onClick:()=>$(S),disabled:S.approval_status==="Aprobado",className:`text-xs ${S.approval_status==="Aprobado"?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-900"}`,children:"Ver"}),S.approval_status==="Pendiente"&&!S.is_processed&&s("button",{onClick:()=>R(S,"approve"),disabled:o===S.id,className:"text-xs text-green-600 hover:text-green-900 disabled:opacity-50",children:o===S.id?"Procesando...":"Aprobar"}),S.approval_status==="Aprobado"&&s("span",{className:"text-green-600 font-medium text-xs",children:"Aprobado"}),S.approval_status==="Rechazado"&&s("span",{className:"text-red-600 font-medium text-xs",children:"Rechazado"}),S.is_processed&&s("span",{className:"text-gray-500 font-medium text-xs",children:"Procesado"})]})]},S.id))})]})})]}),i&&u&&s("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:d("div",{className:"mt-3",children:[s("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:x==="approve"?"Aprobar Carga":"Rechazar Carga"}),d("p",{className:"text-sm text-gray-600 mb-4",children:["¿Estás seguro de que deseas ",x==="approve"?"aprobar":"rechazar"," la carga del archivo ",s("strong",{children:u.file_name}),"?"]}),x==="approve"&&d("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:[d("p",{className:"text-sm text-red-700 font-medium flex items-center",children:[s("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"⚠️ ADVERTENCIA: Esta acción no se puede deshacer"]}),s("p",{className:"text-xs text-red-600 mt-1 ml-6",children:"Una vez aprobada, la carga será procesada automáticamente y los datos se migrarán de forma permanente."})]}),d("div",{className:"mb-4",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentarios (opcional)"}),s("textarea",{value:v,onChange:S=>E(S.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Agregar comentarios sobre la decisión..."})]}),d("div",{className:"flex justify-end space-x-3",children:[s("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),s("button",{onClick:I,className:`px-4 py-2 text-sm font-medium text-white rounded-md ${x==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:x==="approve"?"Aprobar":"Rechazar"})]})]})})}),m&&u&&b&&s("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:d("div",{className:"relative top-10 mx-auto p-0 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white",children:[d("div",{className:"flex justify-between items-start p-4 border-b border-gray-200",children:[d("div",{className:"flex items-center space-x-3",children:[s("span",{className:"text-2xl",children:"📄"}),d("div",{children:[s("h3",{className:"text-lg font-medium text-gray-900",children:u.file_name}),d("p",{className:"text-sm text-gray-600",children:["Tipo: ",C(u.upload_type)," | Bimestre: ",u.bimestre]}),d("p",{className:"text-sm text-gray-600",children:["Cargado: ",fe(u.upload_date)]})]})]}),s("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600 text-xl font-bold",children:"✕"})]}),s("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:d("div",{className:"flex space-x-4",children:[d("button",{onClick:()=>M("all"),className:`px-3 py-1 rounded-full text-sm font-medium ${w==="all"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["○ Todos (",u.total_records,")"]}),d("button",{onClick:()=>M("valid"),className:`px-3 py-1 rounded-full text-sm font-medium ${w==="valid"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["○ Válidos (",u.total_records-u.error_count,")"]}),d("button",{onClick:()=>M("errors"),className:`px-3 py-1 rounded-full text-sm font-medium ${w==="errors"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["○ Con Errores (",u.error_count,")"]})]})}),s("div",{className:"p-4 max-h-96 overflow-y-auto",children:(()=>{let S=[];if(w==="all"?S=[...b.validRecords||[],...b.invalidRecords||[]]:w==="valid"?S=b.validRecords||[]:w==="errors"&&(S=b.invalidRecords||[]),S.length===0)return s("div",{className:"text-center text-gray-500 py-8",children:"No hay datos para mostrar con el filtro seleccionado"});S.length;const B=(P-1)*_,G=B+_,Z=S.slice(B,G),se=S.length>0?Object.keys(S[0].data).filter(D=>D!=="ID_BIMESTRE"):[];return s("div",{className:"overflow-x-auto",children:d("table",{className:"min-w-full divide-y divide-gray-200",children:[s("thead",{className:"bg-gray-50",children:d("tr",{children:[s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fila"}),se.map(D=>s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:D},D)),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.map((D,U)=>d("tr",{className:"hover:bg-gray-50",children:[s("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:D.rowNumber}),se.map(Y=>s("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:D.data[Y]||"N/A"},Y)),s("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:D.errors&&D.errors.length>0?s("span",{className:"text-red-500",title:D.errors.join(", "),children:"⚠️"}):s("span",{className:"text-green-500",children:"✅"})})]},`record-${D.rowNumber||U}`))})]})})})()}),s("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:(()=>{let S=[];w==="all"?S=[...b.validRecords||[],...b.invalidRecords||[]]:w==="valid"?S=b.validRecords||[]:w==="errors"&&(S=b.invalidRecords||[]);const B=S.length,G=Math.ceil(B/_),Z=(P-1)*_+1,se=Math.min(P*_,B);return d("div",{className:"flex justify-between items-center",children:[d("p",{className:"text-sm text-gray-600",children:["Mostrando ",Z," - ",se," de ",B," registros"]}),G>1&&d("div",{className:"flex items-center space-x-2",children:[s("button",{onClick:()=>Q(P-1),disabled:P===1,className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),s("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,G)},(D,U)=>{let Y=1;return G<=5||P<=3?Y=U+1:P>=G-2?Y=G-4+U:Y=P-2+U,s("button",{onClick:()=>Q(Y),className:`px-3 py-1 text-sm rounded-md ${P===Y?"bg-blue-500 text-white":"bg-white border border-gray-300 hover:bg-gray-50"}`,children:Y},Y)})}),s("button",{onClick:()=>Q(P+1),disabled:P===G,className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})})()})]})})]})},Y1=({onRefresh:e})=>{const[t,r]=p.useState([]),[n,a]=p.useState(!0),[o,l]=p.useState(1),[i,c]=p.useState(1),[m,f]=p.useState(0),[u,h]=p.useState({uploadType:"",status:"",bimestreId:""}),[b,y]=p.useState(!1),[w,N]=p.useState(null),[x,g]=p.useState(!1),[v,E]=p.useState([]),{showToast:P}=uc(),T=new dc,_=20;p.useEffect(()=>{j(),X()},[o,u]);const j=async()=>{try{const R=await T.findAll();E(R)}catch(R){console.error("Error al cargar bimestres:",R)}},X=async()=>{try{a(!0);const R=Object.fromEntries(Object.entries(u).filter(([I,K])=>K!=="")),$=await sr.getUploadHistory(o,_,R);r($.uploads),f($.total),c(Math.ceil($.total/_))}catch(R){P(R.message||"Error al cargar el historial de cargas","error")}finally{a(!1)}},q=(R,$)=>{h(I=>({...I,[R]:$})),l(1)},re=()=>{h({uploadType:"",status:"",bimestreId:""}),l(1)},ee=R=>{N(R),g(!0)},F=R=>({Exitoso:"bg-green-100 text-green-800","Con errores":"bg-yellow-100 text-yellow-800",Error:"bg-red-100 text-red-800"})[R]||"bg-gray-100 text-gray-800",M=R=>({Pendiente:"bg-blue-100 text-blue-800",Aprobado:"bg-green-100 text-green-800",Rechazado:"bg-red-100 text-red-800"})[R]||"bg-gray-100 text-gray-800",Q=R=>new Date(R).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),te=R=>({ESTRUCTURA_ACADEMICA:"Estructura Académica",NOMINA_DOCENTES:"Nómina de Docentes",REPORTE_CURSABLES:"Reporte de Cursables",ADOL:"ADOL",DOL:"DOL",VACANTES_INICIO:"Vacantes de Inicio",PAYMENT_CODES:"Códigos de Pago",ASIGNATURAS_OPTATIVAS:"Asignaturas Optativas"})[R]||R,H=()=>{const R=[];let I=Math.max(1,o-Math.floor(2.5)),K=Math.min(i,I+5-1);K-I+1<5&&(I=Math.max(1,K-5+1));for(let J=I;J<=K;J++)R.push(s("button",{onClick:()=>l(J),className:`px-3 py-2 text-sm font-medium ${J===o?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"} border border-gray-300`,children:J},J));return d("div",{className:"flex items-center justify-between px-6 py-3 bg-white border-t border-gray-200",children:[d("div",{className:"flex items-center text-sm text-gray-700",children:["Mostrando ",(o-1)*_+1," a ",Math.min(o*_,m)," de ",m," registros"]}),d("div",{className:"flex items-center space-x-1",children:[s("button",{onClick:()=>l(J=>Math.max(1,J-1)),disabled:o===1,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),R,s("button",{onClick:()=>l(J=>Math.min(i,J+1)),disabled:o===i,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})};return d(Et,{children:[d("div",{className:"bg-white rounded-lg shadow max-w-none w-full",children:[d("div",{className:"px-6 py-4 border-b border-gray-200",children:[d("div",{className:"flex justify-between items-center",children:[s("h3",{className:"text-lg font-medium text-gray-900",children:"Historial de Cargas"}),d("div",{className:"flex space-x-3",children:[s("button",{onClick:()=>y(!b),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:b?"Ocultar Filtros":"Mostrar Filtros"}),s("button",{onClick:X,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Actualizar"})]})]}),b&&d("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),d("select",{value:u.uploadType,onChange:R=>q("uploadType",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s("option",{value:"",children:"Todos"}),s("option",{value:"ESTRUCTURA_ACADEMICA",children:"Estructura Académica"}),s("option",{value:"NOMINA_DOCENTES",children:"Nómina de Docentes"}),s("option",{value:"REPORTE_CURSABLES",children:"Reporte de Cursables"}),s("option",{value:"ADOL",children:"ADOL"}),s("option",{value:"DOL",children:"DOL"}),s("option",{value:"VACANTES_INICIO",children:"Vacantes de Inicio"}),s("option",{value:"ASIGNATURAS_OPTATIVAS",children:"Asignaturas Optativas"})]})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),d("select",{value:u.status,onChange:R=>q("status",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s("option",{value:"",children:"Todos"}),s("option",{value:"Exitoso",children:"Exitoso"}),s("option",{value:"Con errores",children:"Con errores"}),s("option",{value:"Error",children:"Error"})]})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bimestre"}),d("select",{value:u.bimestreId,onChange:R=>q("bimestreId",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s("option",{value:"",children:"Todos"}),v.map(R=>s("option",{value:R.id,children:R.nombre},R.id))]})]}),s("div",{className:"md:col-span-3",children:s("button",{onClick:re,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Limpiar Filtros"})})]})]}),n?s("div",{className:"p-6",children:s("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((R,$)=>s("div",{className:"h-16 bg-gray-200 rounded"},$))})}):d(Et,{children:[s("div",{className:"overflow-x-auto",children:d("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[s("thead",{className:"bg-gray-50",children:d("tr",{children:[s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Archivo"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bimestre"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aprobación"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registros"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),s("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?s("tr",{children:s("td",{colSpan:9,className:"px-3 py-3 text-center text-gray-500 text-xs",children:"No se encontraron cargas"})}):t.map(R=>d("tr",{className:"hover:bg-gray-50",children:[s("td",{className:"px-3 py-3 whitespace-nowrap text-xs text-gray-900",children:s("div",{className:"max-w-xs truncate",title:R.file_name,children:R.file_name})}),s("td",{className:"px-3 py-3 whitespace-nowrap text-xs text-gray-900",children:te(R.upload_type)}),s("td",{className:"px-3 py-3 whitespace-nowrap text-xs text-gray-900",children:Q(R.upload_date)}),s("td",{className:"px-3 py-3 whitespace-nowrap text-xs text-gray-900",children:R.bimestre||"N/A"}),s("td",{className:"px-3 py-3 whitespace-nowrap",children:s("span",{className:`inline-flex px-1 py-0.5 text-xs font-semibold rounded-full ${F(R.status)}`,children:R.status})}),s("td",{className:"px-3 py-3 whitespace-nowrap",children:s("span",{className:`inline-flex px-1 py-0.5 text-xs font-semibold rounded-full ${M(R.approval_status)}`,children:R.approval_status})}),s("td",{className:"px-3 py-3 whitespace-nowrap text-xs text-gray-900",children:R.error_count>0?`${R.total_records} (${R.error_count} errores)`:R.total_records}),s("td",{className:"px-3 py-3 whitespace-nowrap text-xs text-gray-900",children:R.user_name||"N/A"}),s("td",{className:"px-3 py-3 whitespace-nowrap text-xs font-medium",children:s("button",{onClick:()=>ee(R),className:"text-blue-600 hover:text-blue-900 text-xs",children:"Ver Detalles"})})]},R.id))})]})}),i>1&&H()]})]}),x&&w&&s("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s("div",{className:"relative top-20 mx-auto p-5 border w-2/3 max-w-4xl shadow-lg rounded-md bg-white",children:d("div",{className:"mt-3",children:[d("div",{className:"flex justify-between items-center mb-4",children:[s("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles de Carga"}),s("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:s("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Archivo"}),s("p",{className:"text-sm text-gray-900",children:w.file_name})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),s("p",{className:"text-sm text-gray-900",children:te(w.upload_type)})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de Carga"}),s("p",{className:"text-sm text-gray-900",children:Q(w.upload_date)})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Bimestre"}),s("p",{className:"text-sm text-gray-900",children:w.bimestre||"N/A"})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${F(w.status)}`,children:w.status})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Estado de Aprobación"}),s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M(w.approval_status)}`,children:w.approval_status})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Total de Registros"}),s("p",{className:"text-sm text-gray-900",children:w.total_records})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Errores"}),s("p",{className:"text-sm text-gray-900",children:w.error_count})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Usuario"}),s("p",{className:"text-sm text-gray-900",children:w.user_name||"N/A"})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Procesado"}),s("p",{className:"text-sm text-gray-900",children:w.is_processed?"Sí":"No"})]}),w.approved_by_name&&d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Aprobado por"}),s("p",{className:"text-sm text-gray-900",children:w.approved_by_name})]}),w.approved_at&&d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de Aprobación"}),s("p",{className:"text-sm text-gray-900",children:Q(w.approved_at)})]})]}),w.error_details&&d("div",{className:"mb-4",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detalles de Errores"}),s("div",{className:"bg-gray-50 p-3 rounded-md",children:s("pre",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:w.error_details})})]}),s("div",{className:"flex justify-end",children:s("button",{onClick:()=>g(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cerrar"})})]})})})]})},J1=()=>{var R,$;const[e,t]=p.useState(""),[r,n]=p.useState(null),[a,o]=p.useState(!1),[l,i]=p.useState(0),[c,m]=p.useState(!1),[f,u]=p.useState(null),[h,b]=p.useState([]),[y,w]=p.useState(null),[N,x]=p.useState(!1),[g,v]=p.useState(""),[E,P]=p.useState("upload"),{bimestres:T,bimestreSeleccionado:_,fetchBimestresActivos:j}=jt(),X=[{id:"academic-structures",name:"Estructura Académica",description:"Información de programas, asignaturas y planes de estudio",icon:"🏛️",format:".xlsx",templateName:"estructura_academica_template.xlsx",endpoint:"estructura-academica"},{id:"reporte-cursables",name:"Reporte de Cursables",description:"Asignaturas disponibles para programar en el período",icon:"📚",format:".xlsx",templateName:"reporte_cursables_template.xlsx",endpoint:"reporte-cursables"},{id:"nomina-docentes",name:"Nómina de Docentes",description:"Información de docentes",icon:"👨‍🏫",format:".xlsx",templateName:"nomina_docentes_template.xlsx",endpoint:"nomina-docentes"},{id:"adol",name:"ADOL - Cargos Docentes",description:"Cargos que se pueden asignar a docentes y sus siglas identificadoras",icon:"👔",format:".xlsx",templateName:"adol_template.xlsx",endpoint:"adol"},{id:"dol",name:"DOL - Cargos Docentes",description:"Conceptos que categorizan planes y asignaturas",icon:"📋",format:".xlsx",templateName:"dol_template.xlsx",endpoint:"dol"},{id:"vacantes-inicio",name:"Vacantes Inicio",description:"información de vacantes de inicio",icon:"🏁",format:".xlsx",templateName:"vacantes_inicio_template.xlsx",endpoint:"vacantes-inicio"},{id:"ramos-optativos",name:"Asignaturas Optativas",description:"Información de asignaturas optativas disponibles para el período académico",icon:"🎯",format:".xlsx",templateName:"ramos_optativos_template.xlsx",endpoint:"asignaturas-optativas"}];p.useEffect(()=>{q(),j()},[j]),p.useEffect(()=>{_&&!r&&n(_.id)},[_,r]);const q=async()=>{try{const I=await sr.getSystemStats();w(I)}catch(I){console.error("Error loading system stats:",I)}},re=I=>{I.preventDefault(),I.stopPropagation(),I.type==="dragenter"||I.type==="dragover"?o(!0):I.type==="dragleave"&&o(!1)},ee=I=>{I.preventDefault(),I.stopPropagation(),o(!1),I.dataTransfer.files&&I.dataTransfer.files[0]&&Q(I.dataTransfer.files[0])},F=I=>{I.target.files&&I.target.files[0]&&Q(I.target.files[0])},M=async I=>{try{await Q1.downloadTemplate(I),console.log(`Descargando plantilla: ${I}`)}catch(K){console.error("Error al descargar la plantilla:",K),alert("Error al descargar la plantilla")}},Q=async I=>{if(!e){alert("Por favor selecciona el tipo de archivo primero");return}const K=X.find(J=>J.id===e);if(!K){alert("Tipo de archivo no válido");return}if(!r){alert(`Por favor selecciona un bimestre para cargar datos de ${K.name}`);return}if(!I.name.match(/\.(xlsx|xls)$/i)){alert("Solo se permiten archivos Excel (.xlsx, .xls)");return}if(I.size>10*1024*1024){alert("El archivo es demasiado grande. Máximo 10MB permitido.");return}m(!0),i(0),u(null);try{const J=setInterval(()=>{i(S=>S>=90?(clearInterval(J),90):S+10)},200),fe=r?{bimestreId:r}:{},C=await sr.uploadFile(K.endpoint,I,fe);clearInterval(J),i(100),setTimeout(()=>{var G,Z;m(!1),u(C);const S=T.find(se=>se.id===r),B={id:Date.now().toString(),filename:I.name,type:K.name,date:new Date().toISOString(),bimestre:S?`${S.nombre} (${S.fechaInicio} - ${S.fechaFin})`:"No especificado",status:C.success?"Exitoso":"Con errores",records:((G=C.summary)==null?void 0:G.totalRecords)||0,errors:((Z=C.summary)==null?void 0:Z.invalidRecords)||0};b(se=>[B,...se]),q()},1e3)}catch(J){console.error("Upload error:",J),m(!1),u({success:!1,message:"Error al cargar el archivo. Por favor intenta nuevamente.",summary:{totalRecords:0,validRecords:0,invalidRecords:0,errors:[J instanceof Error?J.message:"Error desconocido"]}})}},te=()=>{x(!1),v("")},H=()=>{q()};return d("div",{className:"data-upload-page p-6 max-w-7xl mx-auto",children:[d("div",{className:"mb-8",children:[s("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"📁 Carga de Datos"}),s("p",{className:"text-gray-600",children:"Carga y gestiona archivos Excel para alimentar el sistema de planificación académica"})]}),s("div",{className:"mb-6",children:d("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[s("button",{onClick:()=>P("upload"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${E==="upload"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Cargar Archivos"}),s("button",{onClick:()=>P("recent"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${E==="recent"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Cargas Recientes"}),s("button",{onClick:()=>P("history"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${E==="history"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Historial Completo"})]})}),E==="upload"&&d(Et,{children:[s("div",{className:"mb-8",children:y&&d("div",{className:"mt-4 flex items-center space-x-6 text-sm text-gray-600",children:[d("div",{className:"flex items-center",children:[s("span",{className:"mr-1",children:"🏛️"}),s("span",{children:"Estructuras académicas"})]}),d("div",{className:"flex items-center",children:[s("span",{className:"mr-1",children:"👨‍🏫"}),s("span",{children:"Docentes"})]}),d("div",{className:"flex items-center",children:[s("span",{className:"mr-1",children:"📚"}),s("span",{children:"Reportes de curso"})]}),d("div",{className:"flex items-center",children:[s("span",{className:"mr-1",children:"👔"}),s("span",{children:"ADOL"})]}),d("div",{className:"flex items-center",children:[s("span",{className:"mr-1",children:"📋"}),s("span",{children:"DOL"})]}),d("div",{className:"flex items-center",children:[s("span",{className:"mr-1",children:"🏁"}),s("span",{children:"Vacantes Inicio"})]}),d("div",{className:"flex items-center",children:[s("span",{className:"mr-1",children:"🎯"}),s("span",{children:"Asignaturas Optativas"})]})]})}),d("div",{className:"mb-8",children:[s("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Seleccionar Tipo de Archivo"}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:X.map(I=>s("div",{className:`p-6 rounded-lg border-2 transition-all duration-200 ${e===I.id?"border-uc-blue bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:d("div",{className:"text-center",children:[s("div",{className:"text-3xl mb-3",children:I.icon}),s("h3",{className:"font-semibold text-gray-900 mb-2",children:I.name}),s("p",{className:"text-sm text-gray-600 mb-3",children:I.description}),d("div",{className:"flex flex-col gap-2 mt-4",children:[s("button",{onClick:()=>t(I.id),className:`px-4 py-2 rounded-md font-medium transition-colors duration-200 ${e===I.id?"bg-uc-blue text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e===I.id?"Seleccionado":"Seleccionar"}),d("button",{onClick:K=>{K.stopPropagation(),M(I.templateName)},className:"px-4 py-2 bg-green-600 text-white rounded-md font-medium hover:bg-green-700 transition-colors duration-200 flex items-center justify-center gap-2",children:[s("span",{children:"📥"}),"Descargar Plantilla"]})]})]})},I.id))})]}),e&&s("div",{className:"mb-8",children:d("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[d("div",{className:"p-6 border-b border-gray-200",children:[d("div",{children:[d("h3",{className:"text-lg font-semibold text-gray-900",children:["Cargar ",(R=X.find(I=>I.id===e))==null?void 0:R.name]}),s("p",{className:"text-sm text-gray-600 mt-1",children:"Arrastra tu archivo aquí"})]}),e&&d("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[d("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s("span",{className:"mr-2",children:"📅"}),"Seleccionar Bimestre (Requerido)"]}),d("select",{value:r||"",onChange:I=>n(I.target.value?parseInt(I.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-uc-blue focus:border-uc-blue",required:!0,children:[s("option",{value:"",children:"Selecciona un bimestre..."}),T.map(I=>{const K=J=>new Date(J+"T00:00:00");return d("option",{value:I.id,children:[I.nombre," (",K(I.fechaInicio).toLocaleDateString("es-ES")," - ",K(I.fechaFin).toLocaleDateString("es-ES"),")"]},I.id)})]}),!r&&d("p",{className:"mt-2 text-sm text-amber-600",children:["⚠️ Debes seleccionar un bimestre antes de cargar el archivo ",e==null?void 0:e.toUpperCase()]})]})]}),d("div",{className:"p-6",children:[d("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors duration-200 ${a?"border-uc-blue bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:re,onDragLeave:re,onDragOver:re,onDrop:ee,children:[s("input",{type:"file",id:"file-upload",className:"hidden",accept:".xlsx,.xls",onChange:F}),s("div",{className:"text-6xl mb-4",children:"📁"}),s("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Arrastra tu archivo Excel aquí"}),s("p",{className:"text-sm text-gray-500",children:"Acepta archivos .xlsx y .xls (máximo 10MB)"}),c&&d("div",{className:"mt-6",children:[s("div",{className:"bg-gray-200 rounded-full h-2 mb-2",children:s("div",{className:"bg-uc-blue h-2 rounded-full transition-all duration-300",style:{width:`${l}%`}})}),d("p",{className:"text-sm text-gray-600",children:["Procesando archivo... ",l,"%"]})]}),!c&&s("div",{className:"mt-4 flex justify-center",children:s("label",{htmlFor:"file-upload",className:"px-6 py-2 bg-uc-yellow text-black rounded-lg hover:bg-yellow-500 transition-colors duration-200 cursor-pointer font-medium",children:"Cargar y Procesar"})})]}),f&&d("div",{className:"mt-6 p-4 rounded-lg border",children:[d("div",{className:`flex items-center mb-3 ${f.success?"text-green-700":"text-red-700"}`,children:[s("span",{className:"mr-2 text-xl",children:f.success?"✅":"❌"}),s("h4",{className:"font-semibold",children:f.message})]}),f.summary&&d("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[d("div",{className:"text-center p-3 bg-gray-50 rounded",children:[s("div",{className:"text-2xl font-bold text-uc-blue",children:f.summary.totalRecords}),s("div",{className:"text-sm text-gray-600",children:"Total Registros"})]}),d("div",{className:"text-center p-3 bg-green-50 rounded",children:[s("div",{className:"text-2xl font-bold text-green-600",children:f.summary.validRecords}),s("div",{className:"text-sm text-gray-600",children:"Válidos"})]}),d("div",{className:"text-center p-3 bg-red-50 rounded",children:[s("div",{className:"text-2xl font-bold text-red-600",children:f.summary.invalidRecords}),s("div",{className:"text-sm text-gray-600",children:"Con Errores"})]})]}),(($=f.summary)==null?void 0:$.errors)&&f.summary.errors.length>0&&d("div",{className:"mt-4",children:[s("h5",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados:"}),s("div",{className:"bg-red-50 p-3 rounded max-h-32 overflow-y-auto",children:s("ul",{className:"text-sm text-red-700 space-y-1",children:f.summary.errors.map((I,K)=>d("li",{children:["• ",typeof I=="string"?I:`Fila ${I.row}: ${I.message} (Campo: ${I.field})`]},`error-${K}-${typeof I=="string"?I.slice(0,20):I.row}`))})})]})]})]})]})}),d("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[d("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[s("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📋 Requisitos del Archivo"}),d("ul",{className:"space-y-2 text-sm text-gray-600",children:[d("li",{className:"flex items-center",children:[s("span",{className:"text-green-500 mr-2",children:"✓"}),"Formato Excel (.xlsx o .xls)"]}),d("li",{className:"flex items-center",children:[s("span",{className:"text-green-500 mr-2",children:"✓"}),"Tamaño máximo: 10MB"]}),d("li",{className:"flex items-center",children:[s("span",{className:"text-green-500 mr-2",children:"✓"}),"Estructura según plantilla oficial"]}),d("li",{className:"flex items-center",children:[s("span",{className:"text-green-500 mr-2",children:"✓"}),"Datos completos y válidos"]}),d("li",{className:"flex items-center",children:[s("span",{className:"text-green-500 mr-2",children:"✓"}),"Sin filas vacías entre datos"]})]})]}),d("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[s("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"⚠️ Consideraciones Importantes"}),d("ul",{className:"space-y-2 text-sm text-gray-600",children:[d("li",{className:"flex items-start",children:[s("span",{className:"text-yellow-500 mr-2 mt-0.5",children:"•"}),s("span",{children:"Los datos existentes serán reemplazados"})]}),d("li",{className:"flex items-start",children:[s("span",{className:"text-yellow-500 mr-2 mt-0.5",children:"•"}),s("span",{children:"Realiza una copia de seguridad antes de cargar"})]}),d("li",{className:"flex items-start",children:[s("span",{className:"text-yellow-500 mr-2 mt-0.5",children:"•"}),s("span",{children:"Valida los datos antes del procesamiento final"})]}),d("li",{className:"flex items-start",children:[s("span",{className:"text-yellow-500 mr-2 mt-0.5",children:"•"}),s("span",{children:"El proceso puede tomar varios minutos"})]})]})]})]})]}),E==="recent"&&s(K1,{onRefresh:H}),E==="history"&&s(Y1,{onRefresh:H}),s(G1,{isOpen:N,onClose:te,uploadId:g})]})};function Z1({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const X1=p.forwardRef(Z1),ew=X1;function tw({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const rw=p.forwardRef(tw),nw=rw;class aw{constructor(){Vr(this,"baseUrl","/users")}async getUsers(t){try{const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.roleId&&r.append("roleId",t.roleId.toString()),(t==null?void 0:t.isActive)!==void 0&&r.append("isActive",t.isActive.toString());const n=r.toString()?`${this.baseUrl}?${r.toString()}`:this.baseUrl;return(await z.get(n)).data}catch(r){throw console.error("Error fetching users:",r),r}}async getUserById(t){try{return(await z.get(`${this.baseUrl}/${t}`)).data}catch(r){return console.error("Error fetching user:",r),null}}async updateUser(t,r,n){try{const a=n?`${this.baseUrl}/${t}?bimestreId=${n}`:`${this.baseUrl}/${t}`;return(await z.put(a,r)).data}catch(a){throw console.error("Error updating user:",a),a}}async createUser(t,r){try{const n=r?`${this.baseUrl}?bimestreId=${r}`:this.baseUrl;return(await z.post(n,t)).data}catch(n){throw console.error("Error creating user:",n),n}}async deleteUser(t){try{return(await z.delete(`${this.baseUrl}/${t}`)).data}catch(r){throw console.error("Error deleting user:",r),r}}async adminChangePassword(t){try{return(await z.post(`${this.baseUrl}/admin-change-password`,t)).data}catch(r){throw console.error("Error changing user password:",r),r}}async importUsers(t){var r;try{return(await z.post(`${this.baseUrl}/import`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error importing users:",n),(r=n.response)!=null&&r.data?new Error(n.response.data.message||"Error al importar usuarios"):new Error("Error al importar usuarios")}}async getUserPermissions(t,r){try{const n=r?`${this.baseUrl}/${t}/permissions?bimestreId=${r}`:`${this.baseUrl}/${t}/permissions`;return(await z.get(n)).data}catch(n){throw console.error("Error fetching user permissions:",n),n}}async updateUserPermissions(t,r,n){try{const a=n?`${this.baseUrl}/${t}/permissions?bimestreId=${n}`:`${this.baseUrl}/${t}/permissions`;return(await z.put(a,r)).data}catch(a){throw console.error("Error updating user permissions:",a),a}}}const _r=new aw,tp=({isOpen:e,onClose:t,title:r,children:n,size:a="md"})=>{const o=p.useRef(null);return p.useEffect(()=>{e&&o.current&&setTimeout(()=>{o.current&&(o.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100))},10)},[e]),e?d("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[s("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),s("div",{ref:o,className:"flex items-center justify-center min-h-screen p-4",children:d("div",{className:`
          relative bg-white rounded-lg shadow-xl w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[a]}
          transform transition-all
        `,children:[d("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s("h3",{className:"text-lg font-semibold text-gray-900",children:r}),s("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s("div",{className:"p-6",children:n})]})})]}):null};class ow{async getCarreras(t){const r=t?{bimestreId:t.toString()}:{};return(await z.get("/carreras",{params:r})).data}}const rp=new ow,sw=({isOpen:e,onClose:t,user:r,onUserUpdated:n})=>{const{bimestreSeleccionado:a}=jt(),[o,l]=p.useState({name:"",emailInstitucional:"",roleId:1,roleExpiresAt:"",previousRoleId:1,isActive:!0,tipoPermiso:void 0,categorias:[],carreras:[]}),[i,c]=p.useState({newPassword:"",confirmPassword:"",adminPassword:"",changePassword:!1}),[m,f]=p.useState(!1),[u,h]=p.useState({}),[b,y]=p.useState([]),[w,N]=p.useState(!0),[x,g]=p.useState([]),[v,E]=p.useState([]),[P,T]=p.useState(!0),[_,j]=p.useState(!0),[X,q]=p.useState(null),[re,ee]=p.useState(!0),[F,M]=p.useState(null),Q=()=>{const C=b.find(S=>S.name==="Visualizador");return(C==null?void 0:C.id)||1},te=()=>{const C=b.find(S=>S.name==="Editor");return(C==null?void 0:C.id)||2};p.useEffect(()=>{(async()=>{try{N(!0);const S=await ct.getRoles();y(S)}catch(S){console.error("Error cargando roles:",S),y([{id:3,name:"Maestro",description:"Rol de maestro"},{id:2,name:"Editor",description:"Rol de editor"},{id:1,name:"Visualizador",description:"Rol de visualizador"}])}finally{N(!1)}})()},[]),p.useEffect(()=>{e&&(async()=>{try{T(!0),j(!0);const[S,B]=await Promise.all([rp.getCarreras(a==null?void 0:a.id),$o.getCategorias(a==null?void 0:a.id)]);g(S),E(B)}catch(S){console.error("Error loading carreras y categorias:",S),h(B=>({...B,carreras:"Error al cargar carreras y categorías"}))}finally{T(!1),j(!1)}})()},[e,a==null?void 0:a.id]),p.useEffect(()=>{e&&r&&a&&(async()=>{if(!(!r||!a))try{ee(!0);const S=await _r.getUserPermissions(r.id,a.id);q(S),S&&l(B=>({...B,tipoPermiso:S.tipoPermiso,categorias:S.categorias||[],carreras:S.carreras||[]}))}catch(S){console.error("Error loading user permissions:",S),q(null)}finally{ee(!1)}})()},[e,r,a]),p.useEffect(()=>{e&&(c({newPassword:"",confirmPassword:"",adminPassword:"",changePassword:!1}),M(null))},[e]),p.useEffect(()=>{if(r&&b.length>0){const C=Q();l({name:r.name,emailInstitucional:r.emailInstitucional,roleId:r.roleId,roleExpiresAt:r.roleExpiresAt?new Date(r.roleExpiresAt).toISOString().slice(0,10):"",previousRoleId:r.previousRoleId||C,isActive:r.isActive})}},[r,b]),p.useEffect(()=>{if(b.length>0&&!r){const C=Q();l(S=>({...S,roleId:C,previousRoleId:C}))}},[b]);const H=C=>{const{name:S,value:B,type:G}=C.target,Z=G==="checkbox"?C.target.checked:S==="roleId"||S==="previousRoleId"?parseInt(B)||void 0:B;l(se=>{const D={...se,[S]:Z},U=te();return S==="roleId"&&Z!==U&&(D.roleExpiresAt=""),S==="tipoPermiso"&&(D.categorias=[],D.carreras=[]),D}),u[S]&&h(se=>({...se,[S]:""}))},R=C=>{l(S=>{const B=S.carreras||[],G=B.includes(C);return{...S,carreras:G?B.filter(Z=>Z!==C):[...B,C]}})},$=C=>{l(S=>{const B=S.categorias||[],G=B.includes(C);return{...S,categorias:G?B.filter(Z=>Z!==C):[...B,C]}})},I=C=>{const{name:S,value:B,type:G}=C.target,Z=C.target.checked;c(se=>({...se,[S]:G==="checkbox"?Z:B})),F&&M(null)},K=()=>{const C={};return o.name.trim()||(C.name="El nombre es requerido"),o.emailInstitucional.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.emailInstitucional)||(C.emailInstitucional="El email debe tener un formato válido"):C.emailInstitucional="El email institucional es requerido",h(C),Object.keys(C).length===0},J=async C=>{var S,B;if(C.preventDefault(),!a){h({general:"Debe seleccionar un bimestre en el navbar antes de editar un usuario. Si no aparece ningún bimestre, contacte al administrador."});return}if(!a.id||a.id<=0){h({general:`Error: El bimestre seleccionado no tiene un ID válido (ID: ${a.id}). Por favor, seleccione otro bimestre.`});return}if(!(!K()||!r)){f(!0),M(null);try{const{tipoPermiso:G,categorias:Z,carreras:se,...D}=o,U={...D,previousRoleId:o.previousRoleId||void 0};if(o.roleExpiresAt&&o.roleExpiresAt.trim()!==""&&(U.roleExpiresAt=`${o.roleExpiresAt}T23:59:59`),o.tipoPermiso==="carrera"?(U.careerPermissionIds=o.carreras||[],U.categoryPermissionIds=[]):o.tipoPermiso==="categoria"&&o.categorias&&o.categorias.length>0?(U.categoryPermissionIds=o.categorias,U.careerPermissionIds=[]):(U.careerPermissionIds=[],U.categoryPermissionIds=[]),Object.keys(U).forEach(Y=>{(U[Y]===void 0||U[Y]==="")&&delete U[Y]}),await _r.updateUser(r.id,U,a==null?void 0:a.id),i.changePassword){if(!i.newPassword){M("La nueva contraseña es requerida"),f(!1);return}if(i.newPassword.length<6){M("La nueva contraseña debe tener al menos 6 caracteres"),f(!1);return}if(i.newPassword!==i.confirmPassword){M("Las contraseñas no coinciden"),f(!1);return}if(!i.adminPassword){M("Debe ingresar su contraseña para validar el cambio"),f(!1);return}const Y={userId:r.id,newPassword:i.newPassword,adminPassword:i.adminPassword};await _r.adminChangePassword(Y)}n(),t()}catch(G){console.error("Error updating user:",G),(B=(S=G.response)==null?void 0:S.data)!=null&&B.message?G.response.data.message.includes("contraseña")?M(G.response.data.message):h({general:G.response.data.message}):h({general:"Error al actualizar el usuario. Por favor, intente nuevamente."})}finally{f(!1)}}},fe=()=>{c({newPassword:"",confirmPassword:"",adminPassword:"",changePassword:!1}),h({}),M(null),t()};return s(tp,{isOpen:e,onClose:fe,title:"Editar Usuario",size:"md",children:d("form",{onSubmit:J,className:"space-y-4",children:[u.general&&s("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:u.general}),d("div",{children:[s("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),s("input",{type:"text",id:"name",name:"name",value:o.name,onChange:H,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${u.name?"border-red-300":"border-gray-300"}`,placeholder:"Ingrese el nombre completo"}),u.name&&s("p",{className:"mt-1 text-sm text-red-600",children:u.name})]}),d("div",{children:[s("label",{htmlFor:"emailInstitucional",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email institucional *"}),s("input",{type:"email",id:"emailInstitucional",name:"emailInstitucional",value:o.emailInstitucional,onChange:H,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${u.emailInstitucional?"border-red-300":"border-gray-300"}`,placeholder:"usuario@institucion.edu"}),u.emailInstitucional&&s("p",{className:"mt-1 text-sm text-red-600",children:u.emailInstitucional})]}),d("div",{children:[s("label",{htmlFor:"roleId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol *"}),s("select",{id:"roleId",name:"roleId",value:o.roleId,onChange:H,disabled:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:w?s("option",{value:"",children:"Cargando roles..."}):b.map(C=>s("option",{value:C.id,children:C.name},C.id))})]}),d("div",{children:[s("label",{htmlFor:"roleExpiresAt",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de expiración del rol"}),s("input",{type:"date",id:"roleExpiresAt",name:"roleExpiresAt",value:o.roleExpiresAt||"",onChange:H,disabled:o.roleId!==te(),className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.roleId!==te()?"bg-gray-100 cursor-not-allowed":""}`,min:new Date().toISOString().split("T")[0]}),s("p",{className:"mt-1 text-xs text-gray-500",children:"Si se especifica, el rol se revertirá automáticamente a Visualizador en esta fecha"})]}),d("div",{style:{display:"none"},children:[s("label",{htmlFor:"previousRoleId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol anterior (para reversión)"}),d("select",{id:"previousRoleId",name:"previousRoleId",value:o.previousRoleId||1,onChange:H,disabled:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s("option",{value:"",children:"Seleccionar rol anterior"}),w?s("option",{value:"",children:"Cargando roles..."}):b.map(C=>s("option",{value:C.id,children:C.name},C.id))]}),s("p",{className:"mt-1 text-xs text-gray-500",children:"Rol al que se revertirá cuando expire el rol temporal"})]}),d("div",{className:"border-t pt-4",children:[d("div",{className:"flex items-center mb-4",children:[s("input",{type:"checkbox",id:"changePassword",name:"changePassword",checked:i.changePassword,onChange:I,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s("label",{htmlFor:"changePassword",className:"ml-2 block text-sm font-medium text-gray-700",children:"Cambiar contraseña del usuario"})]}),i.changePassword&&d("div",{className:"space-y-4 ml-6",children:[d("div",{children:[s("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nueva contraseña *"}),s("input",{type:"password",id:"newPassword",name:"newPassword",value:i.newPassword,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Mínimo 6 caracteres"})]}),d("div",{children:[s("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar nueva contraseña *"}),s("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:i.confirmPassword,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Repita la nueva contraseña"})]}),d("div",{children:[s("label",{htmlFor:"adminPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Su contraseña (para validar) *"}),s("input",{type:"password",id:"adminPassword",name:"adminPassword",value:i.adminPassword,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese su contraseña actual"})]}),F&&s("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:F})]})]}),d("div",{className:"border-t pt-4",children:[s("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Permisos de Acceso"}),re?s("div",{className:"text-sm text-gray-500",children:"Cargando permisos..."}):d(Et,{children:[d("div",{className:"mb-4",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Permiso"}),d("select",{name:"tipoPermiso",value:o.tipoPermiso||"",onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s("option",{value:"",children:"Sin permisos específicos"}),s("option",{value:"categoria",children:"Por Categoría"}),s("option",{value:"carrera",children:"Por Carrera"})]})]}),o.tipoPermiso==="categoria"&&d("div",{className:"mb-4",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categorías * (seleccione una o más)"}),_?s("div",{className:"text-sm text-gray-500",children:"Cargando categorías..."}):s("div",{className:"max-h-40 overflow-y-auto border border-gray-300 rounded-md p-2",children:v.map(C=>{var S;return d("label",{className:"flex items-center mb-2",children:[s("input",{type:"checkbox",checked:((S=o.categorias)==null?void 0:S.includes(C))||!1,onChange:()=>$(C),className:"mr-2"}),s("span",{className:"text-sm",children:C})]},C)})}),o.categorias&&o.categorias.length>0&&d("p",{className:"text-sm text-gray-600 mt-1",children:[o.categorias.length," categoría(s) seleccionada(s)"]})]}),o.tipoPermiso==="carrera"&&d("div",{className:"mb-4",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Carreras *"}),P?s("div",{className:"text-sm text-gray-500",children:"Cargando carreras..."}):s("div",{className:"max-h-40 overflow-y-auto border border-gray-300 rounded-md p-2",children:x.map(C=>{var S;return d("label",{className:"flex items-center mb-2",children:[s("input",{type:"checkbox",checked:((S=o.carreras)==null?void 0:S.includes(C.id))||!1,onChange:()=>R(C.id),className:"mr-2"}),d("span",{className:"text-sm",children:[C.codigo_plan," - ",C.nombre_carrera]})]},C.id)})})]})]})]}),d("div",{className:"flex items-center",children:[s("input",{type:"checkbox",id:"isActive",name:"isActive",checked:o.isActive,onChange:H,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Usuario activo"})]}),d("div",{className:"flex justify-end space-x-3 pt-4",children:[s("button",{type:"button",onClick:fe,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:m,children:"Cancelar"}),s("button",{type:"submit",disabled:m,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Guardando...":"Guardar cambios"})]})]})})},lw=({isOpen:e,onClose:t,onUserCreated:r})=>{const{bimestreSeleccionado:n}=jt(),[a,o]=p.useState({name:"",emailInstitucional:"",password:"",confirmPassword:"",roleId:1,roleExpiresAt:"",previousRoleId:void 0}),[l,i]=p.useState(!1),[c,m]=p.useState({}),[f,u]=p.useState([]),[h,b]=p.useState(!0),[y,w]=p.useState([]),[N,x]=p.useState([]),[g,v]=p.useState(!0),[E,P]=p.useState(!0),T=()=>{const F=f.find(M=>M.name==="Editor");return(F==null?void 0:F.id)||2};p.useEffect(()=>{e&&(async()=>{try{b(!0);const M=await ct.getRoles();u(M),!a.roleId&&M.length>0&&o(Q=>({...Q,roleId:M[0].id}))}catch(M){console.error("Error loading roles:",M),m(Q=>({...Q,roles:"Error al cargar los roles"}))}finally{b(!1)}})()},[e]),p.useEffect(()=>{e&&(async()=>{try{v(!0),P(!0);const[M,Q]=await Promise.all([rp.getCarreras(n==null?void 0:n.id),$o.getCategorias(n==null?void 0:n.id)]);w(M),x(Q)}catch(M){console.error("Error loading carreras y categorias:",M),m(Q=>({...Q,carreras:"Error al cargar carreras y categorías"}))}finally{v(!1),P(!1)}})()},[e,n==null?void 0:n.id]);const _=F=>{const{name:M,value:Q,type:te}=F.target;if(M==="roleId"){const H=parseInt(Q);o(R=>{const $={...R,roleId:H};return H!==T()&&($.roleExpiresAt=""),$})}else o(M==="tipoPermiso"?H=>({...H,tipoPermiso:Q,categorias:[],carreras:[]}):H=>({...H,[M]:Q}));c[M]&&m(H=>({...H,[M]:""}))},j=F=>{o(M=>{const Q=M.carreras||[],te=Q.includes(F);return{...M,carreras:te?Q.filter(H=>H!==F):[...Q,F]}})},X=F=>{o(M=>{const Q=M.categorias||[],te=Q.includes(F);return{...M,categorias:te?Q.filter(H=>H!==F):[...Q,F]}})},q=()=>{const F={};return a.name.trim()||(F.name="El nombre es requerido"),a.emailInstitucional.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.emailInstitucional)||(F.emailInstitucional="El email debe tener un formato válido"):F.emailInstitucional="El email institucional es requerido",a.password.trim()?a.password.length<6&&(F.password="La contraseña debe tener al menos 6 caracteres"):F.password="La contraseña es requerida",a.confirmPassword.trim()?a.password!==a.confirmPassword&&(F.confirmPassword="Las contraseñas no coinciden"):F.confirmPassword="Confirme la contraseña",a.roleId||(F.roleId="Seleccione un rol"),a.tipoPermiso==="categoria"&&(!a.categorias||a.categorias.length===0)&&(F.categorias="Seleccione al menos una categoría"),a.tipoPermiso==="carrera"&&(!a.carreras||a.carreras.length===0)&&(F.carreras="Seleccione al menos una carrera"),m(F),Object.keys(F).length===0},re=async F=>{var M,Q;if(F.preventDefault(),!n){m({general:"Debe seleccionar un bimestre en el navbar antes de crear un usuario. Si no aparece ningún bimestre, contacte al administrador."});return}if(!n.id||n.id<=0){m({general:`Error: El bimestre seleccionado no tiene un ID válido (ID: ${n.id}). Por favor, seleccione otro bimestre.`});return}if(q()){i(!0);try{const te={name:a.name,emailInstitucional:a.emailInstitucional,password:a.password,roleId:a.roleId,...a.previousRoleId&&{previousRoleId:a.previousRoleId},...a.roleExpiresAt&&a.roleId===T()&&{roleExpiresAt:`${a.roleExpiresAt}T23:59:59`},...a.tipoPermiso&&{tipoPermiso:a.tipoPermiso,...a.tipoPermiso==="categoria"&&a.categorias&&{categorias:a.categorias},...a.tipoPermiso==="carrera"&&a.carreras&&{carreras:a.carreras}}};console.log("Creando usuario con bimestreId:",n.id),await _r.createUser(te,n.id),r(),ee()}catch(te){console.error("Error creating user:",te),console.error("BimestreSeleccionado al momento del error:",n);let H="Error al crear el usuario. Por favor, intente nuevamente.";(Q=(M=te.response)==null?void 0:M.data)!=null&&Q.message&&(H=te.response.data.message,(H.includes("bimestreId")||H.includes("requerido"))&&(H+=` (BimestreId enviado: ${(n==null?void 0:n.id)||"undefined"})`)),m({general:H})}finally{i(!1)}}},ee=()=>{o({name:"",emailInstitucional:"",password:"",confirmPassword:"",roleId:1,roleExpiresAt:"",previousRoleId:void 0,tipoPermiso:void 0,categorias:[],carreras:[]}),m({}),t()};return s(tp,{isOpen:e,onClose:ee,title:"Crear Nuevo Usuario",children:d("form",{onSubmit:re,className:"space-y-4",children:[c.general&&s("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:c.general}),d("div",{children:[s("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),s("input",{type:"text",id:"name",name:"name",value:a.name,onChange:_,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.name?"border-red-500":"border-gray-300"}`,placeholder:"Ingrese el nombre completo"}),c.name&&s("p",{className:"text-red-500 text-sm mt-1",children:c.name})]}),d("div",{children:[s("label",{htmlFor:"emailInstitucional",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email institucional *"}),s("input",{type:"email",id:"emailInstitucional",name:"emailInstitucional",value:a.emailInstitucional,onChange:_,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.emailInstitucional?"border-red-500":"border-gray-300"}`,placeholder:"usuario@institucion.edu"}),c.emailInstitucional&&s("p",{className:"text-red-500 text-sm mt-1",children:c.emailInstitucional})]}),d("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d("div",{children:[s("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña *"}),s("input",{type:"password",id:"password",name:"password",value:a.password,onChange:_,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.password?"border-red-500":"border-gray-300"}`,placeholder:"Mínimo 6 caracteres"}),c.password&&s("p",{className:"text-red-500 text-sm mt-1",children:c.password})]}),d("div",{children:[s("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar contraseña *"}),s("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:_,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"Repita la contraseña"}),c.confirmPassword&&s("p",{className:"text-red-500 text-sm mt-1",children:c.confirmPassword})]})]}),d("div",{children:[s("label",{htmlFor:"roleId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol *"}),s("select",{id:"roleId",name:"roleId",value:a.roleId,onChange:_,disabled:h,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.roleId?"border-red-500":"border-gray-300"} ${h?"opacity-50 cursor-not-allowed":""}`,children:h?s("option",{value:"",children:"Cargando roles..."}):f.map(F=>s("option",{value:F.id,children:F.name},F.id))}),c.roleId&&s("p",{className:"text-red-500 text-sm mt-1",children:c.roleId})]}),a.roleId===T()&&d("div",{children:[s("label",{htmlFor:"roleExpiresAt",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de expiración del rol Editor"}),s("input",{type:"date",id:"roleExpiresAt",name:"roleExpiresAt",value:a.roleExpiresAt,onChange:_,min:new Date().toISOString().split("T")[0],className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.roleExpiresAt?"border-red-500":"border-gray-300"}`}),c.roleExpiresAt&&s("p",{className:"text-red-500 text-sm mt-1",children:c.roleExpiresAt}),s("p",{className:"text-sm text-gray-600 mt-1",children:"Después de esta fecha, el rol cambiará automáticamente a Visualizador"})]}),d("div",{className:"border-t pt-4",children:[s("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Permisos de Acceso"}),d("div",{children:[s("label",{htmlFor:"tipoPermiso",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Permiso"}),d("select",{id:"tipoPermiso",name:"tipoPermiso",value:a.tipoPermiso||"",onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s("option",{value:"",children:"Sin permisos específicos"}),s("option",{value:"categoria",children:"Por Categoría de Asignatura"}),s("option",{value:"carrera",children:"Por Carrera"})]})]}),a.tipoPermiso==="categoria"&&d("div",{className:"mt-4",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categorías * (seleccione una o más)"}),s("div",{className:`border rounded-md p-3 max-h-40 overflow-y-auto ${c.categorias?"border-red-500":"border-gray-300"}`,children:E?s("p",{className:"text-gray-500",children:"Cargando categorías..."}):N.length===0?s("p",{className:"text-gray-500",children:"No hay categorías disponibles"}):N.map(F=>{var M;return d("label",{className:"flex items-center space-x-2 py-1 cursor-pointer",children:[s("input",{type:"checkbox",checked:((M=a.categorias)==null?void 0:M.includes(F))||!1,onChange:()=>X(F),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s("span",{className:"text-sm text-gray-700",children:F})]},F)})}),c.categorias&&s("p",{className:"text-red-500 text-sm mt-1",children:c.categorias}),a.categorias&&a.categorias.length>0&&d("p",{className:"text-sm text-gray-600 mt-1",children:[a.categorias.length," categoría(s) seleccionada(s)"]})]}),a.tipoPermiso==="carrera"&&d("div",{className:"mt-4",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Carreras * (seleccione una o más)"}),s("div",{className:`border rounded-md p-3 max-h-40 overflow-y-auto ${c.carreras?"border-red-500":"border-gray-300"}`,children:g?s("p",{className:"text-gray-500",children:"Cargando carreras..."}):y.length===0?s("p",{className:"text-gray-500",children:"No hay carreras disponibles"}):y.map(F=>{var M;return d("label",{className:"flex items-center space-x-2 py-1 cursor-pointer",children:[s("input",{type:"checkbox",checked:((M=a.carreras)==null?void 0:M.includes(F.id))||!1,onChange:()=>j(F.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),d("span",{className:"text-sm text-gray-700",children:[F.codigo_plan," - ",F.nombre_carrera]})]},F.id)})}),c.carreras&&s("p",{className:"text-red-500 text-sm mt-1",children:c.carreras}),a.carreras&&a.carreras.length>0&&d("p",{className:"text-sm text-gray-600 mt-1",children:[a.carreras.length," carrera(s) seleccionada(s)"]})]})]}),d("div",{className:"flex justify-end space-x-3 pt-4",children:[s("button",{type:"button",onClick:ee,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500",disabled:l,children:"Cancelar"}),s("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Creando...":"Crear Usuario"})]})]})})},iw=({isOpen:e,onClose:t,user:r,onUserDeleted:n})=>{const[a,o]=p.useState(!1),[l,i]=p.useState(null),c=async()=>{var f,u;if(r)try{o(!0),i(null),await _r.deleteUser(r.id),n(),t()}catch(h){console.error("Error deleting user:",h),i(((u=(f=h.response)==null?void 0:f.data)==null?void 0:u.message)||"Error al eliminar el usuario. Por favor, inténtalo de nuevo.")}finally{o(!1)}},m=()=>{a||(i(null),t())};return!e||!r?null:s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[d("div",{className:"flex items-center mb-4",children:[s("div",{className:"flex-shrink-0",children:s(_t,{className:"h-6 w-6 text-red-600"})}),s("div",{className:"ml-3",children:s("h3",{className:"text-lg font-medium text-gray-900",children:"Confirmar eliminación"})})]}),d("div",{className:"mb-4",children:[d("p",{className:"text-sm text-gray-500",children:["¿Estás seguro de que deseas eliminar al usuario"," ",s("span",{className:"font-medium text-gray-900",children:r.name}),"?"]}),s("p",{className:"text-sm text-gray-500 mt-2",children:"Esta acción no se puede deshacer."})]}),l&&s("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:l}),d("div",{className:"flex justify-end space-x-3",children:[s("button",{type:"button",onClick:m,disabled:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-uc-blue disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),d("button",{type:"button",onClick:c,disabled:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[a&&s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),a?"Eliminando...":"Eliminar"]})]})]})})},cw=({isOpen:e,onClose:t,onUsersImported:r})=>{const[n,a]=p.useState(null),[o,l]=p.useState(!1),[i,c]=p.useState(null),[m,f]=p.useState(!1),u=p.useRef(null),{bimestreSeleccionado:h}=jt(),b=E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?f(!0):E.type==="dragleave"&&f(!1)},y=E=>{E.preventDefault(),E.stopPropagation(),f(!1);const P=E.dataTransfer.files;P&&P[0]&&w(P[0])},w=E=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(E.type)){alert("Por favor selecciona un archivo Excel (.xlsx, .xls) o CSV (.csv)");return}a(E),c(null)},N=E=>{var T;const P=(T=E.target.files)==null?void 0:T[0];P&&w(P)},x=async()=>{if(n){if(!h){c({success:!1,message:"Debe seleccionar un bimestre en el navbar antes de importar usuarios"});return}l(!0),c(null);try{const E=new FormData;E.append("file",n),E.append("bimestreId",h.id.toString());const P=await _r.importUsers(E);c(P),P.success&&r()}catch(E){c({success:!1,message:E.message||"Error al importar usuarios"})}finally{l(!1)}}},g=()=>{a(null),c(null),l(!1),t()},v=()=>{const E=document.createElement("a");E.href="/templates/plantilla_usuarios.xlsx",E.download="plantilla_usuarios.xlsx",document.body.appendChild(E),E.click(),document.body.removeChild(E)};return e?s("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:d("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[d("div",{className:"flex items-center justify-between mb-4",children:[s("h3",{className:"text-lg font-medium text-gray-900",children:"Importar Usuarios"}),s("button",{onClick:g,className:"text-gray-400 hover:text-gray-600",children:s(on,{className:"h-6 w-6"})})]}),!i&&d(Et,{children:[d("div",{className:"mb-4",children:[s("p",{className:"text-sm text-gray-600 mb-2",children:"Sube un archivo Excel (.xlsx, .xls) o CSV (.csv) con la información de los usuarios."}),s("button",{onClick:v,className:"text-blue-600 hover:text-blue-800 text-sm underline",children:"Descargar plantilla de ejemplo"})]}),d("div",{className:`border-2 border-dashed rounded-lg p-6 text-center ${m?"border-blue-400 bg-blue-50":"border-gray-300"}`,onDragEnter:b,onDragLeave:b,onDragOver:b,onDrop:y,children:[s(Mo,{className:"mx-auto h-12 w-12 text-gray-400"}),d("div",{className:"mt-4",children:[d("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[s("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:n?n.name:"Arrastra un archivo aquí o haz clic para seleccionar"}),s("input",{ref:u,id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:".xlsx,.xls,.csv",onChange:N})]}),s("p",{className:"mt-1 text-xs text-gray-500",children:"Excel (.xlsx, .xls) o CSV hasta 10MB"})]})]}),n&&s("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:d("div",{className:"flex items-center",children:[s(Mo,{className:"h-5 w-5 text-gray-400 mr-2"}),s("span",{className:"text-sm text-gray-900",children:n.name}),d("span",{className:"text-xs text-gray-500 ml-2",children:["(",(n.size/1024/1024).toFixed(2)," MB)"]})]})}),s("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-md p-4",children:d("div",{className:"flex",children:[s(_t,{className:"h-5 w-5 text-blue-400 mr-2"}),d("div",{className:"text-sm text-blue-700",children:[s("p",{className:"font-medium mb-1",children:"Formato esperado:"}),d("ul",{className:"list-disc list-inside space-y-1",children:[d("li",{children:[s("strong",{children:"Columnas requeridas:"})," Usuario, Mail, Nombre, Tipo de Rol"]}),d("li",{children:[s("strong",{children:"Columnas opcionales:"})," Cargo, Carrera, Categoria, Expiracion"]}),s("li",{children:"El Mail debe ser único y válido"}),s("li",{children:"El Tipo de Rol debe existir en el sistema (Editor, Administrador, Visualizador)"}),s("li",{children:"Carrera: código de carrera para permisos específicos"}),s("li",{children:"Categoria: TRAN para transversales u otras categorías especiales"}),s("li",{children:"Expiracion: fecha en formato DD-MM-YYYY (ejemplo: 31-12-2024)"})]})]})]})})]}),i&&s("div",{className:`p-4 rounded-md ${i.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:d("div",{className:"flex",children:[i.success?s(vx,{className:"h-5 w-5 text-green-400 mr-2"}):s(_t,{className:"h-5 w-5 text-red-400 mr-2"}),d("div",{className:"flex-1",children:[s("h4",{className:`text-sm font-medium ${i.success?"text-green-800":"text-red-800"}`,children:i.success?"Importación exitosa":"Error en la importación"}),s("p",{className:`text-sm mt-1 ${i.success?"text-green-700":"text-red-700"}`,children:i.message}),i.details&&d("div",{className:"mt-2 text-sm",children:[d("p",{className:i.success?"text-green-700":"text-red-700",children:["Procesados: ",i.details.processed," | Creados: ",i.details.created," | Actualizados: ",i.details.updated," | Errores: ",i.details.errors]}),i.details.errorDetails&&i.details.errorDetails.length>0&&d("div",{className:"mt-2",children:[s("p",{className:"font-medium text-red-800",children:"Detalles de errores:"}),d("ul",{className:"list-disc list-inside mt-1 text-red-700",children:[i.details.errorDetails.slice(0,5).map((E,P)=>s("li",{className:"text-xs",children:E},`error-${P}-${E.substring(0,20)}`)),i.details.errorDetails.length>5&&d("li",{className:"text-xs",children:["... y ",i.details.errorDetails.length-5," errores más"]})]})]})]})]})]})}),d("div",{className:"mt-6 flex justify-end space-x-3",children:[s("button",{onClick:g,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:i?"Cerrar":"Cancelar"}),!i&&s("button",{onClick:x,disabled:!n||o,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Importando...":"Importar"})]})]})}):null},dw=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0),[a,o]=p.useState(null),[l,i]=p.useState(""),[c,m]=p.useState("Todos los roles"),[f,u]=p.useState(1),[h,b]=p.useState(0),[y,w]=p.useState(0),[N,x]=p.useState(!1),[g,v]=p.useState(null),[E,P]=p.useState(!1),[T,_]=p.useState(!1),[j,X]=p.useState(!1),[q,re]=p.useState(null),[ee,F]=p.useState([]),M=10,Q=async()=>{try{n(!0),o(null);const V={page:f,limit:M,search:l||void 0,roleId:c!=="Todos los roles"?te(c):void 0},ue=await _r.getUsers(V);t(ue.users),b(ue.total),w(Math.ceil(ue.total/M))}catch(V){o("Error al cargar los usuarios"),console.error("Error loading users:",V)}finally{n(!1)}},te=V=>{const ue=ee.find(Qe=>Qe.name===V);return ue==null?void 0:ue.id},H=V=>V.roleName||"Desconocido",R=e.filter(V=>V.isActive).length,$=ee.find(V=>V.name==="Maestro"),I=ee.find(V=>V.name==="Editor"),K=$?e.filter(V=>V.roleId===$.id).length:0,J=I?e.filter(V=>V.roleId===I.id).length:0,fe=async()=>{try{const V=await ct.getRoles();F(V)}catch(V){console.error("Error loading roles:",V)}};p.useEffect(()=>{fe()},[]),p.useEffect(()=>{ee.length>0&&Q()},[f,l,c,ee]),p.useEffect(()=>{const V=setTimeout(()=>{f!==1?u(1):Q()},500);return()=>clearTimeout(V)},[l]);const C=V=>{const ue=V.split(" ");return ue.length>=2?(ue[0][0]+ue[1][0]).toUpperCase():V.substring(0,2).toUpperCase()},S=V=>new Date(V).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),B=V=>V?"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium":"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",G=V=>{const ue=ee.find(Er=>Er.id===V);switch((ue==null?void 0:ue.name)||"Desconocido"){case"Maestro":return"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium";case"Editor":return"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium";case"Visualizador":return"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs font-medium";default:return"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs font-medium"}},Z=V=>{const ue=ee.find(Er=>Er.id===V);switch((ue==null?void 0:ue.name)||"Desconocido"){case"Maestro":return"bg-purple-500";case"Editor":return"bg-yellow-500";case"Visualizador":return"bg-gray-500";default:return"bg-blue-500"}},se=V=>{v(V),x(!0)},D=()=>{x(!1),v(null)},U=()=>{Q()},Y=()=>{P(!0)},ce=()=>{P(!1)},Ee=()=>{Q()},le=V=>{re(V),_(!0)},kt=()=>{_(!1),re(null)},Pt=()=>{Q()},Ut=()=>{X(!0)},hs=()=>{X(!1)},Rn=()=>{Q()};return d("div",{className:"min-h-screen bg-gray-50 p-6",children:[d("div",{className:"max-w-7xl mx-auto",children:[d("div",{className:"mb-8",children:[s("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestión de Usuarios"}),s("p",{className:"text-gray-600",children:"Administra los usuarios del sistema de planificación académica"})]}),d("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s("div",{className:"bg-white rounded-lg shadow p-6",children:d("div",{className:"flex items-center",children:[s("div",{className:"p-3 rounded-full bg-orange-100 mr-4",children:s("span",{className:"text-2xl",children:"👥"})}),d("div",{children:[s("p",{className:"text-2xl font-bold text-gray-900",children:h}),s("p",{className:"text-sm text-gray-600",children:"Total Usuarios"})]})]})}),s("div",{className:"bg-white rounded-lg shadow p-6",children:d("div",{className:"flex items-center",children:[s("div",{className:"p-3 rounded-full bg-blue-100 mr-4",children:s("span",{className:"text-2xl",children:"✅"})}),d("div",{children:[s("p",{className:"text-2xl font-bold text-gray-900",children:R}),s("p",{className:"text-sm text-gray-600",children:"Usuarios Activos"})]})]})}),s("div",{className:"bg-white rounded-lg shadow p-6",children:d("div",{className:"flex items-center",children:[s("div",{className:"p-3 rounded-full bg-purple-100 mr-4",children:s("span",{className:"text-2xl",children:"👑"})}),d("div",{children:[s("p",{className:"text-2xl font-bold text-gray-900",children:K}),s("p",{className:"text-sm text-gray-600",children:"Maestros"})]})]})}),s("div",{className:"bg-white rounded-lg shadow p-6",children:d("div",{className:"flex items-center",children:[s("div",{className:"p-3 rounded-full bg-yellow-100 mr-4",children:s("span",{className:"text-2xl",children:"✏️"})}),d("div",{children:[s("p",{className:"text-2xl font-bold text-gray-900",children:J}),s("p",{className:"text-sm text-gray-600",children:"Editores"})]})]})})]}),s("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:d("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[d("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[d("div",{className:"relative flex-1 max-w-md",children:[s(Zf,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s("input",{type:"text",placeholder:"Buscar usuarios...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-uc-blue focus:border-transparent",value:l,onChange:V=>i(V.target.value)})]}),d("select",{className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-uc-blue focus:border-transparent",value:c,onChange:V=>m(V.target.value),children:[s("option",{children:"Todos los roles"}),ee.map(V=>s("option",{value:V.name,children:V.name},V.id))]})]}),d("div",{className:"flex gap-3",children:[d("button",{onClick:Ut,className:"flex items-center gap-2 px-4 py-2 text-uc-blue border border-uc-blue rounded-lg hover:bg-blue-50 transition-colors",children:[s(dx,{className:"h-4 w-4"}),"Importar"]}),d("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 bg-uc-yellow text-black rounded-lg hover:bg-yellow-500 transition-colors font-medium",children:[s(t1,{className:"h-4 w-4"}),"Nuevo Usuario"]})]})]})}),s("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s("div",{className:"overflow-x-auto",children:d("table",{className:"min-w-full divide-y divide-gray-200",children:[s("thead",{className:"bg-gray-50",children:d("tr",{children:[s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol Temporal"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Última Actualización"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:r?s("tr",{children:s("td",{colSpan:6,className:"px-6 py-12 text-center",children:d("div",{className:"flex justify-center items-center",children:[s("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-uc-blue"}),s("span",{className:"ml-2 text-gray-500",children:"Cargando usuarios..."})]})})}):a?s("tr",{children:s("td",{colSpan:6,className:"px-6 py-12 text-center",children:d("div",{className:"text-red-500",children:[s("p",{children:a}),s("button",{onClick:Q,className:"mt-2 px-4 py-2 bg-uc-blue text-white rounded-lg hover:bg-blue-600",children:"Reintentar"})]})})}):e.length===0?s("tr",{children:s("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No se encontraron usuarios"})}):e.map(V=>d("tr",{className:"hover:bg-gray-50",children:[s("td",{className:"px-6 py-4 whitespace-nowrap",children:d("div",{className:"flex items-center",children:[s("div",{className:`h-10 w-10 rounded-full ${Z(V.roleId)} flex items-center justify-center text-white font-medium text-sm mr-4`,children:C(V.name)}),d("div",{children:[s("div",{className:"text-sm font-medium text-gray-900",children:V.name}),s("div",{className:"text-sm text-gray-500",children:V.emailInstitucional})]})]})}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:s("span",{className:G(V.roleId),children:H(V)})}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:V.roleExpiresAt?d("div",{className:"text-xs",children:[d("div",{className:"text-orange-600 font-medium",children:["Expira: ",new Date(V.roleExpiresAt).toLocaleDateString()]}),V.previousRoleName&&d("div",{className:"text-gray-500",children:["Revertirá a: ",V.previousRoleName]})]}):s("span",{className:"text-xs text-gray-400",children:"Permanente"})}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:s("span",{className:B(V.isActive),children:V.isActive?"Activo":"Inactivo"})}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S(V.updatedAt)}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d("div",{className:"flex space-x-2",children:[s("button",{onClick:()=>se(V),className:"text-blue-600 hover:text-blue-900 p-1",title:"Editar usuario",children:s(ew,{className:"h-4 w-4"})}),s("button",{onClick:()=>le(V),className:"text-red-600 hover:text-red-900 p-1",title:"Eliminar usuario",children:s(nw,{className:"h-4 w-4"})})]})})]},V.id))})]})})}),!r&&!a&&y>1&&d("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 mt-6 rounded-lg shadow",children:[d("div",{className:"flex-1 flex justify-between sm:hidden",children:[s("button",{onClick:()=>u(Math.max(1,f-1)),disabled:f===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),s("button",{onClick:()=>u(Math.min(y,f+1)),disabled:f===y,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]}),d("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s("div",{children:d("p",{className:"text-sm text-gray-700",children:["Mostrando"," ",s("span",{className:"font-medium",children:(f-1)*M+1})," ","a"," ",s("span",{className:"font-medium",children:Math.min(f*M,h)})," ","de"," ",s("span",{className:"font-medium",children:h})," ","resultados"]})}),s("div",{children:d("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[d("button",{onClick:()=>u(Math.max(1,f-1)),disabled:f===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s("span",{className:"sr-only",children:"Anterior"}),s("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:Math.min(5,y)},(V,ue)=>{let Qe=1;return y<=5||f<=3?Qe=ue+1:f>=y-2?Qe=y-4+ue:Qe=f-2+ue,s("button",{onClick:()=>u(Qe),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${f===Qe?"z-10 bg-uc-blue border-uc-blue text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:Qe},Qe)}),d("button",{onClick:()=>u(Math.min(y,f+1)),disabled:f===y,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s("span",{className:"sr-only",children:"Siguiente"}),s("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}),s(sw,{isOpen:N,onClose:D,user:g,onUserUpdated:U}),s(lw,{isOpen:E,onClose:ce,onUserCreated:Ee}),s(iw,{isOpen:T,onClose:kt,user:q,onUserDeleted:Pt}),s(cw,{isOpen:j,onClose:hs,onUsersImported:Rn})]})},uw=()=>{const[e,t]=p.useState("perfil"),[r,n]=p.useState(!1),[a,o]=p.useState(!1),[l,i]=p.useState(!1),{user:c,isLoading:m}=Gt(),[f,u]=p.useState(!1),[h,b]=p.useState({nombreCompleto:"",email:"",ultimoAcceso:""}),y=async()=>{try{u(!0);const T=await ct.getProfile();w(T)}catch(T){console.error("Error cargando perfil:",T),c&&w(c)}finally{u(!1)}},w=T=>{const _=T.name||(T.firstName&&T.lastName?`${T.firstName} ${T.lastName}`:T.email.split("@")[0]);b({nombreCompleto:_,email:T.email,ultimoAcceso:new Date().toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})};p.useEffect(()=>{c&&!m&&y()},[c,m]);const N=()=>{if(!c)return"U";if(c.firstName&&c.lastName)return(c.firstName.charAt(0)+c.lastName.charAt(0)).toUpperCase();if(c.name){const T=c.name.split(" ");return T.length>=2?(T[0].charAt(0)+T[T.length-1].charAt(0)).toUpperCase():c.name.charAt(0).toUpperCase()}return c.email.charAt(0).toUpperCase()},[x,g]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[v,E]=p.useState(!1),P=async()=>{var T,_;if(!x.currentPassword){alert("Por favor ingresa tu contraseña actual");return}if(!x.newPassword){alert("Por favor ingresa una nueva contraseña");return}if(x.newPassword.length<6){alert("La nueva contraseña debe tener al menos 6 caracteres");return}if(x.newPassword!==x.confirmPassword){alert("Las contraseñas no coinciden");return}try{E(!0),await ct.changePassword({currentPassword:x.currentPassword,newPassword:x.newPassword}),g({currentPassword:"",newPassword:"",confirmPassword:""}),alert("Contraseña actualizada correctamente")}catch(j){console.error("Error al cambiar contraseña:",j);const X=((_=(T=j.response)==null?void 0:T.data)==null?void 0:_.message)||j.message||"Error al cambiar la contraseña";alert(X)}finally{E(!1)}};return m||f?s("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:d("div",{className:"text-center",children:[s("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-uc-yellow mx-auto mb-4"}),s("p",{className:"text-gray-600",children:"Cargando perfil..."})]})}):c?d("div",{className:"min-h-screen bg-gray-50 p-6",children:[d("div",{className:"mb-8",children:[s("div",{className:"flex items-center gap-3 mb-2",children:s("img",{src:"/CAMPUS-VIRTUAL 2.png",alt:"DuocUC",className:"h-12 w-auto"})}),s("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mi Perfil"}),s("p",{className:"text-gray-600",children:"Gestiona tu información personal y configuraciones"})]}),s("div",{className:"max-w-6xl mx-auto",children:d("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s("div",{className:"lg:col-span-1",children:d("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[d("div",{className:"text-center mb-6",children:[s("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:s(Zd,{className:"w-12 h-12 text-gray-400"})}),s("div",{className:"w-8 h-8 bg-uc-yellow rounded-full flex items-center justify-center text-white text-sm font-bold absolute ml-16 -mt-8",children:N()}),s("h3",{className:"font-semibold text-gray-900",children:h.nombreCompleto})]}),d("nav",{className:"space-y-2",children:[d("button",{onClick:()=>t("perfil"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors ${e==="perfil"?"bg-uc-yellow text-white":"text-gray-700 hover:bg-gray-100"}`,children:[s(Zd,{className:"w-4 h-4"}),"Perfil"]}),d("button",{onClick:()=>t("seguridad"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors ${e==="seguridad"?"bg-uc-yellow text-white":"text-gray-700 hover:bg-gray-100"}`,children:[s(A1,{className:"w-4 h-4"}),"Seguridad"]})]})]})}),d("div",{className:"lg:col-span-3",children:[e==="perfil"&&d("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s("div",{className:"p-6 border-b border-gray-200",children:s("h2",{className:"text-xl font-semibold text-gray-900",children:"Información Personal"})}),s("div",{className:"p-6",children:d("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo"}),s("p",{className:"text-gray-900",children:h.nombreCompleto})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s("p",{className:"text-gray-900",children:h.email})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Último Acceso"}),s("p",{className:"text-gray-900",children:h.ultimoAcceso})]})]})})]}),e==="seguridad"&&d("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[d("div",{className:"p-6 border-b border-gray-200",children:[s("h2",{className:"text-xl font-semibold text-gray-900",children:"Seguridad"}),s("p",{className:"text-gray-600 mt-1",children:"Gestiona tu contraseña y configuraciones de seguridad"})]}),s("div",{className:"p-6",children:d("div",{className:"max-w-md space-y-4",children:[d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña Actual"}),d("div",{className:"relative",children:[s("input",{type:r?"text":"password",value:x.currentPassword,onChange:T=>g({...x,currentPassword:T.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-uc-blue focus:border-transparent",placeholder:"Ingresa tu contraseña actual"}),s("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?s(Xs,{className:"w-4 h-4"}):s(el,{className:"w-4 h-4"})})]})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva Contraseña"}),d("div",{className:"relative",children:[s("input",{type:a?"text":"password",value:x.newPassword,onChange:T=>g({...x,newPassword:T.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-uc-blue focus:border-transparent",placeholder:"Ingresa tu nueva contraseña"}),s("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?s(Xs,{className:"w-4 h-4"}):s(el,{className:"w-4 h-4"})})]})]}),d("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Nueva Contraseña"}),d("div",{className:"relative",children:[s("input",{type:l?"text":"password",value:x.confirmPassword,onChange:T=>g({...x,confirmPassword:T.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-uc-blue focus:border-transparent",placeholder:"Confirma tu nueva contraseña"}),s("button",{type:"button",onClick:()=>i(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?s(Xs,{className:"w-4 h-4"}):s(el,{className:"w-4 h-4"})})]})]}),d("button",{onClick:P,disabled:v,className:`w-full px-4 py-2 text-white rounded-lg transition-colors flex items-center justify-center gap-2 ${v?"bg-gray-400 cursor-not-allowed":"bg-uc-blue hover:bg-blue-700"}`,children:[v&&s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),v?"Cambiando...":"Cambiar Contraseña"]})]})})]})]})]})})]}):s("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:d("div",{className:"text-center",children:[s("p",{className:"text-gray-600 mb-4",children:"No hay usuario autenticado"}),s("button",{onClick:()=>window.location.href="/login",className:"px-4 py-2 bg-uc-yellow text-white rounded-lg hover:bg-yellow-600 transition-colors",children:"Ir al Login"})]})})},Fn="https://duoc.duckdns.org/api";class mw{getAuthHeaders(){return{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}}async getCourses(t){try{const r=new URLSearchParams;return t!=null&&t.year&&r.append("year",t.year),t!=null&&t.period&&r.append("period",t.period),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.teacher&&r.append("teacher",t.teacher),t!=null&&t.room&&r.append("room",t.room),(await qr.get(`${Fn}/schedules?${r.toString()}`,this.getAuthHeaders())).data}catch(r){return console.error("Error fetching courses:",r),this.getMockCourses()}}async getStats(){try{return(await qr.get(`${Fn}/scheduling/stats`,this.getAuthHeaders())).data}catch(t){return console.error("Error fetching stats:",t),{totalEvents:156,activeTeachers:23,usedRooms:18}}}async createCourse(t){try{return(await qr.post(`${Fn}/schedules`,t,this.getAuthHeaders())).data}catch(r){throw console.error("Error creating course:",r),r}}async updateCourse(t,r){try{return(await qr.put(`${Fn}/schedules/${t}`,r,this.getAuthHeaders())).data}catch(n){throw console.error("Error updating course:",n),n}}async deleteCourse(t){try{await qr.delete(`${Fn}/schedules/${t}`,this.getAuthHeaders())}catch(r){throw console.error("Error deleting course:",r),r}}getMockCourses(){return[{id:"1",code:"MAT-101",name:"Matemáticas I",section:"A",teacher:"Dr. García",schedule:{day:"Lunes",startTime:"08:00",endTime:"10:00"},room:"Aula 101",capacity:40,enrolled:36,occupancy:90,status:"active"},{id:"2",code:"FIS-201",name:"Física II",section:"B",teacher:"Dra. López",schedule:{day:"Martes",startTime:"10:00",endTime:"12:00"},room:"Lab. Física 1",capacity:30,enrolled:22,occupancy:73,status:"active"},{id:"3",code:"PROG-301",name:"Programación Avanzada",section:"A",teacher:"Dr. Martínez",schedule:{day:"Miércoles",startTime:"14:00",endTime:"16:00"},room:"Lab. Sistemas 2",capacity:25,enrolled:23,occupancy:92,status:"active"},{id:"4",code:"QUI-101",name:"Química General",section:"C",teacher:"Dra. Rodríguez",schedule:{day:"Jueves",startTime:"16:00",endTime:"18:00"},room:"Lab. Química 1",capacity:20,enrolled:18,occupancy:90,status:"active"}]}}const Xd=new mw,fw=()=>{const[e,t]=p.useState([]),[r,n]=p.useState({totalEvents:0,activeTeachers:0,usedRooms:0}),[a,o]=p.useState({year:"2024-1",period:"Todos los días"}),[l,i]=p.useState(""),[c,m]=p.useState(!1);p.useEffect(()=>{f()},[a]);const f=async()=>{m(!0);try{const[y,w]=await Promise.all([Xd.getCourses(a),Xd.getStats()]);t(y),n(w)}catch(y){console.error("Error loading data:",y)}finally{m(!1)}},u=e.filter(y=>{const w=l.toLowerCase();return y.code.toLowerCase().includes(w)||y.name.toLowerCase().includes(w)||y.teacher.toLowerCase().includes(w)||y.room.toLowerCase().includes(w)}),h=y=>y>=90?"bg-red-100 text-red-800":y>=75?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",b=y=>`${y}%`;return d("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto",children:[s("div",{className:"mb-6 sm:mb-8",children:d("div",{className:"flex items-center mb-4",children:[s("img",{src:"/CAMPUS-VIRTUAL 2.png",alt:"Campus Virtual",className:"h-12 mr-4"}),d("div",{children:[s("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-1",children:"Programación Académica"}),s("p",{className:"text-sm sm:text-base text-gray-600",children:"Gestiona los horarios y programación de cursos"})]})]})}),d("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[s("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:d("div",{className:"flex items-center justify-between",children:[d("div",{className:"flex-1",children:[s("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Eventos"}),s("p",{className:"text-3xl font-bold text-gray-900",children:r.totalEvents})]}),s("div",{className:"w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center text-white text-xl flex-shrink-0 ml-3",children:"📅"})]})}),s("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:d("div",{className:"flex items-center justify-between",children:[d("div",{className:"flex-1",children:[s("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Docentes Activos"}),s("p",{className:"text-3xl font-bold text-gray-900",children:r.activeTeachers})]}),s("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center text-white text-xl flex-shrink-0 ml-3",children:"👨‍🏫"})]})}),s("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:d("div",{className:"flex items-center justify-between",children:[d("div",{className:"flex-1",children:[s("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Aulas Utilizadas"}),s("p",{className:"text-3xl font-bold text-gray-900",children:r.usedRooms})]}),s("div",{className:"w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center text-white text-xl flex-shrink-0 ml-3",children:"🏛️"})]})})]}),s("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 mb-6",children:s("div",{className:"p-6",children:d("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[d("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[d("select",{value:a.year,onChange:y=>o({...a,year:y.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s("option",{value:"2024-1",children:"2024-1"}),s("option",{value:"2024-2",children:"2024-2"}),s("option",{value:"2025-1",children:"2025-1"})]}),d("select",{value:a.period,onChange:y=>o({...a,period:y.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s("option",{value:"Todos los días",children:"Todos los días"}),s("option",{value:"Lunes",children:"Lunes"}),s("option",{value:"Martes",children:"Martes"}),s("option",{value:"Miércoles",children:"Miércoles"}),s("option",{value:"Jueves",children:"Jueves"}),s("option",{value:"Viernes",children:"Viernes"})]}),d("div",{className:"relative",children:[s(Zf,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s("input",{type:"text",placeholder:"Buscar cursos, docentes, aulas...",value:l,onChange:y=>i(y.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]})]}),d("div",{className:"flex gap-2",children:[d("button",{className:"bg-uc-yellow hover:bg-yellow-500 text-black px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[s(wa,{className:"h-4 w-4"}),s("span",{children:"Calendario"})]}),d("button",{className:"bg-uc-yellow hover:bg-yellow-500 text-black px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[s(ai,{className:"h-4 w-4"}),s("span",{children:"Nuevo Horario"})]})]})]})})}),s("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:s("div",{className:"overflow-x-auto",children:d("table",{className:"min-w-full divide-y divide-gray-200",children:[s("thead",{className:"bg-gray-50",children:d("tr",{children:[s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CURSO"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SECCIÓN"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DOCENTE"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"HORARIO"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"AULA"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OCUPACIÓN"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACCIONES"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:c?s("tr",{children:s("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"Cargando..."})}):u.length===0?s("tr",{children:s("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No se encontraron cursos"})}):u.map(y=>d("tr",{className:"hover:bg-gray-50",children:[s("td",{className:"px-6 py-4 whitespace-nowrap",children:d("div",{children:[s("div",{className:"text-sm font-medium text-gray-900",children:y.code}),s("div",{className:"text-sm text-gray-500",children:y.name})]})}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.section}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.teacher}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d("div",{children:[s("div",{children:y.schedule.day}),d("div",{className:"text-gray-500",children:[y.schedule.startTime," - ",y.schedule.endTime]})]})}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.room}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${h(y.occupancy)}`,children:b(y.occupancy)})}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d("div",{className:"flex space-x-2",children:[s("button",{className:"text-blue-600 hover:text-blue-900",children:s(Bx,{className:"h-4 w-4"})}),s("button",{className:"text-yellow-600 hover:text-yellow-900",children:s(ni,{className:"h-4 w-4"})}),s("button",{className:"text-red-600 hover:text-red-900",children:s(Xf,{className:"h-4 w-4"})})]})})]},y.id))})]})})})]})};class pw{async getReports(t={}){return this.getMockReports(t)}async getReportStats(){return this.getMockStats()}async getReportTemplates(){return this.getMockTemplates()}async createReport(t){return{id:`report_${Date.now()}`,name:t.name,description:t.description,type:t.type,category:t.category,format:t.format,status:"generando",createdAt:new Date().toISOString(),generatedBy:"Usuario Actual",fileSize:"0 KB"}}async downloadReport(t){try{const n=this.getMockReports({}).find(a=>a.id===t);if(!n)throw new Error("Reporte no encontrado");n.type==="programacion-academica"?await this.downloadProgramacionAcademicaReport():n.type==="programacion-pago"?await this.downloadProgramacionPagoReport():(console.log(`Descargando reporte: ${t}`),alert("Funcionalidad de descarga no implementada para este tipo de reporte"))}catch(r){console.error("Error descargando reporte:",r),alert("Error al descargar el reporte")}}async downloadProgramacionAcademicaReport(){var t,r;try{const n=document.querySelector("[data-bimestre-id]"),a=n==null?void 0:n.getAttribute("data-bimestre-id");if(!a){alert("No se pudo obtener el ID del bimestre. Por favor, seleccione un bimestre.");return}console.log("Generando reporte de programación académica para bimestre:",a);const o=await z.post("/reports/programacion-academica",{bimestreId:parseInt(a)},{responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),l=window.URL.createObjectURL(new Blob([o.data])),i=document.createElement("a");i.href=l;const c=o.headers["content-disposition"];let m=`reporte_programacion_academica_bimestre_${a}_${new Date().toISOString().split("T")[0]}.xlsx`;if(c){const f=c.match(/filename="?(.+)"?/i);f&&f.length===2&&(m=f[1])}i.setAttribute("download",m),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(l),console.log("Reporte descargado exitosamente:",m)}catch(n){console.error("Error generando reporte de programación académica:",n),((t=n.response)==null?void 0:t.status)===401?alert("No tiene permisos para generar este reporte"):((r=n.response)==null?void 0:r.status)===500?alert("Error interno del servidor al generar el reporte"):alert("Error al generar el reporte de programación académica")}}async downloadProgramacionPagoReport(){var t,r;try{const n=document.querySelector("[data-bimestre-id]"),a=n==null?void 0:n.getAttribute("data-bimestre-id");if(!a){alert("No se pudo obtener el ID del bimestre. Por favor, seleccione un bimestre.");return}console.log("Generando reporte de programación de pago para bimestre:",a);const o=await z.post("/reports/programacion-pago",{bimestreId:parseInt(a)},{responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),l=window.URL.createObjectURL(new Blob([o.data])),i=document.createElement("a");i.href=l;const c=o.headers["content-disposition"];let m=`reporte_programacion_pago_bimestre_${a}_${new Date().toISOString().split("T")[0]}.xlsx`;if(c){const f=c.match(/filename="?(.+)"?/i);f&&f.length===2&&(m=f[1])}i.setAttribute("download",m),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(l),console.log("Reporte descargado exitosamente:",m)}catch(n){console.error("Error generando reporte de programación de pago:",n),((t=n.response)==null?void 0:t.status)===401?alert("No tiene permisos para generar este reporte"):((r=n.response)==null?void 0:r.status)===500?alert("Error interno del servidor al generar el reporte"):alert("Error al generar el reporte de programación de pago")}}async deleteReport(t){console.log(`Eliminando reporte: ${t}`)}getMockReports(t){let n=[{id:"1",name:"Reporte de Programación Académica",description:"Reporte detallado de la programación académica del semestre actual",type:"programacion-academica",category:"academico",format:"excel",status:"completado",createdAt:"2024-01-15T10:30:00Z",generatedBy:"Dr. María García",fileSize:"2.5 MB",downloadUrl:"/downloads/programacion_academica_2024_01.xlsx"},{id:"2",name:"Reporte de Programación de Pago",description:"Reporte detallado de la programación de pagos y aspectos financieros",type:"programacion-pago",category:"financiero",format:"excel",status:"completado",createdAt:"2024-01-14T15:45:00Z",generatedBy:"Prof. Juan López",fileSize:"1.8 MB",downloadUrl:"/downloads/programacion_pago_2024_01.xlsx"}];if(t.type&&(n=n.filter(a=>a.type===t.type)),t.category&&(n=n.filter(a=>a.category===t.category)),t.status&&(n=n.filter(a=>a.status===t.status)),t.search){const a=t.search.toLowerCase();n=n.filter(o=>o.name.toLowerCase().includes(a)||o.description.toLowerCase().includes(a))}return n}getMockStats(){return{totalReports:2,generatedToday:2,reportsByType:{"programacion-academica":1,"programacion-pago":1},reportsByStatus:{completado:2,generando:0,error:0}}}getMockTemplates(){return[{id:"1",name:"Plantilla Programación Académica",description:"Plantilla estándar para reportes de programación académica",type:"programacion-academica",category:"academico",fields:["codigo_materia","nombre_materia","docente","horario","aula","cupos","semestre","programa"],defaultFormat:"excel",isActive:!0},{id:"2",name:"Plantilla Programación de Pago",description:"Plantilla estándar para reportes de programación de pagos",type:"programacion-pago",category:"financiero",fields:["concepto_pago","monto","fecha_vencimiento","estudiante","programa","estado_pago","metodo_pago"],defaultFormat:"excel",isActive:!0}]}}const qa=new pw,hw=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(null),[a,o]=p.useState([]),[l,i]=p.useState(!1),[c,m]=p.useState({}),f=async()=>{i(!0);try{const[b,y,w]=await Promise.all([qa.getReports(c),qa.getReportStats(),qa.getReportTemplates()]);t(b),n(y),o(w)}catch(b){console.error("Error loading reports data:",b)}finally{i(!1)}};p.useEffect(()=>{f()},[c]);const u=async b=>{try{await qa.downloadReport(b.id)}catch(y){console.error("Error downloading report:",y),alert("Error al descargar el reporte")}},h=b=>{switch(b){case"programacion-pago":return"💰";case"programacion-academica":return"📅";default:return"📄"}};return d("div",{className:"p-6 max-w-7xl mx-auto",children:[d("div",{className:"mb-8",children:[s("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reportes"}),s("p",{className:"text-gray-600",children:"Genera y consulta reportes del sistema académico"})]}),r&&s("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:s("div",{className:"bg-white rounded-lg shadow p-6",children:d("div",{className:"flex items-center",children:[s("div",{className:"flex-shrink-0",children:s(Yd,{className:"h-8 w-8 text-blue-600"})}),d("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-500",children:"Total Reportes"}),s("p",{className:"text-2xl font-semibold text-gray-900",children:r.totalReports})]})]})})}),s("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s("div",{className:"overflow-x-auto",children:d("table",{className:"min-w-full divide-y divide-gray-200",children:[s("thead",{className:"bg-gray-50",children:d("tr",{children:[s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reporte"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:l?s("tr",{children:s("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:d("div",{className:"flex justify-center items-center",children:[s("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s("span",{className:"ml-2",children:"Cargando reportes..."})]})})}):e.length===0?s("tr",{children:d("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-500",children:[s(Yd,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s("p",{children:"No se encontraron reportes"}),s("p",{className:"text-sm",children:'Genera tu primer reporte usando el botón "Generar Reporte"'})]})}):e.map(b=>d("tr",{className:"hover:bg-gray-50",children:[s("td",{className:"px-6 py-4",children:s("div",{children:d("div",{className:"flex items-center",children:[s("span",{className:"text-lg mr-2",children:h(b.type)}),d("div",{children:[s("div",{className:"text-sm font-medium text-gray-900",children:b.name}),s("div",{className:"text-sm text-gray-500",children:b.description})]})]})})}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:s("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:b.type.replace("-"," ")})}),s("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s("div",{className:"flex items-center justify-end",children:s("button",{onClick:()=>u(b),className:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"Descargar",children:s(Dx,{className:"h-4 w-4"})})})})]},b.id))})]})})})]})};function gw(){const{isAuthenticated:e}=Gt();return s(Fg,{children:d("div",{className:"App",children:["        ",d(Ig,{children:[s(Ge,{path:"/login",element:s(d1,{})}),s(Ge,{path:"/login-old",element:s(c1,{})}),s(Ge,{path:"/error",element:s(W1,{})}),"          ",e?d(Ge,{path:"/",element:s(i1,{}),children:[s(Ge,{index:!0,element:s(Zn,{to:"/dashboard",replace:!0})}),s(Ge,{path:"dashboard",element:s(V1,{})}),s(Ge,{path:"usuarios",element:s(dw,{})}),s(Ge,{path:"perfil",element:s(uw,{})}),s(Ge,{path:"carga-datos",element:s(J1,{})}),s(Ge,{path:"/programacion",element:s(fw,{})}),s(Ge,{path:"/reportes",element:s(hw,{})})]}):s(Ge,{path:"*",element:s(Zn,{to:"/login",replace:!0})}),s(Ge,{path:"*",element:s(Zn,{to:"/error",replace:!0})})]})]})})}const yw=({children:e})=>{const{loadSession:t,isLoading:r,isAuthenticated:n}=Gt(),{fetchBimestreActual:a,fetchBimestresActivos:o}=jt(),[l,i]=p.useState(!1);return p.useEffect(()=>{(async()=>{try{await t()}catch(m){console.error("Error cargando sesión:",m)}finally{i(!0)}})()},[t]),p.useEffect(()=>{n&&l&&(async()=>{try{await Promise.all([a(),o()])}catch(m){console.error("Error cargando bimestres:",m)}})()},[n,l,a,o]),!l||r?s("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d("div",{className:"text-center",children:[s("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),s("p",{className:"mt-4 text-gray-600",children:"Cargando aplicación..."})]})}):s(Et,{children:e})};const vw=tl.createRoot(document.getElementById("root"));vw.render(s(zo.StrictMode,{children:s(yw,{children:s(gw,{})})}));
